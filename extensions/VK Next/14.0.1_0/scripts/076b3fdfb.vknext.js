"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[2599],{47648:(e,o,r)=>{r.d(o,{A:()=>v});var t=r(49032),_=r(1145),n=r(14943),i=r(67992),c=r(38729),a=r(4107);const l=(0,c.sr)(),u=new i.A,d=()=>{if(document.querySelector(".im-page:not(.im-page_group)"))return void setTimeout(d,1e3);const e=document.querySelector("#reforged-root,.VKCOMMessenger__reforgedRoot");e?e.querySelector(".VKCOMMessenger__skeletonWrapper")?setTimeout(d,500):(e=>{if(!e[l]){e[l]=!0;for(const o of u.listeners)o(e)}})(e):0===document.getElementById("wrap3")?.children.length&&setTimeout(d,500)},k=async e=>{if(document.getElementsByClassName("im-page")[0]&&!e)return void(0,_.A)((()=>k(!0)));const o=await(0,a.A)();d(),o.onLocationChange((async e=>{await(0,n.A)(),t.lz.test(e)&&d()}))};let s=!1;const v=e=>{const o=u.addListener(e);return(0,_.A)(d),s||(s=!0,k()),o}},72599:(e,o,r)=>{r.a(e,(async(e,t)=>{try{r.r(o);var _=r(38729),n=r(57580),i=r(22440),c=r(53644),a=r(1145),l=r(14943),u=r(97829),d=r(4107),k=r(2006),s=r(56969),v=r(43024),g=e([n]);n=(g.then?(await g)():g)[0];const m=(0,i.A)(),b=document.createElement("a");b.appendChild((0,c.A)(u.A));const p=(0,_.NS)(),h=()=>{const e=m.location.pathname.match(/^\/?gim(\d+)/);return e&&e[1]?`/gim${e[1]}/convo/${m.vk.id}`:`/im/convo/${m.vk.id}`},y=e=>{e.contains(b)||(b.ariaLabel=m.getLang?m.getLang("me_favorites"):"me_favorites",b.className="vkmListHeader__button ConvoList__topMenuAction",b.href=h(),e.prepend(b))},f=e=>{e[p]||(e[p]=new MutationObserver((async()=>{await(0,l.A)();const o=e.querySelector(".ConvoList__topMenu");o&&y(o)})),e[p].observe(e,{childList:!0}),k.A.add(e))},w=()=>{const e=document.getElementById("reforged-root");if(!e)return;const o=e.querySelector(".vkmListHeader__after");if(!o)return;const r=o.querySelector(".ConvoList__topMenu");r&&(y(r),f(o))};0,(0,s.A)((()=>requestIdleCallback(w))),(0,a.A)((async()=>{(await(0,d.A)()).onLocationChange((e=>{e.startsWith("im")&&requestAnimationFrame(w)}))})),v.default.addChangeKeyListener("enableBtnFav",((e,o)=>{o?requestAnimationFrame(w):b.remove()})),t()}catch(e){t(e)}}))},56969:(e,o,r)=>{r.d(o,{A:()=>d});var t=r(67992),_=r(38729),n=r(47648);const i=new t.A,c=(0,_.NS)(),a=e=>{for(const o of i.listeners)o(e)},l=e=>{const o=e.querySelector(".MEApp__content");o?a(o):e[c]&&(e[c]=new MutationObserver((()=>{const o=e.querySelector(".MEApp__content");o&&(a(o),e[c].disconnect())})),e[c].observe(e,{childList:!0,subtree:!0}))};let u=!1;const d=e=>{const o=i.addListener(e);return u||(u=!0,(0,n.A)(l)),o}},49032:(e,o,r)=>{r.d(o,{Fl:()=>i,XZ:()=>n,hj:()=>_,lz:()=>t});const t=/(^|\/)al_im\.php|(^|\/)im(\?|$)|(^|\/)gim\d+|\/write-?\d+/,_=/(^|\/)al_im\.php|(^|\/)im(\?|$)|\/write-?\d+|\/im\/.*/,n={"--accent":"--vkui--color_icon_accent","--background_content":"--vkui--color_background_content","--background_highlighted":"--vkui--color_transparent--active","--background_hover":"--vkui--color_transparent--hover","--background_light":"--vkui--color_background_tertiary","--background_page":"--vkui--color_background","--background_suggestions":"--vkui--color_background_modal","--button_commerce_background":"--vkui--color_text_positive","--button_secondary_background":"--vkui--color_background_secondary_alpha","--button_secondary_destructive_foreground":"--vkui--color_background_negative","--content_tint_background":"--vkui--color_background_secondary","--content_warning_background":"--vkui--color_background_warning","--counter_prominent_text":"--vkui--color_text_contrast","--destructive":"--vkui--color_text_negative","--dynamic_gray":"--vkui--color_accent_gray","--dynamic_green":"--vkui--color_accent_green","--dynamic_orange":"--vkui--color_accent_orange","--dynamic_purple":"--vkui--color_accent_purple","--dynamic_red":"--vkui--color_accent_red","--dynamic_violet":"--vkui--color_accent_violet","--dynamic_blue":"--vkui--color_accent_blue","--dynamic_raspberry_pink":"--vkui--color_accent_raspberry_pink","--field_background":"--vkui--color_field_background","--field_border":"--vkui--color_field_border_alpha","--field_error_background":"--vkui--color_background_negative_tint","--field_error_border":"--vkui--color_stroke_negative","--field_valid_border":"--vkui--color_stroke_positive","--header_background":"--vkui--color_header_background","--header_tint_alternate":"--vkui--color_icon_accent_themed","--icon_alpha_placeholder":"--vkui--color_icon_contrast","--icon_medium_alpha":"--vkui--color_icon_medium_alpha","--icon_medium":"--vkui--color_icon_medium","--icon_secondary_alpha":"--vkui--color_icon_secondary_alpha","--icon_secondary":"--vkui--color_icon_secondary","--icon_tertiary_alpha":"--vkui--color_icon_tertiary_alpha","--icon_tertiary":"--vkui--color_icon_tertiary","--image_border":"--vkui--color_image_border_alpha","--input_background":"--vkui--color_write_bar_input_background","--input_border":"--vkui--color_write_bar_input_border_alpha","--link_alternate":"--vkui--color_text_link_themed","--loader_track_fill":"--vkui--color_track_background","--loader_track_value_fill":"--vkui--color_track_buffer","--placeholder_icon_background_opaque":"--vkui--color_image_placeholder_alpha","--placeholder_icon_background":"--vkui--color_image_placeholder","--search_bar_field_background":"--vkui--color_search_field_background","--segmented_control_bar_background":"--vkui--color_segmented_control","--separator_alpha":"--vkui--color_separator_primary_alpha","--separator_alternate":"--vkui--color_separator_secondary","--separator_common":"--vkui--color_separator_primary","--skeleton_foreground_from":"--vkui--color_skeleton_from","--skeleton_foreground_to":"--vkui--color_skeleton_to","--text_link":"--vkui--color_text_link","--text_muted":"--vkui--color_text_muted","--text_primary":"--vkui--color_text_primary","--text_secondary":"--vkui--color_text_secondary","--text_subhead":"--vkui--color_text_subhead","--text_tertiary":"--vkui--color_text_tertiary","--writebar_icon":"--vkui--color_write_bar_icon","--gray_400":"--vkui--color_text_secondary","--gray_500":"--vkui--color_text_subhead","--gray_600":"--vkui--color_text_subhead","--gray_900":"--vkui--color_text_muted","--im_forward_line_tint":"--vkui--vkontakte_color_im_forward_line_alpha","--im_bubble_incoming":"--vkui--vkontakte_color_im_bubble_incoming","--im_bubble_incoming_alternate":"--vkui--vkontakte_color_im_bubble_incoming_alternate","--im_bubble_incoming_expiring":"--vkui--vkontakte_color_im_bubble_incoming_expiring","--im_bubble_border_alternate_highlighted":"--vkui--vkontakte_color_im_bubble_border_alternate_highlighted_alpha","--modal_card_background":"--vkui--color_background_modal","--im_bubble_outgoing":"--vkui--vkontakte_color_im_bubble_outgoing"},i=1e3},53644:(e,o,r)=>{r.d(o,{A:()=>_});let t=0;const _=e=>{const o=!!document.importNode;let r=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;o&&(r=document.importNode(r,!0));for(const e of r.querySelectorAll("title,desc"))e.remove();for(const e of r.querySelectorAll("[id]")){if(!e.id)continue;const o="vknext_icon-"+t++;let _=!1;for(const t of r.querySelectorAll(`[fill="url(#${e.id})"]`))t.setAttribute("fill",`url(#${o})`),_=!0;_&&(e.id=o)}return r}},97829:(e,o,r)=>{r.d(o,{A:()=>t});const t='<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m11.0834 3h1.8332c1.0561-.00001 1.9034-.00001 2.5887.05597.7041.05753 1.316.17864 1.8799.46599.9011.45913 1.6337 1.19173 2.0928 2.09282.2874.56396.4085 1.1758.466 1.87994.056.68525.056 1.53261.056 2.58868v7.6146c0 .7726 0 1.4144-.0454 1.9136-.045.4941-.145 1.0268-.4816 1.4539-.4585.5817-1.1552.9254-1.8959.9353-.5437.0072-1.0273-.2376-1.4468-.5026-.4238-.2677-.9331-.6582-1.5462-1.1284l-1.6172-1.2401c-.6073-.4657-.7136-.5262-.7973-.5486-.1111-.0297-.2281-.0297-.3392 0-.0837.0224-.1899.0829-.7973.5486l-1.6172 1.2401c-.61313.4702-1.12241.8607-1.54624 1.1284-.41949.265-.9031.5098-1.44679.5026-.74067-.0099-1.43732-.3536-1.89585-.9353-.33658-.4271-.43657-.9598-.48157-1.4539-.04548-.4992-.04547-1.141-.04545-1.9136v-7.6146c-.00001-1.05606-.00001-1.90343.05597-2.58868.05753-.70414.17864-1.31598.46599-1.87994.45913-.90109 1.19173-1.63369 2.09282-2.09282.56396-.28735 1.1758-.40846 1.87994-.46599.68525-.05598 1.53258-.05598 2.58868-.05597zm-2.4421 1.84999c-.59282.04844-.94142.13927-1.20934.27578-.56239.28655-1.01963.7438-1.30619 1.30619-.13651.26792-.22734.61651-.27577 1.20934-.0493.60333-.05 1.37708-.05 2.4809v7.5314c0 .8283.0009 1.3871.03802 1.7947.03771.414.10276.503.10276.503.12241.1554.30832.247.50605.2496 0 0 .11014-.0026.4616-.2245.346-.2186.78999-.5579 1.44732-1.062l1.58208-1.2131c.03379-.0259.06737-.0518.10077-.0775.4385-.3377.8488-.6536 1.3262-.7814.4161-.1115.8543-.1115 1.2704 0 .4774.1278.8877.4437 1.3262.7814.0334.0257.067.0516.1008.0775l1.5821 1.2131c.6573.5041 1.1013.8434 1.4473 1.062.3514.2219.4617.2245.4617.2245.1977-.0026.3836-.0943.506-.2497 0 0 .065-.0889.1027-.5029.0371-.4076.038-.9664.038-1.7947v-7.5314c0-1.10382-.0007-1.87757-.05-2.4809-.0484-.59283-.1393-.94142-.2758-1.20934-.2865-.56239-.7438-1.01964-1.3062-1.30619-.2679-.13651-.6165-.22734-1.2093-.27578-.6033-.04929-1.3771-.04999-2.4809-.04999h-1.7556c-1.1038 0-1.87757.0007-2.4809.04999z" fill="currentColor" fill-rule="evenodd"/></svg>\n'}}]);