"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1013],{3178:(e,s,a)=>{a.d(s,{o:()=>i});var i=(0,a(93543).mT)("Icon28SlidersOutline","sliders_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="sliders_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M18.5 15a3.5 3.5 0 0 1 3.355 2.5H24a1 1 0 0 1 0 2h-2.145a3.502 3.502 0 0 1-6.71 0H4a1 1 0 0 1 0-2h11.145A3.5 3.5 0 0 1 18.5 15m0 1.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5M10.5 6a3.5 3.5 0 0 1 3.355 2.5H24a1 1 0 0 1 0 2H13.855a3.502 3.502 0 0 1-6.71 0H4a1 1 0 0 1 0-2h3.145A3.5 3.5 0 0 1 10.5 6m0 1.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5" /></g></symbol>',28,28,!1,void 0)},51466:(e,s,a)=>{a.d(s,{A:()=>l,_:()=>r});var i=a(81621);const t=()=>{const e=document.getElementById("data");return e?.dataset.peernames?JSON.parse(decodeURIComponent(e?.dataset.peernames)):null},n=(0,i.vt)((e=>({peerNames:t(),setPeerNames:s=>e({peerNames:s})}))),r=e=>{n.getState().setPeerNames(e)},l=n},82827:(e,s,a)=>{a.d(s,{Q:()=>r});var i=a(81621),t=a(59914);const n=(0,i.vt)()((e=>({snackbar:null,showSnackbar:s=>{e({snackbar:s})},hideSnackbar:()=>{e({snackbar:null})}}))),r=()=>n((0,t.k)((e=>({showSnackbar:e.showSnackbar,hideSnackbar:e.hideSnackbar}))))},84833:(e,s,a)=>{a.d(s,{A:()=>l});var i=a(74848),t=a(39107),n=a(96540),r=a(17100);const l=({children:e,noClose:s=!1,...a})=>{const{open:l,setOpen:m,onClose:o,onClosed:c,onOpen:d,onOpened:_}=(0,r.Fs)(),h=(0,n.useId)();return(0,i.jsx)(t.VWm,{nav:h,open:l,onClose:(e,a)=>{s||(m(!1),o?.(e,a))},onClosed:c,onOpen:d,onOpened:_,...a,children:(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)(t.qBl,{}),children:e})})}},67685:(e,s,a)=>{a.a(e,(async(e,i)=>{try{a.d(s,{A:()=>o});var t=a(74848),n=a(30598),r=a(39107),l=a(87675),m=e([l]);l=(m.then?(await m)():m)[0];const o=({message:e,users:s,isEdit:a})=>{const i=(0,l.A)();return(0,t.jsxs)("div",{className:"im-mess-stack _im_mess_stack","data-peer":e.from_id,children:[(0,t.jsx)("div",{className:"im-mess-stack--photo",children:(0,t.jsx)("div",{className:"nim-peer nim-peer_small fl_l",children:(0,t.jsx)("div",{className:"nim-peer--photo-w",children:(0,t.jsx)("div",{className:"nim-peer--photo",children:(0,t.jsx)("a",{target:"_blank",className:"im_grid",rel:"noreferrer",href:"/"+s[e.from_id].screen_name,children:(0,t.jsx)("img",{alt:s[e.from_id].name,src:s[e.from_id].photo_50})})})})})}),(0,t.jsxs)("div",{className:"im-mess-stack--content",children:[(0,t.jsx)("div",{className:"im-mess-stack--info",children:(0,t.jsxs)("div",{className:"im-mess-stack--pname",children:[(0,t.jsx)("a",{href:"/"+s[e.from_id].screen_name,className:"im-mess-stack--lnk",target:"_blank",rel:"noreferrer",children:s[e.from_id].name}),(0,t.jsx)("span",{className:"im-mess-stack--tools",children:a?(0,t.jsx)("a",{href:`/im?sel=${e.peer_id}&msgid=${e.id}`,className:"_im_mess_link",rel:"noreferrer",children:e.src?i.use("vkcom_messages_history_original_msg"):i.use("vkcom_messages_history_changed_msg",{date:window.getDateText(e.date,null)})}):(0,t.jsx)(r.m_M,{appearance:"inversion",description:e.time&&i.use("vkcom_messages_history_when_deleted",{time:window.getDateText(e.time,null)}),children:(0,t.jsx)("a",{href:`/im?sel=${e.peer_id}&msgid=${e.id}`,className:"_im_mess_link",rel:"noreferrer",children:window.getDateText(e.date,null)})})})]})}),(0,t.jsx)("ul",{className:"ui_clean_list im-mess-stack--mess _im_stack_messages",children:(0,t.jsx)("li",{className:`im-mess _im_mess _im_mess_noa im-mess_editable _im_mess_${e.id}`,"aria-hidden":"false","data-deleted":!0,"data-ts":e.date,"data-msgid":e.id,"data-peer":e.peer_id,style:{cursor:"default"},children:(0,t.jsx)("div",{className:"im-mess--text wall_module _im_log_body",dangerouslySetInnerHTML:{__html:[e.reply,(0,n.A)(e.text,{mentions:1,allMentions:1,mail:1,link:1,emoji:1}),e.attachments].join("")}})})})]})]},e.id)};i()}catch(e){i(e)}}))},40473:(e,s,a)=>{a.a(e,(async(e,i)=>{try{a.d(s,{A:()=>N});var t=a(74848),n=a(82451),r=a(422),l=a(88496),m=a(89749),o=a(83506),c=a(59154),d=a(51466),_=a(94249),h=a(4255),u=a(39107),p=a(96540),g=a(67685),x=a(87675),j=a(20932),v=e([m,g,x]);[m,g,x]=v.then?(await v)():v;const k="historyItem_",f="message_",w=e=>{const s={};for(const[a,i]of Object.entries(e)){const e=Number(a);e&&(s[e]||(h.A.isUserId(e)&&(i.deactivated&&!i.first_name?s[i.id]={ins:"DELETED",acc:"DELETED",picUrl:i.photo_50}:s[i.id]={ins:`${i.first_name} ${i.last_name}`,acc:`${i.first_name_acc} ${i.last_name_acc}`,picUrl:i.photo_50}),h.A.isGroupId(e)&&(s[e]={name:i.name,picUrl:i.photo_50})))}return s},N=({messages:e,users:s,isEdit:a})=>{const i=(0,p.useMemo)((()=>w(s)),[s]);(0,d._)(i);const h=(0,x.A)(),v=[];let N=[],A=[],b=e[0].from_id,y=!!e[0].out,$=null,M=0;const T=()=>{var e,s,a,n;A.length&&(N.push((e=M++,s=b,a=y,n=A,(0,t.jsxs)(l.A,{isOut:a,children:[!a&&(0,t.jsx)(u.euF,{className:c.A.Avatar,src:i?.[s]?.picUrl,size:32}),(0,t.jsx)(r.A,{isOut:a,children:n})]},k+e))),A=[])};for(let i=0;i<e.length;i++){const r=e[i],l=new Date(1e3*r.date),c=new Date(l.getFullYear(),l.getMonth(),l.getDate()).getTime();if($&&$!==c&&(T(),v.push((0,t.jsx)(n.A,{dateMs:$,children:N},$)),N=[]),$=c,"NewMessage"==r?.kind&&r.action){T(),N.push((0,t.jsx)(m.A,{message:r},f+r.conversation_message_id));continue}"NewMessage"==r?.kind&&0!=i&&r.from_id!==b&&(T(),b=r.from_id,y=!!r.out);const d=!A.length;if("NewMessage"==r?.kind){const e=()=>a?r.src?h.use("vkcom_messages_history_original_msg"):h.use("vkcom_messages_history_changed_msg",{date:window.getDateText(r.date,null)}):r.time?h.use("vkcom_messages_history_when_deleted",{time:window.getDateText(r.time,null)}):null;A.push((0,t.jsx)(u.m_M,{placement:y?"left":"right",appearance:"inversion",description:e(),children:(0,t.jsx)(o.A,{firstInStack:d,message:r})},`${f}${r.conversation_message_id}_${r.update_time||0}`))}else v.push((0,t.jsx)(g.A,{message:r,users:s},f+r.id))}return(A.length||N.length)&&(T(),v.push((0,t.jsx)(n.A,{dateMs:$,children:N},$))),(0,t.jsx)(_.Z,{children:(0,t.jsx)(u.YJl,{className:j.A.MessagesViewerGroup,children:(0,t.jsx)("div",{className:j.A.MessagesViewerGroup__history,children:v})})})};i()}catch(e){i(e)}}))},89230:(e,s,a)=>{a.d(s,{A:()=>n});var i=a(74848),t=a(39107);const n=()=>(0,i.jsxs)("div",{className:"im-mess-stack _im_mess_stack",children:[(0,i.jsx)("div",{className:"im-mess-stack--photo",children:(0,i.jsx)("div",{className:"nim-peer nim-peer_small fl_l",children:(0,i.jsx)("div",{className:"nim-peer--photo-w",children:(0,i.jsx)("div",{className:"nim-peer--photo",children:(0,i.jsx)(t.EAD,{borderRadius:"50%",height:"36px"})})})})}),(0,i.jsxs)("div",{className:"im-mess-stack--content",children:[(0,i.jsx)("div",{className:"im-mess-stack--info",children:(0,i.jsx)("div",{className:"im-mess-stack--pname",children:(0,i.jsx)(t.EAD,{width:100})})}),(0,i.jsx)("ul",{className:"ui_clean_list im-mess-stack--mess _im_stack_messages",children:(0,i.jsx)("li",{className:"im-mess _im_mess _im_mess_noa im-mess_editable",style:{cursor:"default"},children:(0,i.jsx)("div",{className:"im-mess--text wall_module _im_log_body",children:(0,i.jsx)("span",{children:(0,i.jsx)(t.EAD,{width:200})})})})})]})]})},94249:(e,s,a)=>{a.d(s,{Z:()=>m});var i=a(74848),t=a(39107),n=a(96540),r=a(62295);const l="Pab4lyLnWDTPLKdr",m=({children:e,height:s=537,style:a={},saveKey:m,isScrollBottom:o,ThumbVerticalClassName:c,...d})=>{const _=(0,n.useRef)(null);return(0,n.useEffect)((()=>{if(!m)return;if(!_.current)return;const e=(e=>{const s=sessionStorage.getItem(e);return s?parseFloat(s):null})(m);e&&_.current.scrollTop(e)}),[m,_]),(0,n.useEffect)((()=>{o&&_.current&&_.current.scrollToBottom()})),(0,i.jsx)(r.ur,{ref:_,style:{height:s,...a},renderThumbVertical:e=>{var s,a;return m&&_.current&&(s=m,a=_.current.getScrollTop(),sessionStorage.setItem(s,a.toString())),(0,i.jsx)("div",{...e,className:(0,t.xWm)(l,c)})},renderTrackHorizontal:()=>(0,i.jsx)("div",{}),...d,children:e})}},76299:(e,s,a)=>{a.d(s,{A:()=>n});var i=a(42838);const t=document.createElement("textarea"),n=e=>(t.innerText=(0,i.sanitize)(e),t.innerHTML)},30598:(e,s,a)=>{a.d(s,{A:()=>o});var i=a(24382),t=a(76299);let n=/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g,r=/([a-zA-Zа-яА-Я\-_\.0-9\+]+@(((?:[\w\$А-Яа-яёЁєЄҐґЇїІіЈј—\-\_]+\.){1,5})([A-Za-zа-яА-Я\-\d]{2,22})))/gi;const l=/^(https?:\/\/)?([\w-]{1,32}\.[\w-]{1,32})[^\s@]*$/,m=/(?!,|;|:|\.|\s|<br ?\/?>|"|\(|\)|\[|\]|!|\?)(@all|\*all|@everyone|\*everyone|@все|\*все|@online|\*online|@here|\*here|@здесь|\*здесь|@тут|\*тут)(?=$|,|;|:|\.(?![a-z0-9_-])|\s|<br ?\/?>|"|\(|\)|\[|\]|!|\?)/gi,o=(e,{escape:s,mentions:a,mail:o,link:c,allMentions:d,emoji:_})=>(s&&(e=(0,t.A)(e)),a&&(e=e.replaceAll(n,((e,s,a,i,t)=>`<a href="/${s}${a}" class="mem_link" mention="" mention_id="${s}${a}" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)">${t}</a>`))),o&&(e=e.replaceAll(r,(e=>`<a href="mailto:${e}">${e}</a>`))),c&&(e=e.split("<br>").map((e=>e.split(" ").map((e=>{if(!l.test(e)&&!(0,i.A)(e))return e;const s="/away.php?"+new URLSearchParams({utf:"1",to:`${e.startsWith("http://")||e.startsWith("https://")?"":"http://"}${e}`,cc_key:""});return`<a href="${(0,t.A)(s)}" target="_blank" rel="nofollow noopener">${e}</a>`})).join(" "))).join("<br>")),d&&(e=e.replaceAll(m,(e=>`<span class="mem_pseudolink" data-mention="${e.slice(1).toLowerCase()}">${e}</span>`))),_&&window.Emoji?.emojiRegex&&(e=e.replaceAll(window.Emoji.emojiRegex,window.Emoji.emojiReplace)),e)},20932:(e,s,a)=>{a.d(s,{A:()=>i});const i={MessagesViewerGroup__history:"VbFsusSOCNRJ8IXi",MessagesViewerGroup:"Elo3MRoJoViOxMi1"}}}]);