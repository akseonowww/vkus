"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[8279],{38279:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.r(t),s.d(t,{default:()=>j});var r=s(74848),o=s(48081),a=s(39107),c=s(96540),i=s(8015),u=s(57087),l=s(14072),d=s(82050),_=s(80061),h=e([i]);i=(h.then?(await h)():h)[0];const g=({inputRef:e})=>{const t=(0,i.A)(),{showSnackbar:s,hideSnackbar:n}=(0,u.Qs)();return(0,c.useEffect)((()=>{e.current&&e.current.focus()}),[]),(0,r.jsxs)(a.YJl,{mode:"plain",children:[(0,r.jsxs)(a.EYj,{children:["1."," ",t.use("settings_tg_create_bot_1",{BotFather:(0,r.jsx)(a.N_E,{href:"https://t.me/BotFather",target:"_blank",children:"@BotFather"})})]}),(0,r.jsxs)("div",{className:_.A.AlertWriteToken__botFather,children:[(0,r.jsxs)(a.EYj,{children:["•"," ",t.use("settings_tg_create_bot_2",{command:(0,r.jsx)(a.N_E,{onClick:()=>{(0,l.A)("/newbot"),s((0,r.jsx)(a.qb_,{onClose:n,children:t.use("global_copied")}))},children:"/newbot"})})]}),(0,r.jsxs)(a.EYj,{children:["• ",t.use("settings_tg_create_bot_3")]}),(0,r.jsxs)(a.EYj,{children:["• ",t.use("settings_tg_create_bot_4")]})]}),(0,r.jsxs)(a.EYj,{children:["2. ",t.use("settings_tg_create_bot_5")]}),(0,r.jsx)(a.eIh,{className:_.A.AlertWriteToken__form,children:(0,r.jsx)(a.pde,{getRef:e,placeholder:"1234567890:AAHsSLg-OACsZr_vD225bcS-esQcS2DdaFc"})})]})},b=({oldToken:e})=>{const t=(0,c.useRef)(null),n=(0,i.A)(),l=(0,o.Gz)(),{showSnackbar:_,hideSnackbar:h}=(0,u.Qs)(),j=async e=>{l.showPopout((0,r.jsx)(a.WHT,{state:"error"})),await(0,d.A)(1e3),l.showPopout((0,r.jsx)(b,{oldToken:e}))},k=async()=>{if(!t.current)return;const e=t.current.value;l.showPopout((0,r.jsx)(a.WHT,{}));const{TelegramAPI:o}=await Promise.resolve().then(s.bind(s,80894)),c=new o(e);if(!c.isValidToken())return await j(e);if(!(await c.getMe()).ok)return _((0,r.jsx)(a.qb_,{duration:2e3,onClose:h,children:n.use("settings_menu_no_auth_title")})),await j(e);const i=(await s.e(9817).then(s.bind(s,69817))).default,u=await i.getStorage()||{},g=u[0]||{};u[0]={...g,tgToken:e},i.setStorage(u),l.showPopout((0,r.jsx)(a.WHT,{state:"done"})),await(0,d.A)(1e3),l.hidePopout()};return(0,c.useEffect)((()=>{if(!t.current)return;e&&(t.current.value=e);const s=e=>{"Enter"===e.key&&k()};return t.current.addEventListener("keyup",s),()=>t.current?.removeEventListener("keyup",s)}),[t.current]),(0,r.jsx)(a.V9m,{value:a.ODD.ANDROID,children:(0,r.jsx)(a.FcD,{actions:[{title:n.use("settings_confirm_tg_token"),mode:"destructive",action:k},{title:n.use("global_cancel"),mode:"cancel"}],onClose:()=>l.hidePopout(),title:n.use("settings_tg_stickers_write_token"),description:(0,r.jsx)(g,{inputRef:t})})})},j=b;n()}catch(e){n(e)}}))},14072:(e,t,s)=>{s.d(t,{A:()=>n});const n=e=>{const t=document.body.appendChild(document.createElement("textarea"));t.value=e,t.select(),document.execCommand("copy"),t.remove()}}}]);