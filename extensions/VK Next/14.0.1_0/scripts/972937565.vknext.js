"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[9319],{7708:(e,s,t)=>{t.d(s,{A:()=>u});var a=t(74848),n=t(48081),i=t(39107),r=t(13742),l=t(68741),d=t(91691);const c="zRIhm_rzeRaOj2Bs",o="m8aAYX3glAEj5Q3G",u=({beforeClassname:e,backPage:s,hideButtonIsFirstPage:t,hideBackButtonInTablet:u,children:h,...f})=>{const x=(0,n.XC)(),p=(0,n.Gz)(),{width:j}=(0,r.A)();let I=t&&x&&(0,d.A)();return u&&(j||800)>768&&(I=!0),(0,a.jsx)(i.aOn,{before:!I&&(0,a.jsx)(i.Hy0,{onClick:async()=>{x?s?await p.replace(s):await p.push(l.JZ.root.main.home):await p.back()},className:(0,i.xWm)(c,e),hideLabelOnIOS:!0}),...f,children:(0,a.jsx)("div",{className:o,children:h})})}},59319:(e,s,t)=>{t.a(e,(async(e,a)=>{try{t.r(s),t.d(s,{default:()=>b});var n=t(74848),i=t(48081),r=t(39107),l=t(96540),d=t(74225),c=t.n(d),o=t(7708),u=t(8015),h=t(68741),f=t(57087),x=t(4255),p=t(82050),j=e([u]);u=(j.then?(await j)():j)[0];const I=(0,l.lazy)((()=>Promise.all([t.e(1092),t.e(681),t.e(2263)]).then(t.bind(t,70681)))),b=()=>{const e=(0,u.A)(),{viewer:s}=(0,f.ur)(),a=(0,i.Gz)(),d=(0,l.useRef)(null),[j,b]=(0,l.useState)(0),w=(0,l.useRef)(null),[g,m]=(0,l.useState)(null);return(0,l.useLayoutEffect)((()=>{b(d.current?.offsetHeight??0)}),[d]),c()((async e=>{if(!s?.id)return;const a=(await t.e(4639).then(t.bind(t,74639))).default,{friends:n}=await a.getData(s.id);e()&&m(n?.length?n.filter(x.A.isUserId):[])}),[s?.id]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{backPage:h.JZ.root.main_0_0_0.spyning,after:(0,n.jsx)(r.ae4,{onClick:async()=>{const e=w.current;if(!e||!s)return;a.showPopout((0,n.jsx)(r.WHT,{}));const i=(await t.e(4639).then(t.bind(t,74639))).default,l=await i.getData(s.id),d=[...l.friends],c=[...d],o=e.map((({id:e})=>e));for(const s of e){const e=s.id;x.A.isGroupId(e)||x.A.isChatId(e)||(c.includes(e)||d.push(e))}for(const e of c)if(!x.A.isGroupId(e)&&!x.A.isChatId(e)&&!o.includes(e)){const s=d.indexOf(e);-1!==s&&d.splice(s,1)}await i.setData(s.id,{friends:d,events:l.events||{}}),a.showPopout((0,n.jsx)(r.WHT,{state:"done"})),await(0,p.A)(1e3),await a.replace(h.JZ.root.main_0_0_0.spyning),a.hidePopout()},label:e.use("global_save")}),children:e.use("settings_menu_spyfriends_title")}),(0,n.jsxs)(r.YJl,{children:[(0,n.jsx)("div",{ref:d,children:(0,n.jsx)(r.iau,{children:(0,n.jsx)(r.lZ$,{title:e.use("settings_select_friends_spy")})})}),null===g?(0,n.jsx)(r.qBl,{}):(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)(r.qBl,{}),children:(0,n.jsx)(I,{extraHeight:j,selectedUserIds:g??[],onSelect:e=>{w.current=e}})})]})]})};a()}catch(e){a(e)}}))},4255:(e,s,t)=>{t.d(s,{A:()=>n});const a=Object.freeze({isUserId:e=>e>=1&&e<19e8||e>=2e11&&e<1e12,isGroupId:e=>e<=-1&&e>-1e9,isChatId:e=>e>2e9&&e<21e8,convertChatPeerIdToChatId:e=>e-2e9,convertChatIdToChatPeerId:e=>e+2e9,isZeroOwner:e=>0===e,isUserIdTransitional:e=>(a.isUserId(e),0<e&&e<2e9)}),n=a}}]);