"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1180],{67078:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(74848),o=t(3068),s=t(75511);const i=document.createElement("div");i.className=s.A.Snackbars;const c=async e=>{const n=(await Promise.all([t.e(2551),t.e(7983),t.e(2020),t.e(3543),t.e(7759)]).then(t.bind(t,28582))).default;document.body.contains(i)||document.body.appendChild(i);const s=document.createElement("div");i.appendChild(s);const{unmount:c}=await(0,o.A)({root:s,content:(0,a.jsx)(n,{onClose:()=>{c(),s.remove(),0===i.children.length&&i.remove()},...e}),disableParentTransformForPositionFixedElements:!0,noStyling:!0})}},79507:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(10381);const o=(e,n)=>{if(e instanceof HTMLInputElement)e.setSelectionRange(n,n),e.focus();else{const t=window.getSelection(),a=document.createRange(),o=(e,n)=>{if(e.nodeType===Node.TEXT_NODE)e.textContent.length>=n?(a.setStart(e,n),a.setEnd(e,n)):n-=e.textContent.length;else for(let t=0;t<e.childNodes.length;t++){const a=e.childNodes[t];o(a,n)}};o(e,n),t&&a&&(t.removeAllRanges(),t.addRange(a)),e.focus()}};const s=new class{map;reverseMap;constructor(e){this.map=e,this.reverseMap={};for(const n in e)this.reverseMap[e[n]]=n}get(e){return this.map[e]||this.reverseMap[e]||e}}({"`":"ё",q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":".","~":"Ё",Q:"Й",W:"Ц",E:"У",R:"К",T:"Е",Y:"Н",U:"Г",I:"Ш",O:"Щ",P:"З","{":"Х","}":"Ъ",A:"Ф",S:"Ы",D:"В",F:"А",G:"П",H:"Р",J:"О",K:"Л",L:"Д",":":"Ж",'"':"Э",Z:"Я",X:"Ч",C:"С",V:"М",B:"И",N:"Т",M:"Ь","<":"Б",">":"Ю","?":",","@":'"',"#":"№",$:";","^":":","&":"?","|":"/"}),i=e=>e.split("").reduce(((e,n)=>e+s.get(n)),""),c=(0,a.A)((async()=>{const e=document.activeElement;if(e instanceof HTMLInputElement){const n=e.selectionStart||0,t=e.selectionEnd||0;e.value=i(e.value),o(e,n),e.setSelectionRange(n,t)}else if(e instanceof HTMLElement&&e.isContentEditable&&e.innerText){const n=(e=>{if(e instanceof HTMLInputElement)return e.selectionStart||0;const n=document.getSelection(),t=n?.getRangeAt(0),a=t?.cloneRange();return a?.selectNodeContents(e),a?.setEnd(t?.startContainer,t?.startOffset),a?.toString().length||0})(e),t=e.innerText;e.innerText=i(t),o(e,n)}}))},40524:(e,n,t)=>{t.d(n,{A:()=>o});var a=t(43024);const o=(0,t(10381).A)((async()=>{const e=a.default.getValue("currentTheme");e===a.default.getValue("firstTheme")||void 0===e?a.default.setValue("currentTheme",a.default.getValue("secondTheme")):a.default.setValue("currentTheme",a.default.getValue("firstTheme"))}))},87549:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(93819),o=t(67078),s=t(10381),i=t(44497),c=t(65123);const r=(0,s.A)((async()=>{const e=window.cur?.peer||(0,i.A)();if(!e)return;const n=await a.A;await(0,o.A)({type:"done",text:(0,c.A)(e)?n.use("vkcom_toggle_read_on"):n.use("vkcom_toggle_read_off")})}))},7933:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(93819),o=t(67078),s=t(10381),i=t(44497),c=t(25620);const r=(0,s.A)((async()=>{const e=window.cur?.peer||(0,i.A)();if(!e)return;const n=await a.A;await(0,o.A)({type:"done",text:(0,c.A)(e)?n.use("vkcom_toggle_write_on"):n.use("vkcom_toggle_write_off")})}))},10381:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(43027),o=t(89964);const s=e=>{let n,t,s=!1,i=null;const c=o=>{o.keyCode===n?s=!0:o.keyCode===t&&s&&((0,a.A)(o),e().catch(console.error))},r=e=>{e.keyCode===n&&(s=!1)},d=()=>{s=!1},l=()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",r),window.removeEventListener("blur",d);for(const e of document.querySelectorAll(".ComposerInput__input,.ConvoComposer__input"))e.onkeydown=e.__oldKeyDown||null,e.onkeyup=e.__oldKeyUp||null,e.__oldKeyDown=null,e.__oldKeyUp=null;i&&(i(),i=null)};return{enable:(e,a)=>{l(),n=e,t=a,document.addEventListener("keydown",c),document.addEventListener("keyup",r),window.addEventListener("blur",d),i=(0,o.A)((e=>{for(const n of e.querySelectorAll(".ComposerInput__input,.ConvoComposer__input"))n.__oldKeyDown||n.__oldKeyUp||(n.__oldKeyDown=n.onkeydown,n.__oldKeyUp=n.onkeyup,n.onkeydown=function(e){c(e),n.__oldKeyDown&&n.__oldKeyDown(e)},n.onkeyup=function(e){r(e),n.__oldKeyUp&&n.__oldKeyUp(e)})}))},disable:l}}},76211:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(44497),o=t(28381);const s=(0,t(10381).A)((async()=>(0,o.A)(window.cur.peer||(0,a.A)())))},26185:(e,n,t)=>{t.d(n,{A:()=>o});var a=t(43024);const o=(0,t(10381).A)((async()=>{a.default.setValue("casper",!a.default.getValue("casper"))}))},66133:(e,n,t)=>{t.a(e,(async(e,a)=>{try{t.r(n);var o=t(57580),s=t(43024),i=t(79507),c=t(40524),r=t(87549),d=t(7933),l=t(76211),u=t(26185),g=t(24884),A=t(97761),y=t(62708),p=t(47885),h=t(88161),w=t(25162),m=e([o]);o=(m.then?(await m)():m)[0];const v=()=>{const e=s.default.getValue("hotKeys")||{};e.changeTheme&&c.A.enable(e.changeTheme.key,e.changeTheme.code),e.hideAvatar&&u.A.enable(e.hideAvatar.key,e.hideAvatar.code),e.changeUnreader&&r.A.enable(e.changeUnreader.key,e.changeUnreader.code),e.changeUnwriter&&d.A.enable(e.changeUnwriter.key,e.changeUnwriter.code),e.stopMusic&&w.A.enable(e.stopMusic.key,e.stopMusic.code),e.nextMusic&&A.A.enable(e.nextMusic.key,e.nextMusic.code),e.previousMusic&&p.A.enable(e.previousMusic.key,e.previousMusic.code),e.goToBeginChat&&l.A.enable(e.goToBeginChat.key,e.goToBeginChat.code),e.myMentions&&g.A.enable(e.myMentions.key,e.myMentions.code),e.readCurChat&&h.A.enable(e.readCurChat.key,e.readCurChat.code),e.openFavorites&&y.A.enable(e.openFavorites.key,e.openFavorites.code),e.changeKeyboard&&i.A.enable(e.changeKeyboard.key,e.changeKeyboard.code)},f=()=>{s.default.addChangeKeyListener("hotKeys",((e,n)=>{if(JSON.stringify(e)===JSON.stringify(n))return;const t=n||{};t.changeTheme?c.A.enable(t.changeTheme.key,t.changeTheme.code):c.A.disable(),t.hideAvatar?u.A.enable(t.hideAvatar.key,t.hideAvatar.code):u.A.disable(),t.changeUnreader?r.A.enable(t.changeUnreader.key,t.changeUnreader.code):r.A.disable(),t.changeUnwriter?d.A.enable(t.changeUnwriter.key,t.changeUnwriter.code):d.A.disable(),t.stopMusic?w.A.enable(t.stopMusic.key,t.stopMusic.code):w.A.disable(),t.nextMusic?A.A.enable(t.nextMusic.key,t.nextMusic.code):A.A.disable(),t.previousMusic?p.A.enable(t.previousMusic.key,t.previousMusic.code):p.A.disable(),t.goToBeginChat?l.A.enable(t.goToBeginChat.key,t.goToBeginChat.code):l.A.disable(),t.myMentions?g.A.enable(t.myMentions.key,t.myMentions.code):g.A.disable(),t.readCurChat?h.A.enable(t.readCurChat.key,t.readCurChat.code):h.A.disable(),t.openFavorites?y.A.enable(t.openFavorites.key,t.openFavorites.code):y.A.disable(),t.changeKeyboard?i.A.enable(t.changeKeyboard.key,t.changeKeyboard.code):i.A.disable()}))},b=()=>{try{v()}catch(e){console.error(e)}f()};0,s.default.onInited(b),a()}catch(e){a(e)}}))},24884:(e,n,t)=>{t.d(n,{A:()=>o});var a=t(25012);const o=(0,t(10381).A)((async()=>(0,a.A)()))},97761:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(10381).A)((async()=>{const e=window.ap;e&&e.playNext()}))},62708:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(22440),o=t(10381);const s=(0,a.A)(),i=(0,o.A)((async()=>{s.nav.go({...s.nav.objLoc,sel:s.vk.id+""})}))},47885:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(10381).A)((async()=>{const e=window.ap;e&&e.playPrev()}))},88161:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(93819),o=t(52968),s=t(44497),i=t(67078);const c=(0,t(10381).A)((async()=>{const e=window.cur?.peer||(0,s.A)(),n=await a.A;if(!e)return await(0,i.A)({type:"error",text:n.use("vkcom_error_vk_api")});try{await window.vkApi.api("messages.markAsRead",{peer_id:e,group_id:(0,o.A)()}),await(0,i.A)({type:"done",text:n.use("global_done")})}catch(e){console.error(e),await(0,i.A)({type:"error",text:e?.error?.error_msg||n.use("global_error")})}}))},25162:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(10381).A)((async()=>{const e=window.ap;e&&(e.isPlaying()?e.pause():e.play())}))},52968:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(4255),o=t(1003);const s=()=>{if(window.cur.gid&&a.A.isGroupId(window.cur.gid))return window.cur.gid;const e=(0,o.A)();return a.A.isGroupId(e)?e:0}},44497:(e,n,t)=>{t.d(n,{A:()=>a});const a=()=>{const e=window.location.pathname.match(/\/convo\/(-?\d+)/);if(e)return Number(e[1])||0;const n=new URLSearchParams(window.location.search),t=Number(n.get("sel"));return t||0}},28381:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(82050),o=t(44497);const s=async(e=(0,o.A)())=>{if(!e||0===e)return;const{items:n}=await vkApi.api("messages.getHistory",{peer_id:e||window.cur.peer||window.vk.id,count:1,rev:1}),t=n[0].conversation_message_id||1;if(window.vkmeIntegration){const e={...window.nav.objLoc,cmid:`${t}`};window.nav.go(e)}else{const e={...window.nav.objLoc},{sel:n}=e;window.nav.go({...e,sel:""}),await(0,a.A)(0),window.nav.go({...e,sel:n,msgid:t})}}},25012:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(4255),o=t(1003);const s=()=>{const e=(0,o.A)(),n=a.A.isGroupId(e)?`[club${Math.abs(e)}|`:`[id${e}|`,t=document.body.querySelector("input#im_history_search");if(t){t.value=n;const e=document.body.getElementsByClassName("im-search--btn _im_start_inplace_search")[0];e?.click();const a=document.body.getElementsByClassName("im-action im-action_search")[0];return a?.click(),void(t.value="")}if(window.vkmeIntegration){const e={...window.nav.objLoc,search:n};window.nav.go(e)}}},65123:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(52968),o=t(43024),s=t(11860);const i=e=>{"string"==typeof e&&(e=parseInt(e));const n=Math.abs((0,a.A)()),t=o.default.getValue("silentreadinclgim"),i=o.default.getValue("silentreadexclgim");let c=t[n]||[],r=i[n]||[],d=!1;return n||(c=o.default.getValue("silentreadincl"),r=o.default.getValue("silentreadexcl")),(0,s.A)(e,n)?(c.includes(e)&&c.splice(c.indexOf(e),1),r.includes(e)||r.push(e),d=!1):(r.includes(e)&&r.splice(r.indexOf(e),1),c.includes(e)||c.push(e),d=!0),n?(t[n]=c,i[n]=r,o.default.setValue("silentreadinclgim",t),o.default.setValue("silentreadexclgim",i)):(o.default.setValue("silentreadincl",c),o.default.setValue("silentreadexcl",r)),d}},25620:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(52968),o=t(43024),s=t(37573);const i=e=>{"string"==typeof e&&(e=parseInt(e));const n=Math.abs((0,a.A)()),t=o.default.getValue("silentwriteinclgim"),i=o.default.getValue("silentwriteexclgim");let c=t[n]||[],r=i[n]||[],d=!1;return n||(c=o.default.getValue("silentwriteincl"),r=o.default.getValue("silentwriteexcl")),(0,s.A)(e,n)?(c.includes(e)&&c.splice(c.indexOf(e),1),r.includes(e)||r.push(e),d=!1):(r.includes(e)&&r.splice(r.indexOf(e),1),c.includes(e)||c.push(e),d=!0),n?(t[n]=c,i[n]=r,o.default.setValue("silentwriteinclgim",t),o.default.setValue("silentwriteexclgim",i)):(o.default.setValue("silentwriteincl",c),o.default.setValue("silentwriteexcl",r)),d}},43027:(e,n,t)=>{t.d(n,{A:()=>a});const a=e=>{e.preventDefault?.(),e.stopPropagation?.(),e.stopImmediatePropagation?.()}},75511:(e,n,t)=>{t.d(n,{A:()=>a});const a={Snackbars:"fuEF5ymRhcBAxInE",BaseSnackbar:"Fu47p889xWCKEooV"}}}]);