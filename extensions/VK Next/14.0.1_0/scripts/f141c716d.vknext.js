"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[3598,1192,634],{5622:(u,e,t)=>{t.d(e,{A:()=>s});var F=t(65578);const s=()=>(0,F.A)("colorScheme")},40043:(u,e,t)=>{t.d(e,{A:()=>s});const F=()=>'\n\tvar peer_id = Args.peerId;\n\tvar count = Args.count - 0;\n\tvar group_id = Args.groupId;\n\tvar offset = Args.offset - 0;\n    var max_calls = Args.maxCalls - 0;\n    var msg_count = Args.msgCount - 0;\n\t\n\tvar call_count = 0;\n\n\tvar response = {};\n\t\n\tvar params = {\n\t\t"peer_id": peer_id,\n\t\t"offset": offset,\n\t\t"count": count,\n\t\t"group_id": group_id,\n        "rev": 1\n\t};\n\n\tif (msg_count == 0) {\n\t\tvar messages = API.messages.getHistory(params);\n\t\tmsg_count = messages.count;\n\t\tresponse.msg_count = msg_count;\n\t\tresponse.messages = messages.items;\n\t\tmax_calls =\tmax_calls - 1;\n\t\tparams.offset = params.offset + count;\n\t}\n\t\n\tvar forks = [];\n\t\n\twhile (call_count < max_calls && offset < msg_count) {\n\t\tforks.push(fork(API.messages.getHistory(params)));\n\t\tcall_count = call_count + 1;\n\t\tparams.offset = params.offset + count;\n\t}\n\t\n\twhile (forks.length > 0) {\n\t\tvar messages = wait(forks.pop());\n\t\tif (response.messages)\n        \tresponse.messages = response.messages + messages.items;\n        else\n\t\t\tresponse.messages = messages.items;\n\t}\n\n\treturn response;\n';async function*s(u,e,t){let s=0,a=25,n=0;const o=200;do{try{const i=await window.vkApi.api("execute",{code:F(),peerId:u,groupId:e,count:o,offset:s,maxCalls:a,msgCount:n,v:"5.223"},{},{signal:t});if(10===(i.execute_errors||[])[0]?.error_code){a>1?a=Math.floor(a/2):(s+=o,a=25);continue}s+=a*o,0===n&&(n=i.msg_count),a=25,yield i}catch(u){if(t.aborted)return;13===u.error.error_code&&(a>1?a=Math.floor(a/2):(s+=o,a=25)),console.error(u)}}while(0==s||s<n)}},40349:(u,e,t)=>{t.d(e,{A:()=>x});var F=t(74848),s=t(33258),a=t(4255);function n(u,e,t,F,s,n){return a.A.isChatId(u)?t:a.A.isUserId(u)?0!==e?s:F:n}function o(u,e,t,F){return n(u,e,F.use("global_chat_stats_notification_chat_started_message",{peerName:t.peerName}),F.use("global_chat_stats_notification_user_started_message",{peerName:t.peerName}),F.use("global_chat_stats_notification_gim_user_started_message",{peerName:t.peerName,groupName:t.groupName}),F.use("global_chat_stats_notification_group_started_message",{peerName:t.peerName}))}var i=t(39099);function r(u,e,t,F){return n(u,e,F.use("global_chat_stats_notification_chat_ended_message",{peerName:t.peerName}),F.use("global_chat_stats_notification_user_ended_message",{peerName:t.peerName}),F.use("global_chat_stats_notification_gim_user_ended_message",{peerName:t.peerName,groupName:t.groupName}),F.use("global_chat_stats_notification_group_ended_message",{peerName:t.peerName}))}var c=t(93819),d=t(67078),l=t(387),g=t(10634);const m=/\u{1F3F4}(?:\u{E0067}\u{E0062}(?:\u{E0065}\u{E006E}\u{E0067}|\u{E0077}\u{E006C}\u{E0073}|\u{E0073}\u{E0063}\u{E0074})\u{E007F}|\u{200D}\u{2620}\u{FE0F}?)|\u{1F469}\u{200D}\u{1F469}\u{200D}(?:\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}])|\u{1F468}(?:\u{200D}(?:\u{2764}\u{FE0F}?\u{200D}(?:\u{1F48B}\u{200D})?\u{1F468}|[\u{1F468}\u{1F469}]\u{200D}(?:\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}])|\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}]|[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|\u{1F469}\u{200D}(?:\u{2764}\u{FE0F}?\u{200D}(?:\u{1F48B}\u{200D}[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}])|[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|\u{1F469}\u{200D}\u{1F466}\u{200D}\u{1F466}|(?:\u{1F441}\u{FE0F}?\u{200D}\u{1F5E8}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2695}\u{2696}\u{2708}]|\u{1F468}(?:[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2695}\u{2696}\u{2708}]|\u{200D}[\u{2695}\u{2696}\u{2708}])|(?:[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}]\u{FE0F}?|[\u{1F46F}\u{1F93C}\u{1F9DE}\u{1F9DF}])\u{200D}[\u{2640}\u{2642}]|[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}][\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2640}\u{2642}]|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9D6}-\u{1F9DD}](?:[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2640}\u{2642}]|\u{200D}[\u{2640}\u{2642}])|\u{1F469}\u{200D}[\u{2695}\u{2696}\u{2708}])\u{FE0F}?|\u{1F469}\u{200D}\u{1F467}\u{200D}[\u{1F466}\u{1F467}]|\u{1F469}\u{200D}\u{1F469}\u{200D}[\u{1F466}\u{1F467}]|\u{1F468}(?:\u{200D}(?:[\u{1F468}\u{1F469}]\u{200D}[\u{1F466}\u{1F467}]|[\u{1F466}\u{1F467}])|[\u{1F3FB}-\u{1F3FF}])|\u{1F3F3}\u{FE0F}?\u{200D}\u{1F308}|\u{1F469}\u{200D}\u{1F467}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}]|\u{1F469}\u{200D}\u{1F466}|\u{1F1F6}\u{1F1E6}|\u{1F1FD}\u{1F1F0}|\u{1F1F4}\u{1F1F2}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]|\u{1F1ED}[\u{1F1F0}\u{1F1F2}\u{1F1F3}\u{1F1F7}\u{1F1F9}\u{1F1FA}]|\u{1F1EC}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EE}\u{1F1F1}-\u{1F1F3}\u{1F1F5}-\u{1F1FA}\u{1F1FC}\u{1F1FE}]|\u{1F1EA}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1ED}\u{1F1F7}-\u{1F1FA}]|\u{1F1E8}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1EE}\u{1F1F0}-\u{1F1F5}\u{1F1F7}\u{1F1FA}-\u{1F1FF}]|\u{1F1F2}[\u{1F1E6}\u{1F1E8}-\u{1F1ED}\u{1F1F0}-\u{1F1FF}]|\u{1F1F3}[\u{1F1E6}\u{1F1E8}\u{1F1EA}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F4}\u{1F1F5}\u{1F1F7}\u{1F1FA}\u{1F1FF}]|\u{1F1FC}[\u{1F1EB}\u{1F1F8}]|\u{1F1FA}[\u{1F1E6}\u{1F1EC}\u{1F1F2}\u{1F1F3}\u{1F1F8}\u{1F1FE}\u{1F1FF}]|\u{1F1F0}[\u{1F1EA}\u{1F1EC}-\u{1F1EE}\u{1F1F2}\u{1F1F3}\u{1F1F5}\u{1F1F7}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|\u{1F1EF}[\u{1F1EA}\u{1F1F2}\u{1F1F4}\u{1F1F5}]|\u{1F1F8}[\u{1F1E6}-\u{1F1EA}\u{1F1EC}-\u{1F1F4}\u{1F1F7}-\u{1F1F9}\u{1F1FB}\u{1F1FD}-\u{1F1FF}]|\u{1F1EE}[\u{1F1E8}-\u{1F1EA}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}]|\u{1F1FF}[\u{1F1E6}\u{1F1F2}\u{1F1FC}]|\u{1F1EB}[\u{1F1EE}-\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1F7}]|\u{1F1F5}[\u{1F1E6}\u{1F1EA}-\u{1F1ED}\u{1F1F0}-\u{1F1F3}\u{1F1F7}-\u{1F1F9}\u{1F1FC}\u{1F1FE}]|\u{1F1E9}[\u{1F1EA}\u{1F1EC}\u{1F1EF}\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1FF}]|\u{1F1F9}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1ED}\u{1F1EF}-\u{1F1F4}\u{1F1F7}\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FF}]|\u{1F1E7}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EF}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|[#*0-9]\u{FE0F}?\u{20E3}|\u{1F1F1}[\u{1F1E6}-\u{1F1E8}\u{1F1EE}\u{1F1F0}\u{1F1F7}-\u{1F1FB}\u{1F1FE}]|\u{1F1E6}[\u{1F1E8}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F2}\u{1F1F4}\u{1F1F6}-\u{1F1FA}\u{1F1FC}\u{1F1FD}\u{1F1FF}]|\u{1F1F7}[\u{1F1EA}\u{1F1F4}\u{1F1F8}\u{1F1FA}\u{1F1FC}]|\u{1F1FB}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1EE}\u{1F1F3}\u{1F1FA}]|\u{1F1FE}[\u{1F1EA}\u{1F1F9}]|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9D6}-\u{1F9DD}][\u{1F3FB}-\u{1F3FF}]|[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}][\u{1F3FB}-\u{1F3FF}]|[\u{261D}\u{270A}-\u{270D}\u{1F385}\u{1F3C2}\u{1F3C7}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}\u{1F467}\u{1F470}\u{1F472}\u{1F474}-\u{1F476}\u{1F478}\u{1F47C}\u{1F483}\u{1F485}\u{1F4AA}\u{1F574}\u{1F57A}\u{1F590}\u{1F595}\u{1F596}\u{1F64C}\u{1F64F}\u{1F6C0}\u{1F6CC}\u{1F918}-\u{1F91C}\u{1F91D}\u{1F91E}\u{1F91F}\u{1F930}-\u{1F936}\u{1F9B5}\u{1F9B6}\u{1F9D1}-\u{1F9D5}][\u{1F3FB}-\u{1F3FF}]|[\u{231A}\u{231B}\u{23E9}-\u{23EC}\u{23F0}\u{23F3}\u{25FD}\u{25FE}\u{2614}\u{2615}\u{2648}-\u{2653}\u{267F}\u{2693}\u{26A1}\u{26AA}\u{26AB}\u{26BD}\u{26BE}\u{26C4}\u{26C5}\u{26CE}\u{26D4}\u{26EA}\u{26F2}\u{26F3}\u{26F5}\u{26FA}\u{26FD}\u{2705}\u{270A}\u{270B}\u{2728}\u{274C}\u{274E}\u{2753}-\u{2755}\u{2757}\u{2795}-\u{2797}\u{27B0}\u{27BF}\u{2B1B}\u{2B1C}\u{2B50}\u{2B55}\u{1F004}\u{1F0CF}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F236}\u{1F238}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F320}\u{1F32D}-\u{1F335}\u{1F337}-\u{1F37C}\u{1F37E}-\u{1F393}\u{1F3A0}-\u{1F3CA}\u{1F3CF}-\u{1F3D3}\u{1F3E0}-\u{1F3F0}\u{1F3F4}\u{1F3F8}-\u{1F43E}\u{1F440}\u{1F442}-\u{1F4FC}\u{1F4FF}-\u{1F53D}\u{1F54B}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F57A}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5FB}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CC}\u{1F6D0}-\u{1F6D2}\u{1F6EB}\u{1F6EC}\u{1F6F4}-\u{1F6F9}\u{1F910}-\u{1F93A}\u{1F93C}-\u{1F93E}\u{1F940}-\u{1F945}\u{1F947}-\u{1F970}\u{1F973}-\u{1F976}\u{1F97A}\u{1F97C}-\u{1F9A2}\u{1F9B0}-\u{1F9B9}\u{1F9C0}-\u{1F9C2}\u{1F9D0}-\u{1F9FF}]|[\xA9\xAE\u{203C}\u{2049}\u{2122}\u{2139}\u{2194}-\u{2199}\u{21A9}\u{21AA}\u{231A}\u{231B}\u{2328}\u{23CF}\u{23E9}-\u{23F3}\u{23F8}-\u{23FA}\u{24C2}\u{25AA}\u{25AB}\u{25B6}\u{25C0}\u{25FB}-\u{25FE}\u{2600}-\u{2604}\u{260E}\u{2611}\u{2614}\u{2615}\u{2618}\u{261D}\u{2620}\u{2622}\u{2623}\u{2626}\u{262A}\u{262E}\u{262F}\u{2638}-\u{263A}\u{2648}-\u{2653}\u{265F}\u{2660}\u{2663}\u{2665}\u{2666}\u{2668}\u{267B}\u{267E}\u{267F}\u{2692}-\u{2697}\u{2699}\u{269B}\u{269C}\u{26A0}\u{26A1}\u{26AA}\u{26AB}\u{26B0}\u{26B1}\u{26BD}\u{26BE}\u{26C4}\u{26C5}\u{26C8}\u{26CE}\u{26CF}\u{26D1}\u{26D3}\u{26D4}\u{26E9}\u{26EA}\u{26F0}-\u{26F5}\u{26F7}-\u{26FA}\u{26FD}\u{2702}\u{2705}\u{2708}-\u{270D}\u{270F}\u{2712}\u{2714}\u{2716}\u{271D}\u{2721}\u{2728}\u{2733}\u{2734}\u{2744}\u{2747}\u{274C}\u{274E}\u{2753}-\u{2755}\u{2757}\u{2763}\u{2764}\u{2795}-\u{2797}\u{27A1}\u{27B0}\u{27BF}\u{2934}\u{2935}\u{2B05}-\u{2B07}\u{2B1B}\u{2B1C}\u{2B50}\u{2B55}\u{3030}\u{303D}\u{3297}\u{3299}\u{1F004}\u{1F0CF}\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}\u{1F570}\u{1F573}-\u{1F57A}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D2}\u{1F6E0}-\u{1F6E5}\u{1F6E9}\u{1F6EB}\u{1F6EC}\u{1F6F0}\u{1F6F3}-\u{1F6F9}\u{1F910}-\u{1F93A}\u{1F93C}-\u{1F93E}\u{1F940}-\u{1F945}\u{1F947}-\u{1F970}\u{1F973}-\u{1F976}\u{1F97A}\u{1F97C}-\u{1F9A2}\u{1F9B0}-\u{1F9B9}\u{1F9C0}-\u{1F9C2}\u{1F9D0}-\u{1F9FF}]\u{FE0F}?|[\u{261D}\u{26F9}\u{270A}-\u{270D}\u{1F385}\u{1F3C2}-\u{1F3C4}\u{1F3C7}\u{1F3CA}-\u{1F3CC}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}-\u{1F469}\u{1F46E}\u{1F470}-\u{1F478}\u{1F47C}\u{1F481}-\u{1F483}\u{1F485}-\u{1F487}\u{1F4AA}\u{1F574}\u{1F575}\u{1F57A}\u{1F590}\u{1F595}\u{1F596}\u{1F645}-\u{1F647}\u{1F64B}-\u{1F64F}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F6C0}\u{1F6CC}\u{1F918}-\u{1F91C}\u{1F91E}\u{1F91F}\u{1F926}\u{1F930}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B5}\u{1F9B6}\u{1F9B8}\u{1F9B9}\u{1F9D1}-\u{1F9DD}]/gu,_=new RegExp(/[!@#$%^&*()_+-="№;:?[\]{}'<>,.`~|\\/\t\n\r]/gu.source+"|"+m.source,"gu"),A=/(?<=(^|[^а-я]))((у|[нз]а|(хитро|не)?вз?[ыьъ]|с[ьъ]|(и|ра)[зс]ъ?|(о[тб]|под)[ьъ]?|(.\B)+?[оаеи])?-?([её]б(?!о[рй])|и[пб][ае][тц]).*?|(н[иеа]|([дп]|верт)о|ра[зс]|з?а|с(ме)?|о(т|дно)?|апч)?-?ху([яйиеёю]|ли(?!ган)).*?|(в[зы]|(три|два|четыре)жды|(н|сук)а)?-?бл(я(?!(х|ш[кн]|мб)[ауеыио]).*?|[еэ][дт]ь?)|(ра[сз]|[зн]а|[со]|вы?|п(ере|р[оие]|од)|и[зс]ъ?|[ао]т)?п[иеё]зд.*?|(за)?п[ие]д[аое]?р([оа]м|(ас)?(ну.*?|и(ли)?[нщктл]ь?)?|(о(ч[еи])?|ас)?к(ой)|юг)[ауеы]?|манд([ауеыи](л(и[сзщ])?[ауеиы])?|ой|[ао]вошь?(е?к[ауе])?|юк(ов|[ауи])?)|муд([яаио].*?|е?н([ьюия]|ей))|мля([тд]ь)?|лять|([нз]а|по)х|м[ао]л[ао]фь([яию]|[еёо]й))(?=($|[^а-я]))/iu,p=(u,e,t=1)=>{u.has(e||0)?u.set(e||0,(u.get(e||0)||0)+t):u.set(e||0,t)},f={app_action:u=>++u.appActions,article:u=>++u.articles,artist:u=>++u.artists,audio:(u,e)=>{++u.audio,u.audioDuration+=e.audio?.duration||0},audio_message:(u,e)=>{++u.voices,u.voicesDuration+=e.audio_message?.duration||0},audio_playlist:u=>++u.audioPlaylists,call:(u,e)=>{++u.calls,u.callsDuration+=e.call?.duration||0},curator:u=>++u.curators,doc:(u,e)=>{++u.docs,u.docsSize+=e.doc?.size||0},donut_link:u=>++u.donutLinks,event:u=>++u.events,gift:u=>++u.gifts,graffiti:u=>++u.graffities,group:u=>++u.groups,group_call_in_progress:u=>++u.groupCalls,link:u=>++u.links,market:u=>++u.markets,market_market_album:u=>++u.marketAlbums,mini_app:u=>++u.miniApps,money_request:u=>++u.moneyRequests,money_transfer:u=>++u.moneyTransfers,narrative:u=>++u.narratives,photo:(u,e)=>{++u.photos,e.photo.lat&&++u.photosGeo},podcast:u=>++u.podcasts,poll:u=>++u.polls,share:u=>++u.shares,sticker:(u,e)=>((u,e)=>{++u.stickersCount,p(u.stickers,e.sticker?.sticker_id)})(u,e),ugc_sticker:(u,e)=>((u,e)=>{u.ugcPackId||(u.ugcPackId=e.ugc_sticker?.pack_id),++u.ugcStickersCount,p(u.ugcStickers,e.ugc_sticker?.id)})(u,e),story:u=>++u.stories,video:(u,e)=>{++u.video,u.videoDuration+=e.video?.duration||0},video_message:(u,e)=>{++u.videoMessages,u.videoMessagesDuration+=e.video_message?.duration||0},video_playlist:u=>++u.voicePlaylists,wall:u=>++u.posts,wall_reply:u=>++u.postReplies,widget:u=>++u.widgets};function E(u,e,t){try{for(const F of e){if(F.conversation_message_id<=t)break;const e=1e3*F.date;(!u.firstMessageTime||u.firstMessageTime>e)&&(u.firstMessageTime=e),(!u.lastMessageTime||u.lastMessageTime<e)&&(u.lastMessageTime=e),u.lastMessageId<F.conversation_message_id&&(u.lastMessageId=F.conversation_message_id),F.out?u.outgoing++:u.incoming++,p(u.msgCountBySender,F.from_id);const s=new Date(e).setHours(0,0,0,0);if(p(u.messagesByDay,s),u.attachments+=(F.attachments||[]).length,u.fwd+=(F.fwd_messages||[]).length,F.reply_message&&++u.replies,F.text?.length){u.chars+=F.text.length;const e=F.text.replaceAll(_," ").split(" ").filter((u=>u.length>2));u.wordsCount+=e.length;for(const t of e)p(u.words,t.toLowerCase()),A.test(t)&&(p(u.badWords,t.toLowerCase()),++u.badWordsCount);for(const e of F.text.match(m)||[])p(u.emojis,e)}F.action&&++u.actions,F.geo&&++u.geo;for(const e of F.attachments||[]){const t=f[e.type];t?t(u,e):++u.unknownAttachments}}}catch(u){console.error(u)}}var w=t(40043);const v=async(u,e,t)=>{const F=await(async(u,e)=>{const t=await g.default.getData(u,e);return t&&0!==t.lastMessageId?t:{actions:0,appActions:0,articles:0,artists:0,attachments:0,audio:0,audioDuration:0,audioPlaylists:0,badWords:new Map,badWordsCount:0,calls:0,callsDuration:0,chars:0,collectedTimestamp:0,curators:0,docs:0,docsSize:0,donutLinks:0,emojis:new Map,events:0,firstMessageTime:0,lastMessageId:0,lastMessageTime:0,fwd:0,geo:0,gifts:0,graffities:0,groupCalls:0,groups:0,incoming:0,linkCurators:0,links:0,marketAlbums:0,markets:0,messagesByDay:new Map,miniApps:0,moneyRequests:0,moneyTransfers:0,msgCountBySender:new Map,narratives:0,outgoing:0,photos:0,photosGeo:0,podcasts:0,polls:0,postReplies:0,posts:0,replies:0,shares:0,stickers:new Map,ugcStickers:new Map,ugcPackId:0,stickersCount:0,ugcStickersCount:0,stories:0,unknownAttachments:0,video:0,videoDuration:0,videoMessagesDuration:0,videoMessages:0,voicePlaylists:0,voices:0,voicesDuration:0,widgets:0,words:new Map,wordsCount:0}})(u,e),s=F.lastMessageId;for await(const a of(0,w.A)(u,e,t)){const u=a?.messages||[];if(u.length>0&&E(F,u,s),t.aborted)return;if((u[u.length-1]?.conversation_message_id||0)<s)break}F.collectedTimestamp=(0,l.A)(),await g.default.setData(u,e,F)},h={inWork:!1,peerId:void 0,groupId:void 0,aborted:!1};let C,k=new AbortController;const D=async u=>{const e={alreadyInWork:!1,peerId:u.peerId,groupId:u.groupId},t=await c.A;if(h.inWork&&u.forceChangePeer)k.abort(),k=new AbortController,h.aborted=!0,await(0,d.A)({text:t.use("vkcom_chat_stats_notification_started_title"),subtitle:o(u.peerId,u.groupId,u.notificationPeerData,t),before:u.notificationPeerData.imageUrl?(0,F.jsx)(s.A,{src:u.notificationPeerData.imageUrl}):null,duration:5e3}),await C;else if(h.inWork)return e.alreadyInWork=!0,e.peerId=h.peerId,e.groupId=h.groupId,e;return C=v(u.peerId,u.groupId,k.signal).finally((async()=>{h.inWork=!1,h.peerId=void 0,h.aborted||await(0,d.A)({text:t.use("vkcom_chat_stats_notification_ended_title"),subtitle:r(u.peerId,u.groupId,u.notificationPeerData,t),duration:1e4}),h.aborted=!1})),h.inWork=!0,h.peerId=u.peerId,h.groupId=u.groupId,e};var B=t(89307);const y=async u=>{const{default:e}=await t.e(3158).then(t.bind(t,63158));return(0,B.A)((0,F.jsx)(e,{value:u}))},x=async(u,e,t)=>{const a=await c.A,n=g.default.getData(u,e),r=window.vkApi.api("messages.getHistory",{peer_id:u,group_id:e,offset:0,count:1}),[l,m]=await Promise.all([n,r]);let _=!1;if(l){const t=(m?.items?.at(0)?.conversation_message_id||0)>l.lastMessageId;if(await y({peerId:u,groupId:e,stats:l,showCleanCache:!t,peerInfo:null}),!t)return;_=!0}const A=window.location?.host||"vk.com",p=await(0,i.A)(u,e),f={peerId:u,groupId:e,currentUserId:t,vkBaseUrl:A,notificationPeerData:p,forceChangePeer:!1},E=await D(f);if(E.alreadyInWork)if(E.peerId===u&&E.groupId===e){if(_)return;await(0,d.A)({text:a.use("vkcom_chat_stats_notification_error_title"),subtitle:a.use("vkcom_chat_stats_notification_already_working_on_current_peer"),duration:5e3})}else f.forceChangePeer=!0,await(0,d.A)({text:a.use("vkcom_chat_stats_notification_user_already_started_message"),duration:8e3,action:a.use("global_cancel_it"),onActionClick:async()=>{await D(f)}});else await(0,d.A)({text:a.use("vkcom_chat_stats_notification_started_title"),subtitle:_?a.use("vkcom_chat_stats_notification_inc_started_message"):o(u,e,p,a),before:p.imageUrl?(0,F.jsx)(s.A,{size:32,src:p.imageUrl}):null,duration:5e3})}},9511:(u,e,t)=>{t.a(u,(async(u,F)=>{try{t.d(e,{A:()=>d});var s=t(74848),a=t(66755),n=t(90275),o=t(87675),i=t(79705),r=t(25109),c=u([o]);o=(c.then?(await c)():c)[0];const d=()=>{const u=(0,o.A)(),[e]=(0,i.A)("nodeleteall");return e?(0,s.jsx)(n.vH,{leftIcon:(0,s.jsx)(a.O,{}),onClick:r.A,children:u.use("vkcom_action_item_deleted_msg")}):null};F()}catch(u){F(u)}}))},46895:(u,e,t)=>{t.a(u,(async(u,F)=>{try{t.d(e,{A:()=>l});var s=t(74848),a=t(16354),n=t(90275),o=t(33911),i=t(87675),r=t(79705),c=t(77725),d=u([o,i]);[o,i]=d.then?(await d)():d;const l=()=>{const u=(0,i.A)(),[e]=(0,r.A)("hookBombs");return e?(0,s.jsx)(n.vH,{leftIcon:(0,s.jsx)(a.s,{}),onClick:c.A,rightIcon:(0,s.jsx)(o.A.Prime,{}),children:u.use("vkcom_action_item_expired_msg")}):null};F()}catch(u){F(u)}}))},88957:(u,e,t)=>{t.a(u,(async(u,F)=>{try{t.d(e,{A:()=>l});var s=t(74848),a=t(93724),n=t(90275),o=t(67078),i=t(55517),r=t(87675),c=t(52968),d=u([r]);r=(d.then?(await d)():d)[0];const l=()=>{const u=(0,i.A)(),e=(0,r.A)();return(0,s.jsx)(n.vH,{leftIcon:(0,s.jsx)(a.j,{}),onClick:async()=>{try{await window.vkApi.api("messages.markAsRead",{peer_id:u,group_id:(0,c.A)()})}catch(u){console.error(u)}(0,o.A)({type:"done",text:e.use("global_done")})},children:e.use("vkcom_read")})};F()}catch(u){F(u)}}))},12508:(u,e,t)=>{t.a(u,(async(u,F)=>{try{t.d(e,{A:()=>E});var s=t(74848),a=t(45804),n=t(27849),o=t(96540),i=t(74225),r=t.n(i),c=t(90275),d=t(43027),l=t(32488),g=t(33911),m=t(67078),_=t(30456),A=t(55517),p=t(87675),f=u([g,p]);[g,p]=f.then?(await f)():f;const E=()=>{const u=(0,A.A)(),e=(0,p.A)(),[F,i]=(0,o.useState)(!1);r()((async e=>{if(0===u||u===window.vk.id)return;const F=await t.e(4765).then(t.bind(t,24765)).then((u=>u.default));if(!e)return;const s=await F.getData(window.vk.id);e&&i(s.friends.includes(u))}),[u]);return u===window.vk?.id||0===u?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.AS,{}),(0,s.jsx)(c.vH,{leftIcon:F?(0,s.jsx)(a.p,{width:20,height:20}):(0,s.jsx)(n.H,{width:20,height:20}),onClick:s=>{(0,d.A)(s),(async()=>{if(!await(0,l.default)())return(0,_.A)();const s=!F,a=await t.e(4765).then(t.bind(t,24765)).then((u=>u.default)),n=await a.getData(window.vk.id);if(s)n.friends.includes(u)||n.friends.push(u);else{const e=n.friends.indexOf(u);-1!==e&&n.friends.splice(e,1)}await a.setData(window.vk.id,n),(0,m.A)({type:"done",text:s?e.use("vkcom_toggle_spy_on"):e.use("vkcom_toggle_spy_off")}),i(s)})().catch(console.error)},rightIcon:(0,s.jsx)(g.A.Prime,{}),children:F?e.use("vkcom_action_item_off_spyning"):e.use("vkcom_action_item_on_spyning")})]})};F()}catch(u){F(u)}}))},74051:(u,e,t)=>{t.a(u,(async(u,F)=>{try{t.d(e,{A:()=>p});var s=t(74848),a=t(10017),n=t(34250),o=t(96540),i=t(90275),r=t(43027),c=t(67078),d=t(55517),l=t(87675),g=t(52968),m=t(11860),_=t(65123),A=u([l]);l=(A.then?(await A)():A)[0];const p=()=>{const u=(0,l.A)(),e=(0,d.A)(),[t,F]=(0,o.useState)((0,m.A)(e,(0,g.A)()));return(0,o.useEffect)((()=>{F((0,m.A)(e,(0,g.A)()))}),[e]),(0,s.jsx)(i.vH,{leftIcon:t?(0,s.jsx)(a.n,{}):(0,s.jsx)(n.G,{}),onClick:s=>{(0,r.A)(s),(0,c.A)({type:"done",text:(0,_.A)(e)?u.use("vkcom_toggle_read_on"):u.use("vkcom_toggle_read_off")}),F(!t)},children:t?u.use("vkcom_action_item_off_unreads"):u.use("vkcom_action_item_on_unreads")})};F()}catch(u){F(u)}}))},60546:(u,e,t)=>{t.a(u,(async(u,F)=>{try{t.d(e,{A:()=>p});var s=t(74848),a=t(12076),n=t(29713),o=t(96540),i=t(90275),r=t(43027),c=t(67078),d=t(55517),l=t(87675),g=t(52968),m=t(37573),_=t(25620),A=u([l]);l=(A.then?(await A)():A)[0];const p=()=>{const u=(0,l.A)(),e=(0,d.A)(),[t,F]=(0,o.useState)((0,m.A)(e,(0,g.A)()));return(0,o.useEffect)((()=>{F((0,m.A)(e,(0,g.A)()))}),[e]),(0,s.jsx)(i.vH,{leftIcon:t?(0,s.jsx)(n.Z,{}):(0,s.jsx)(a.Y,{width:20,height:20}),onClick:s=>{(0,r.A)(s),(0,c.A)({type:"done",text:(0,_.A)(e)?u.use("vkcom_toggle_write_on"):u.use("vkcom_toggle_write_off")}),F(!t)},children:t?u.use("vkcom_action_item_off_unwriters"):u.use("vkcom_action_item_on_unwriters")})};F()}catch(u){F(u)}}))},22486:(u,e,t)=>{t.a(u,(async(u,F)=>{try{t.d(e,{A:()=>B});var s=t(74848),a=t(97263),n=t(19610),o=t(47503),i=t(89150),r=t(14487),c=t(90275),d=t(55517),l=t(9511),g=t(46895),m=t(12508),_=t(74051),A=t(60546),p=t(87675),f=t(52968),E=t(28381),w=t(25012),v=t(40349),h=t(31284),C=t(89205),k=t(88957),D=u([l,g,m,_,A,p,k]);[l,g,m,_,A,p,k]=D.then?(await D)():D;const B=({isGroup:u})=>{const e=(0,d.A)(),t=(0,p.A)(),F=u?(0,f.A)():void 0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.vH,{leftIcon:(0,s.jsx)(a.k,{}),onClick:()=>(0,E.A)(e),children:t.use("vkcom_action_item_im_start")}),(0,s.jsx)(c.vH,{leftIcon:(0,s.jsx)(n.e,{}),onClick:w.A,children:t.use("vkcom_action_item_main_mentions")}),(0,s.jsx)(l.A,{}),(0,s.jsx)(g.A,{}),!F&&(0,s.jsx)(c.vH,{leftIcon:(0,s.jsx)(o.S,{width:20,height:20}),onClick:C.A,children:t.use("vkcom_action_item_encrypting")}),(0,s.jsx)(c.AS,{}),(0,s.jsx)(_.A,{}),(0,s.jsx)(A.A,{}),!F&&(0,s.jsx)(m.A,{}),(0,s.jsx)(c.AS,{}),(0,s.jsx)(c.vH,{leftIcon:(0,s.jsx)(i.W,{}),onClick:()=>(0,h.A)({peerId:e,groupId:(0,f.A)()}),children:t.use("vkcom_action_item_chat_download")}),(0,s.jsx)(c.vH,{leftIcon:(0,s.jsx)(r.R,{}),onClick:()=>(0,v.A)(e,window.cur?.gid||0,window.vk.id),children:t.use("vkcom_action_item_chat_stats")}),(0,s.jsx)(k.A,{})]})};F()}catch(u){F(u)}}))},20382:(u,e,t)=>{t.a(u,(async(u,F)=>{try{t.d(e,{default:()=>f});var s=t(74848),a=t(90275),n=t(15052),o=t(25772),i=t(39107),r=t(49423),c=t(87675),d=t(79705),l=t(80491),g=t(22486),m=t(28399),_=u([c,g]);[c,g]=_.then?(await _)():_;const A=()=>{const u=(0,c.A)(),[e]=(0,d.A)("encryptMessagesType");if(!e)return null;const t=l.A.find((({value:u})=>u===e));return t?(0,s.jsx)(i.m_M,{usePortal:document.body,appearance:"black",placement:"right",description:u.use("vkcom_message_decrypting_enabled_warning",{method:t.title}),children:(0,s.jsx)("div",{className:m.A.EncryptMessagesButton,children:(0,s.jsx)(o.m,{})})}):null},p=({isGroup:u})=>(0,s.jsx)(a.Ku,{trigger:"hover",placement:"bottom-end",className:m.A.HeaderControls,hideOnClick:!0,actions:(0,s.jsx)(g.A,{isGroup:u}),children:(0,s.jsxs)("button",{className:m.A.ConvoHeader__action,children:[(0,s.jsx)(n.X,{}),(0,s.jsx)(A,{})]})}),f=({isGroup:u})=>{const e=(0,r.A)();return(0,s.jsx)(i.SvD,{value:e,children:(0,s.jsx)(p,{isGroup:u})})};F()}catch(u){F(u)}}))},80491:(u,e,t)=>{t.d(e,{A:()=>F});const F=[{value:"vtosters",title:"VTosters Classique"},{value:"vkcoffee",title:"VK Coffee [default]"},{value:"vkcoffeeHidden",title:"VK Coffee [hidden]"},{value:"beeCrypt",title:"BeeCrypt"},{value:"mp3Invis",title:"Mp3 invisible"}]},25109:(u,e,t)=>{t.d(e,{A:()=>s});var F=t(89307);const s=async()=>{const{default:u}=await Promise.all([t.e(2838),t.e(2295),t.e(8108),t.e(3506),t.e(340),t.e(1013),t.e(7486)]).then(t.bind(t,81922));return(0,F.A)(u)}},31284:(u,e,t)=>{t.d(e,{A:()=>a});var F=t(74848),s=t(89307);const a=async u=>{const{default:e}=await t.e(8671).then(t.bind(t,48671));return(0,s.A)((0,F.jsx)(e,{...u}))}},89205:(u,e,t)=>{t.d(e,{A:()=>s});var F=t(89307);const s=async()=>{const{default:u}=await t.e(1062).then(t.bind(t,71062));return(0,F.A)(u)}},77725:(u,e,t)=>{t.d(e,{A:()=>n});var F=t(32488),s=t(89307),a=t(30456);const n=async()=>{if(!await(0,F.default)())return(0,a.A)();const{default:u}=await Promise.all([t.e(2838),t.e(2295),t.e(8108),t.e(3506),t.e(340),t.e(1013),t.e(277)]).then(t.bind(t,78278));return(0,s.A)(u)}},61685:(u,e,t)=>{t.d(e,{l:()=>F});const F="vknext/settings"},30456:(u,e,t)=>{t.d(e,{A:()=>s});var F=t(81192);const s=()=>(0,F.default)("#/prime")},81192:(u,e,t)=>{t.d(e,{default:()=>o});var F=t(82050),s=t(14943),a=t(4107),n=t(61685);const o=async u=>{(await(0,a.A)()).go(n.l),u&&(await(0,s.A)(),await(0,F.A)(100),window.location.hash=u)}},49423:(u,e,t)=>{t.d(e,{A:()=>c});var F=t(14943),s=t(95684),a=t(96540),n=t(74225),o=t.n(n),i=t(5622);const r=()=>{const u=window.colorScheme?.currentMode;return"auto"===u?window.colorScheme.currentIsDark?"dark":"light":u},c=()=>{const[u,e]=(0,a.useState)(r()),[t,n]=(0,a.useState)(!!window.colorScheme?.subscribe);return o()((async u=>{await(0,i.A)(),u()&&n(!0)}),[]),(0,a.useEffect)((()=>{if(window.colorScheme?.subscribe)return window.colorScheme.subscribe((async()=>{await(0,s.A)(),await(0,F.A)(),e(r())}));n(!1)}),[t]),u}},55517:(u,e,t)=>{t.d(e,{A:()=>i});var F=t(22440),s=t(96540),a=t(5679),n=t(44497);const o=(0,F.A)(),i=()=>{const[u,e]=(0,s.useState)(o.cur?.peer||(0,n.A)());return(0,s.useEffect)((()=>{if(o.vkmeIntegration)return(0,a.A)((u=>{"UserOpenedConvo"===u.type&&e(u.peerId),"UserClosedConvo"===u.type&&e(0)}))}),[]),(0,s.useEffect)((()=>{if(o.vkmeIntegration)return;return o.nav.onLocationChange((()=>{u!==o.cur.peer&&o.cur.peer&&e(o.cur.peer)}))}),[]),u}},52968:(u,e,t)=>{t.d(e,{A:()=>a});var F=t(4255),s=t(1003);const a=()=>{if(window.cur.gid&&F.A.isGroupId(window.cur.gid))return window.cur.gid;const u=(0,s.A)();return F.A.isGroupId(u)?u:0}},28381:(u,e,t)=>{t.d(e,{A:()=>a});var F=t(82050),s=t(44497);const a=async(u=(0,s.A)())=>{if(!u||0===u)return;const{items:e}=await vkApi.api("messages.getHistory",{peer_id:u||window.cur.peer||window.vk.id,count:1,rev:1}),t=e[0].conversation_message_id||1;if(window.vkmeIntegration){const u={...window.nav.objLoc,cmid:`${t}`};window.nav.go(u)}else{const u={...window.nav.objLoc},{sel:e}=u;window.nav.go({...u,sel:""}),await(0,F.A)(0),window.nav.go({...u,sel:e,msgid:t})}}},25012:(u,e,t)=>{t.d(e,{A:()=>a});var F=t(4255),s=t(1003);const a=()=>{const u=(0,s.A)(),e=F.A.isGroupId(u)?`[club${Math.abs(u)}|`:`[id${u}|`,t=document.body.querySelector("input#im_history_search");if(t){t.value=e;const u=document.body.getElementsByClassName("im-search--btn _im_start_inplace_search")[0];u?.click();const F=document.body.getElementsByClassName("im-action im-action_search")[0];return F?.click(),void(t.value="")}if(window.vkmeIntegration){const u={...window.nav.objLoc,search:e};window.nav.go(u)}}},65123:(u,e,t)=>{t.d(e,{A:()=>n});var F=t(52968),s=t(43024),a=t(11860);const n=u=>{"string"==typeof u&&(u=parseInt(u));const e=Math.abs((0,F.A)()),t=s.default.getValue("silentreadinclgim"),n=s.default.getValue("silentreadexclgim");let o=t[e]||[],i=n[e]||[],r=!1;return e||(o=s.default.getValue("silentreadincl"),i=s.default.getValue("silentreadexcl")),(0,a.A)(u,e)?(o.includes(u)&&o.splice(o.indexOf(u),1),i.includes(u)||i.push(u),r=!1):(i.includes(u)&&i.splice(i.indexOf(u),1),o.includes(u)||o.push(u),r=!0),e?(t[e]=o,n[e]=i,s.default.setValue("silentreadinclgim",t),s.default.setValue("silentreadexclgim",n)):(s.default.setValue("silentreadincl",o),s.default.setValue("silentreadexcl",i)),r}},25620:(u,e,t)=>{t.d(e,{A:()=>n});var F=t(52968),s=t(43024),a=t(37573);const n=u=>{"string"==typeof u&&(u=parseInt(u));const e=Math.abs((0,F.A)()),t=s.default.getValue("silentwriteinclgim"),n=s.default.getValue("silentwriteexclgim");let o=t[e]||[],i=n[e]||[],r=!1;return e||(o=s.default.getValue("silentwriteincl"),i=s.default.getValue("silentwriteexcl")),(0,a.A)(u,e)?(o.includes(u)&&o.splice(o.indexOf(u),1),i.includes(u)||i.push(u),r=!1):(i.includes(u)&&i.splice(i.indexOf(u),1),o.includes(u)||o.push(u),r=!0),e?(t[e]=o,n[e]=i,s.default.setValue("silentwriteinclgim",t),s.default.setValue("silentwriteexclgim",n)):(s.default.setValue("silentwriteincl",o),s.default.setValue("silentwriteexcl",i)),r}},10634:(u,e,t)=>{t.r(e),t.d(e,{default:()=>a});var F=t(53778);class s extends F.default{constructor(){super("chatStats",{lifetime:3e3})}async getData(u,e){const t=(await this.getStorage())[`${u}_${e}`];return t?{...t,badWords:new Map(Object.entries(t?.badWords)),emojis:new Map(Object.entries(t?.emojis)),msgCountBySender:new Map(Object.entries(t?.msgCountBySender).map((u=>[+u[0],u[1]]))),stickers:new Map(Object.entries(t?.stickers).map((u=>[+u[0],u[1]]))),ugcStickers:new Map(Object.entries(t?.ugcStickers).map((u=>[+u[0],u[1]]))),words:new Map(Object.entries(t?.words)),messagesByDay:new Map(Object.entries(t?.messagesByDay).map((u=>[+u[0],u[1]])))}:null}async setData(u,e,t){const F=await this.getStorage();F[`${u}_${e}`]={...t,badWords:Object.fromEntries(t.badWords.entries()),emojis:Object.fromEntries(t.emojis.entries()),msgCountBySender:Object.fromEntries(t.msgCountBySender.entries()),stickers:Object.fromEntries(t.stickers.entries()),ugcStickers:Object.fromEntries(t.ugcStickers.entries()),words:Object.fromEntries(t.words.entries()),messagesByDay:Object.fromEntries(t.messagesByDay.entries())},await this.saveStorage(F)}async deleteData(u,e){if(!u)throw new Error("Peer id is not defined");const t=await this.getStorage();delete t[`${u}_${e}`],await this.saveStorage(t)}}const a=new s},39099:(u,e,t)=>{t.d(e,{A:()=>a});var F=t(4255);const s=(u,e)=>u.length<=e?u:u.slice(0,e)+"...",a=async(u,e)=>{const t={peerName:""};if(F.A.isChatId(u)){const e=await vkApi.api("messages.getChat",{chat_id:F.A.convertChatPeerIdToChatId(u),v:"5.199"});t.peerName=s(e?.title||"",40),t.imageUrl=e?.photo_200}else if(F.A.isUserId(u)){const F=(await vkApi.api("users.get",{user_ids:[u],fields:["photo_200"],name_case:"ins"}))[0],a=F.deactivated?"DELETED":`${(F?.first_name||"")[0]}. ${s(F?.last_name||"",20)}`;if(t.imageUrl=F?.photo_200,t.peerName=a,e&&e>0){const u=await vkApi.api("groups.getById",{group_ids:[e]});t.groupName=s(u.groups[0].name||"",20)}}else if(F.A.isGroupId(u)){const e=await vkApi.api("groups.getById",{group_ids:[-u]});t.imageUrl=e.groups[0]?.photo_200,t.peerName=s(e?.groups[0]?.name||"",40)}return t}},28399:(u,e,t)=>{t.d(e,{A:()=>F});const F={ConvoHeader__action:"sTpn2Kx9DZpQUest",HeaderControls:"SklS4fDuKkWmJGkW",EncryptMessagesButton:"t4M8GCqiMne2mcYq"}}}]);