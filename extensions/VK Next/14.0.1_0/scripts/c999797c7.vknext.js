"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[6052],{86052:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.d(t,{default:()=>f});var a=n(74848),r=n(20556),o=n(51803),i=n(53952),l=n(48513),c=n(38789),d=n(45689),u=n(76382),h=n(39107),p=n(96540),g=n(33258),v=n(75623),m=n(52352),x=n(87675),_=n(83869),j=n(9079),C=n(48022),b=e([x]);x=(b.then?(await b)():b)[0];const w=({event:e})=>{const{title:t,subtitle:n,progress:s,progressTotal:u,progressText:v,icon:x,removeEvent:C,timeLeft:b,indicator:w,iconUrl:A}=(0,j.A)(e),f=(0,p.useCallback)((()=>"album"===x?(0,a.jsx)(r.B,{}):"hls_video"===x?(0,a.jsx)(o.k,{}):["playlist_music","owner_music","nft_owner_music"].includes(x)?(0,a.jsx)(i.K,{width:24,height:24}):"music"===x?(0,a.jsx)(l.V,{}):"chats"===x?(0,a.jsx)(c.j,{width:24,height:24}):"attach"===x?(0,a.jsx)(d.L,{width:24,height:24}):null),[x]),L=(0,p.useCallback)((()=>"string"==typeof A&&A.length>0?["owner_music","nft_owner_music"].includes(x)?(0,a.jsx)(g.A,{src:A,isNFT:"nft_owner_music"===x}):(0,a.jsx)(h._V3,{src:A,fallbackIcon:f()||void 0}):f()),[x,A]),y=void 0!==s&&void 0!==u,T=[n,w,b].filter(Boolean).join(" | ");let k=null;return v?.length?k=(0,a.jsx)("span",{children:v}):y&&(k=(0,a.jsxs)("span",{children:[s,"/",u]})),(0,a.jsx)(h.fhW,{extraSubtitle:(0,a.jsxs)("div",{className:_.A.DownloadEvent__subtitle,children:[T.length>0&&(0,a.jsx)("span",{children:T}),k]}),subtitle:y&&(0,a.jsx)(h.kej,{value:(0,m.A)(s,0,u),style:{marginTop:3}}),multiline:!0,borderRadiusMode:"inherit",mode:"removable",before:L(),onRemove:C,children:t})},A=()=>{const e=(0,x.A)(),t=(0,C.A)(),n=t.map((e=>(0,a.jsx)(w,{event:e},e.id)));return(0,a.jsxs)("div",{className:_.A.DownloadManagerPopup__eventsList,children:[(0,a.jsx)(h.Y9Y,{indicator:t.length,children:e.use("vkcom_active_downloads")}),(0,a.jsx)(h.V9m,{value:h.ODD.ANDROID,children:n})]})},f=()=>{const e=(0,C.A)(),[t,n]=(0,p.useState)(!1);return 0===e.length?null:(0,a.jsx)(v.A,{content:(0,a.jsx)(A,{}),contentWrapperClassName:_.A.DownloadManagerPopup__content,offsetByMainAxis:0,placement:"bottom-end",onShownChange:n,children:(0,a.jsx)("a",{className:(0,h.xWm)("TopNavBtn",t&&"active"),children:(0,a.jsx)("div",{className:"TopNavBtn__inner",children:(0,a.jsx)("div",{className:"TopNavBtn__icon",children:(0,a.jsx)(u.q,{})})})})})};s()}catch(e){s(e)}}))},9079:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(96540),a=n(4336);const r=e=>{const[t,n]=(0,s.useState)(e.title),[r,o]=(0,s.useState)(e.subtitle),[i,l]=(0,s.useState)(e.progress),[c,d]=(0,s.useState)(e.progressTotal),[u,h]=(0,s.useState)(e.icon),[p,g]=(0,s.useState)(e.timeLeft),[v,m]=(0,s.useState)(e.indicator),[x,_]=(0,s.useState)(e.progressText),[j,C]=(0,s.useState)(e.iconUrl);(0,s.useEffect)((()=>{const t=e.addChangePropertyListener("title",n),s=e.addChangePropertyListener("subtitle",o),a=e.addChangePropertyListener("progress",l),r=e.addChangePropertyListener("progressTotal",d),i=e.addChangePropertyListener("icon",h),c=e.addChangePropertyListener("timeLeft",g),u=e.addChangePropertyListener("indicator",m),p=e.addChangePropertyListener("progressText",_),v=e.addChangePropertyListener("iconUrl",C);return()=>{t(),s(),a(),r(),i(),c(),u(),p(),v()}}),[]);return{title:t,subtitle:r,progress:i,progressTotal:c,icon:u,timeLeft:p,indicator:v,progressText:x,iconUrl:j,removeEvent:(0,s.useCallback)((()=>{e.onCancel&&e.onCancel(),a.A.removeEvent(e.id)}),[e.id,e.onCancel])}}},48022:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(96540),a=n(4336);const r=()=>{const[e,t]=(0,s.useState)(a.A.getEvents());return(0,s.useEffect)((()=>{const e=a.A.addEventsChangeListener((e=>{t(e)}));return()=>{e()}}),[]),e}},87675:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.d(t,{A:()=>r});var a=n(93819);const e=await a.A,r=()=>e;s()}catch(e){s(e)}}),1)},83869:(e,t,n)=>{n.d(t,{A:()=>s});const s={DownloadManagerPopup__content:"fEpetom4YJORtzLZ",DownloadEvent__subtitle:"YTliDle0ICwaOnZZ",DownloadManagerPopup__eventsList:"sKn3A7O4a_W7Cv1a"}}}]);