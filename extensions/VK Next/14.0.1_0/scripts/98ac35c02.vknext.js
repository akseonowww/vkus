"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[33],{39307:(e,t,r)=>{r.d(t,{b:()=>o});var o=(0,r(33610).mT)("Icon24ExternalLinkOutline","external_link_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="external_link_outline_24"><g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M5.146 3.634c.762-.407 1.512-.534 3.082-.534H10.1a.9.9 0 1 1 0 1.8H8.228c-1.487 0-1.87.128-2.233.322-.336.18-.594.437-.773.773-.194.362-.322.746-.322 2.233v7.544c0 1.487.128 1.87.322 2.233.18.336.437.594.773.774.362.193.746.321 2.233.321h7.544c1.487 0 1.87-.128 2.233-.321.336-.18.594-.438.774-.774.193-.362.321-.746.321-2.233V13.9a.9.9 0 1 1 1.8 0v1.872c0 1.57-.127 2.32-.534 3.082a3.646 3.646 0 0 1-1.512 1.512c-.763.407-1.512.534-3.082.534H8.228c-1.57 0-2.32-.127-3.082-.534a3.647 3.647 0 0 1-1.512-1.512c-.407-.762-.534-1.512-.534-3.082V8.228c0-1.57.127-2.32.534-3.082a3.647 3.647 0 0 1 1.512-1.512z" /><path d="M14 4a.9.9 0 0 1 .9-.9H20a.9.9 0 0 1 .9.9v5.1a.9.9 0 1 1-1.8 0V6.173l-6.564 6.563a.9.9 0 1 1-1.272-1.272L17.827 4.9H14.9A.9.9 0 0 1 14 4z" /></g></symbol>',24,24,!1,void 0)},73615:(e,t,r)=>{r.d(t,{V:()=>o});var o=(0,r(93543).mT)("Icon20HelpOutline","help_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="help_outline_20"><g fill="currentColor"><path d="M10 6.25a1.25 1.25 0 0 0-1.21.937.75.75 0 0 1-1.453-.374 2.75 2.75 0 0 1 5.413.687c0 1.211-.654 1.84-1.144 2.298l-.009.008c-.478.446-.772.72-.855 1.3a.75.75 0 0 1-1.484-.212c.158-1.11.803-1.709 1.256-2.13l.068-.062c.447-.417.668-.663.668-1.202 0-.69-.56-1.25-1.25-1.25M10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2" /><path fill-rule="evenodd" d="M10 1.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17M3 10a7 7 0 1 0 14 0 7 7 0 0 0-14 0" clip-rule="evenodd" /></g></symbol>',20,20,!1,void 0)},52509:(e,t,r)=>{r.d(t,{z:()=>o});var o=(0,r(93543).mT)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="more_horizontal_24"><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2" /></symbol>',24,24,!1,void 0)},52319:(e,t,r)=>{r.d(t,{_:()=>o});var o=(0,r(93543).mT)("Icon28ErrorCircleOutline","error_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="error_circle_outline_28"><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2m0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4m0 13.6a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8m.074-9.6c.237 0 .386.037.517.107q.196.106.302.302c.07.13.107.28.107.517v6.148c0 .237-.037.386-.107.517a.73.73 0 0 1-.302.302c-.13.07-.28.107-.517.107h-.148c-.237 0-.386-.037-.517-.107a.73.73 0 0 1-.302-.302c-.07-.13-.107-.28-.107-.517V8.926c0-.237.037-.386.107-.517a.73.73 0 0 1 .302-.302c.13-.07.28-.107.517-.107z" /></symbol>',28,28,!1,void 0)},7139:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{A:()=>h});var n=r(74848),a=r(31958),i=r(62135),s=r(68566),c=r(86598),l=e([a,i,s]);[a,i,s]=l.then?(await l)():l;const d=({children:e})=>(0,n.jsx)("div",{className:c.A.Badges__wrapper,children:e});d.Beta=a.A,d.Prime=i.A,d.PrimeDeluxe=s.A;const h=d;o()}catch(e){o(e)}}))},31958:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{A:()=>l});var n=r(74848),a=r(8015),i=r(39107),s=r(86598),c=e([a]);a=(c.then?(await c)():c)[0];const l=({isSection:e,className:t,...r})=>{const o=(0,a.A)();return(0,n.jsx)(i.m_M,{className:s.A.Badges__tooltip,description:e?o.use("global_badges_beta_section_warning"):o.use("global_badges_beta_function_warning"),appearance:"black",usePortal:document.body,...r,children:(0,n.jsx)("span",{className:(0,i.xWm)(s.A.Badges__beta,t),children:"β"})})};o()}catch(e){o(e)}}))},62135:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{A:()=>d});var n=r(74848),a=r(8015),i=r(69075),s=r(39107),c=r(86598),l=e([a]);a=(l.then?(await l)():l)[0];const d=({isSection:e,className:t,...r})=>{const o=(0,a.A)();return(0,n.jsx)(s.m_M,{className:c.A.Badges__tooltip,description:e?o.use("global_badges_prime_section_warning"):o.use("global_badges_prime_function_warning"),appearance:"black",usePortal:document.body,...r,children:(0,n.jsx)("span",{className:(0,s.xWm)(c.A.vknPrime,t),children:(0,n.jsx)(i.B,{height:16,width:16})})})};o()}catch(e){o(e)}}))},68566:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{A:()=>d});var n=r(74848),a=r(8015),i=r(26334),s=r(39107),c=r(86598),l=e([a]);a=(l.then?(await l)():l)[0];const d=({isSection:e,className:t,...r})=>{const o=(0,a.A)();return(0,n.jsx)(s.m_M,{className:c.A.Badges__tooltip,description:e?o.use("global_badges_deluxe_section_warning"):o.use("global_badges_deluxe_function_warning"),appearance:"black",usePortal:document.body,...r,children:(0,n.jsx)("span",{className:(0,s.xWm)(c.A.vknPrime,t),children:(0,n.jsx)(i.W,{height:16,width:16})})})};o()}catch(e){o(e)}}))},7708:(e,t,r)=>{r.d(t,{A:()=>h});var o=r(74848),n=r(48081),a=r(39107),i=r(13742),s=r(68741),c=r(91691);const l="zRIhm_rzeRaOj2Bs",d="m8aAYX3glAEj5Q3G",h=({beforeClassname:e,backPage:t,hideButtonIsFirstPage:r,hideBackButtonInTablet:h,children:u,..._})=>{const w=(0,n.XC)(),p=(0,n.Gz)(),{width:g}=(0,i.A)();let m=r&&w&&(0,c.A)();return h&&(g||800)>768&&(m=!0),(0,o.jsx)(a.aOn,{before:!m&&(0,o.jsx)(a.Hy0,{onClick:async()=>{w?t?await p.replace(t):await p.push(s.JZ.root.main.home):await p.back()},className:(0,a.xWm)(l,e),hideLabelOnIOS:!0}),..._,children:(0,o.jsx)("div",{className:d,children:u})})}},40411:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{A:()=>p});var n=r(74848),a=r(56287),i=r(8015),s=r(90275),c=r(27514),l=r(99381),d=r(39307),h=r(73615),u=r(52509),_=r(39107),w=e([i]);i=(w.then?(await w)():w)[0];const p=({helpLink:e,actions:t})=>{const r=(0,i.A)(),o=(0,a.A)(),w=()=>{window.open(window.location.href),window.close()};return e||(0,c.A)(t)?(0,n.jsx)(s.Ku,{placement:"bottom-end",actions:(0,n.jsxs)(n.Fragment,{children:[(0,c.A)(t)&&(0,n.jsxs)(n.Fragment,{children:[t,(o||e)&&(0,n.jsx)(s.AS,{})]}),o&&(0,n.jsx)(s.vH,{onClick:w,leftIcon:(0,n.jsx)(d.b,{width:20,height:20}),children:r.use("settings_open_settings")}),e&&(0,n.jsx)(s.vH,{href:e,target:"_blank",leftIcon:(0,n.jsx)(h.V,{}),children:r.use("settings_menu_help_section")})]}),children:(0,n.jsx)(_.qAe,{onClick:l.A,children:(0,n.jsx)(u.z,{})})}):o?(0,n.jsx)(_.m_M,{description:r.use("settings_open_settings"),placement:"bottom",usePortal:!0,children:(0,n.jsx)(_.qAe,{onClick:w,children:(0,n.jsx)(d.b,{})})}):null};o()}catch(e){o(e)}}))},79369:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.d(t,{A:()=>h});var n=r(74848),a=r(61699),i=r(8015),s=r(57087),c=r(52319),l=r(39107),d=e([i]);i=(d.then?(await d)():d)[0];const h=()=>{const e=(0,i.A)(),{hideSnackbar:t}=(0,s.Qs)(),{createTab:r}=(0,a.A)();return(0,n.jsx)(l.qb_,{onClose:t,duration:7e3,before:(0,n.jsx)(c._,{fill:"var(--vkui--color_icon_negative)"}),action:e.use("global_open"),onActionClick:()=>{r({url:window.location.href,active:!0}),window.close()},children:e.use("settings_file_input_is_not_supported")})};o()}catch(e){o(e)}}))},56287:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(91691),n=r(15033);const a=()=>{const e=(0,n.l)();return((e.width||0)<=800||(e.height||0)<=600)&&!(0,o.A)()}},20465:(e,t,r)=>{r.d(t,{A:()=>d,f:()=>l});var o=r(74848),n=r(99381),a=r(96540),i=r(74225),s=r.n(i);const c=(0,a.createContext)({isLoading:!0,curCover:null,errorCode:null,forceUpdate:n.A}),l=()=>(0,a.useContext)(c),d=({children:e})=>{const[t,n]=(0,a.useState)(!0),[i,l]=(0,a.useState)(null),[d,h]=(0,a.useState)(null);s()((async e=>{if(!0!==t)return;const o=(await r.e(122).then(r.bind(r,70122))).default,a=await o.call("users.getCurrentGif");e()&&(a.docs&&l(a.docs),a.error_code&&h(a.error_code),n(!1))}),[t]);const u={isLoading:t,curCover:i,errorCode:d,forceUpdate:()=>{n(!0),l(null),h(null)}};return(0,o.jsx)(c.Provider,{value:u,children:e})}},70063:(e,t,r)=>{r.a(e,(async(e,o)=>{try{r.r(t),r.d(t,{default:()=>T});var n=r(74848),a=r(48081),i=r(39107),s=r(96540),c=r(74225),l=r.n(c),d=r(82295),h=r(7139),u=r(7708),_=r(40411),w=r(79369),p=r(58006),g=r(85252),m=r(8015),v=r(68741),x=r(57087),f=r(26914),b=r(6311),A=r(27250),j=r(23183),y=r(5467),k=r(84178),C=r(82050),P=r(17615),B=r(89827),H=r(20465),M=r(10046),S=e([h,_,w,m]);[h,_,w,m]=S.then?(await S)():S;const N=221719968,W=({cover:e})=>{const{viewer:t}=(0,x.ur)(),r=(0,p.A)();return(0,n.jsx)(b.A,{cover_url:e||void 0,photo_avg_color:t?.photo_avg_color,style:{maxHeight:r}})},z=()=>{const e=(0,m.A)(),{viewer:t}=(0,x.ur)(),{isLoading:o,errorCode:c,curCover:h,forceUpdate:u}=(0,H.f)(),_=(0,a.Gz)(),{showSnackbar:p,hideSnackbar:b}=(0,x.Qs)(),S=(0,s.useRef)(null),[z,T]=(0,s.useState)(null),[G]=(0,g.A)();l()((async e=>{if(o||c)return;if(!e())return;if(!h)return void T("");const{vkapiWrapper:t}=await Promise.resolve().then(r.bind(r,52370)),n=await t.docs.getById({docs:h}),a=n[0]?.url;e()&&T(a||"")}),[h,o,c]);const L=async(e,t=!0)=>{const{vkapiWrapper:o}=await Promise.resolve().then(r.bind(r,52370));if(t)try{await o.groups.join({group_id:N})}catch(e){console.error(e)}if(I){const[e,t]=(z||"").split("_");await o.docs.delete({doc_id:Number(t),owner_id:Number(e)})}const{upload_url:a}=await o.docs.getUploadServer(t?{group_id:N}:{}),s=new FormData;s.append("file",new File([e],"vknext_cover.gif",{type:"image/gif"}));const c=await fetch(a,{method:"POST",body:s}).then((e=>e.json())),l=await o.docs.save(c);if(t){try{await o.groups.leave({group_id:N})}catch(e){console.error(e)}if(l.error)return L(e,!1)}else{if(l.error)throw p((0,n.jsx)(i.qb_,{onClose:b,children:l.error.error_msg})),new Error(l.error.error_msg);const e=await fetch(`https://${d.A}/docs.php?act=edit_box`,{headers:{"content-type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"},body:new URLSearchParams({act:"edit_box",al:"1",did:l.doc.id,oid:l.doc.owner_id}),method:"POST",credentials:"include"}).then(B.A).then((e=>e.json())),t=e.payload[1][2].split("a_edit_doc")[1].match(/hash: *'([^']+)/)?.[1];await fetch(`https://${d.A}/docs.php?act=a_edit_doc`,{headers:{"content-type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"},body:new URLSearchParams({act:"a_edit_doc",al:"1",did:l.doc.id,hash:t,oid:l.doc.owner_id,tags:"",title:l.doc.title,type:"4"}),method:"POST",credentials:"include"})}return[l.doc.owner_id,l.doc.id].join("_")},I=(z?.length||0)>0;return(0,n.jsxs)(i.guY,{className:M.A.MainGroup,children:[(0,n.jsxs)(A.A,{noPadding:!0,mode:"group",className:M.A.MainGroup__profile,children:[(0,n.jsx)(W,{cover:z||void 0}),t?(0,n.jsx)(y.A,{user:t,headerButtons:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j.A,{mode:"primary",onClick:()=>{(0,f.A)()&&p((0,n.jsx)(w.A,{})),G?S.current?.click():_.push(v.JZ.root.main.prime)},children:[I?e.use("global_update"):e.use("global_install"),(0,n.jsx)(i.s6o,{children:(0,n.jsx)("input",{type:"file",accept:"image/gif",ref:S,onChange:async({target:t})=>{if(t.files){_.showPopout((0,n.jsx)(i.WHT,{}));try{const o=await(0,P.A)(t.files[0]),a=await L(o),s=(await r.e(122).then(r.bind(r,70122))).default,c=await s.call("users.setGif",{cover_gif:a});if(c.error){_.showPopout((0,n.jsx)(i.WHT,{state:"error"}));const t=()=>10===c.error.error_code?e.use("global_badges_prime_function_warning"):c.error.error_msg;p((0,n.jsx)(i.qb_,{onClose:b,children:t()}))}else u(),_.showPopout((0,n.jsx)(i.WHT,{state:"done"}))}catch(e){console.error(e),_.showPopout((0,n.jsx)(i.WHT,{state:"error"}))}await(0,C.A)(1e3),_.hidePopout()}}})})]}),(0,n.jsx)(j.A,{disabled:!I,mode:"secondary",onClick:async()=>{const e=(await r.e(122).then(r.bind(r,70122))).default;if(await e.call("users.setGif",{cover_gif:""}),I&&h){const{vkapiWrapper:e}=await Promise.resolve().then(r.bind(r,52370)),[t,o]=h.split("_");await e.docs.delete({doc_id:Number(o),owner_id:Number(t)})}u()},children:e.use("global_remove")})]})}):(0,n.jsx)(k.A,{}),(0,n.jsx)(i.KzX,{size:4})]}),(0,n.jsx)(A.A,{mode:"group",children:(0,n.jsxs)(i.iau,{children:[(0,n.jsx)(i.$ji,{weight:"2",children:e.use("settings_please_note")}),(0,n.jsx)(i.LEX,{className:M.A.ProfileCoverGifWarning__subtitle,children:e.use("settings_profile_cover_gif_warning")})]})})]})},T=()=>{const e=(0,m.A)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.A,{backPage:v.JZ.root.main_0_0.users,after:(0,n.jsx)(_.A,{}),children:[e.use("settings_menu_profile_cover_gif_title"),(0,n.jsx)(h.A.Prime,{})]}),(0,n.jsx)(H.A,{children:(0,n.jsx)(z,{})})]})};o()}catch(e){o(e)}}))},26914:(e,t,r)=>{r.d(t,{A:()=>o});const o=()=>!1},23183:(e,t,r)=>{r.d(t,{A:()=>i});var o=r(74848),n=r(39107);const a="BZ0GgWiVDrrUcNs5",i=({size:e="m",children:t,...r})=>(0,o.jsx)("div",{className:a,children:(0,o.jsx)(n.$nd,{size:e,...r,children:t})})},15033:(e,t,r)=>{r.d(t,{l:()=>n});var o=r(96540);const n=()=>{const[e,t]=(0,o.useState)({width:window.innerWidth,height:window.innerHeight,lastWidth:void 0,lastHeight:void 0}),r=()=>{t({lastWidth:e.width,lastHeight:e.height,width:window.innerWidth,height:window.innerHeight})};return(0,o.useEffect)((()=>{r()}),[]),(0,o.useEffect)((()=>(window.addEventListener("resize",r),()=>window.removeEventListener("resize",r))),[e]),e}},17615:(e,t,r)=>{r.d(t,{A:()=>o});const o=e=>new Promise((t=>{const r=new FileReader;r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e)}))},27514:(e,t,r)=>{r.d(t,{A:()=>o});const o=e=>void 0!==e&&!1!==e&&null!==e&&""!==e},89827:(e,t,r)=>{r.d(t,{A:()=>o});const o=async e=>new Response(new TextDecoder("windows-1251").decode(await e.arrayBuffer()))},86598:(e,t,r)=>{r.d(t,{A:()=>o});const o={vknPrime:"JVvmIPoC7I10XheA",Badges__beta:"ZPQT4b9d5yikcHQ_",Badges__tooltip:"llvJGi7mMeD_9Eod",Badges__wrapper:"gGl8DJ2tHp5UMWYV"}},10046:(e,t,r)=>{r.d(t,{A:()=>o});const o={MainGroup:"m2eWiTZd6RDRv0Vx",MainGroup__profile:"ZSXMzYDv1CZBkwto",ProfileCoverGifWarning__subtitle:"d_ka3Ja6bPijDDoq"}}}]);