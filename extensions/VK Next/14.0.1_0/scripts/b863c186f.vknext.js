"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1682,5544],{60309:(e,o,n)=>{n.d(o,{A:()=>l});var t=n(65578);const l=()=>(0,t.A)("ap")},28331:(e,o,n)=>{n.d(o,{A:()=>l});var t=n(65578);const l=()=>(0,t.A)("getAudioPlayer")},21987:(e,o,n)=>{n.r(o),n.d(o,{default:()=>N});var t=n(74848),l=n(43027),a=n(93543),i=(0,a.mT)("Icon24SkipBack","skip_back_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="skip_back_24"><path fill="currentColor" fill-rule="evenodd" d="M10 13.166V16.5a1 1 0 1 1-2 0v-9a1 1 0 0 1 2 0v3.335l8.149-4.67C18.97 5.696 20 6.285 20 7.228v9.546c0 .943-1.029 1.532-1.851 1.061z" /></symbol>',24,24,!1,void 0),r=(0,a.mT)("Icon24Pause","pause_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="pause_24"><path d="M6 6.6c0-.56 0-.84.109-1.054a1 1 0 0 1 .437-.437C6.76 5 7.04 5 7.6 5h.8c.56 0 .84 0 1.054.109a1 1 0 0 1 .437.437C10 5.76 10 6.04 10 6.6v10.8c0 .56 0 .84-.109 1.054a1 1 0 0 1-.437.437C9.24 19 8.96 19 8.4 19h-.8c-.56 0-.84 0-1.054-.109a1 1 0 0 1-.437-.437C6 18.24 6 17.96 6 17.4zm8 0c0-.56 0-.84.109-1.054a1 1 0 0 1 .437-.437C14.76 5 15.04 5 15.6 5h.8c.56 0 .84 0 1.054.109a1 1 0 0 1 .437.437C18 5.76 18 6.04 18 6.6v10.8c0 .56 0 .84-.109 1.054a1 1 0 0 1-.437.437C17.24 19 16.96 19 16.4 19h-.8c-.56 0-.84 0-1.054-.109a1 1 0 0 1-.437-.437C14 18.24 14 17.96 14 17.4z" /></symbol>',24,24,!1,void 0),s=(0,a.mT)("Icon24Play","play_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="play_24"><path d="M18.5 11.134a1 1 0 0 1 0 1.732l-9 5.196a1 1 0 0 1-1.5-.866V6.804a1 1 0 0 1 1.5-.866z" /></symbol>',24,24,!1,void 0),c=(0,a.mT)("Icon24SkipForward","skip_forward_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="skip_forward_24"><path fill="currentColor" fill-rule="evenodd" d="M14 10.835V7.5a1 1 0 1 1 2 0v9a1 1 0 0 1-2 0v-3.334l-8.149 4.668C5.03 18.305 4 17.716 4 16.774V7.226c0-.943 1.029-1.533 1.851-1.061z" /></symbol>',24,24,!1,void 0),u=n(96540),d=n(74225),p=n.n(d),w=n(28331);const v=()=>{const[e,o]=(0,u.useState)((()=>window.getAudioPlayer?window.getAudioPlayer():null));return p()((async n=>{if(e)return;const t=await(0,w.A)();n()&&o((()=>t()))}),[e]),e};var f=n(39107);const g="FXGonjJI2lnH8pZG",_=({className:e,...o})=>(0,t.jsx)(f.K0,{className:(0,f.xWm)(g,"top_audio_player_btn",e),hoverMode:"opacity",activeMode:"opacity",...o}),y="s5CER4gDY4E3DaXu",m=()=>{const e=v(),[o,n]=(0,u.useState)(!!e?.isPlaying&&e.isPlaying()),a=(0,u.useCallback)((o=>((0,l.A)(o),e.playPrevByButton())),[e]),d=(0,u.useCallback)((o=>((0,l.A)(o),e.isPlaying()?e.pauseByButton():e.playByButton())),[e]),p=(0,u.useCallback)((o=>((0,l.A)(o),e.playNextByButton())),[e]);return(0,u.useEffect)((()=>{if(!e)return;n(!!e?.isPlaying&&e.isPlaying());const o=e.on(null,"start",(()=>{n(!0)})),t=e.on(null,"pause",(()=>{n(!1)}));return()=>{o(),t()}}),[e]),(0,t.jsxs)("div",{className:y,children:[(0,t.jsx)(_,{"aria-label":window?.getLang?window.getLang("global_audio_prev"):void 0,onClick:a,accessKey:"j",children:(0,t.jsx)(i,{})}),(0,t.jsx)(_,{"aria-label":window?.getLang?window.getLang("global_audio_play"):void 0,onClick:d,accessKey:"k",children:o?(0,t.jsx)(r,{}):(0,t.jsx)(s,{})}),(0,t.jsx)(_,{"aria-label":window?.getLang?window.getLang("global_audio_next"):void 0,onClick:p,accessKey:"l",children:(0,t.jsx)(c,{})})]})};var x=(0,a.mT)("Icon24SongOutline","song_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="song_outline_24"><path fill="currentColor" fill-rule="evenodd" d="m16.302 4.06-2.4.661a1.1 1.1 0 0 0-.803 1.06v.845l2.407-.681a1.1 1.1 0 0 0 .796-1.058zM13.1 8.5l2.902-.824a2.9 2.9 0 0 0 2.099-2.79V3.006a1 1 0 0 0-1.267-.964l-3.414.946a2.9 2.9 0 0 0-2.118 2.794v8.908c-2.601.018-4.222.835-5.016 2.167-.864 1.45-.5 3.188.505 4.148a3.42 3.42 0 0 0 4.06.577c1.662-1.041 2.21-2.636 2.25-4.98zm-1.796 7.989c-2.331-.045-3.144.733-3.487 1.307-.402.674-.219 1.494.23 1.919.509.499 1.2.636 1.893.305.561-.328 1.364-.982 1.364-3.531" clip-rule="evenodd" /></symbol>',24,24,!1,void 0),h=n(11707);const C="qN0dqF_cVKaJD5Hp",A=()=>{const e=(0,h.A)();if(!e)return null;const o=e.coverUrl_l||e.coverUrl_p||e.coverUrl_s;return(0,t.jsx)(f.vOX,{size:36,className:C,src:o,fallbackIcon:(0,t.jsx)(x,{fill:"var(--vkui--color_icon_tertiary)"}),noBorder:!0},o)},b="hTUNQy8ZIPSYoSt6",k="ZgMzSVWgrclOMMjv",j="tkGkerAgxPbkX3tQ",T="nuzcbfLZQWBACF9z",O={"amp;":"&","lt;":"<","gt;":">","quot;":'"',"apos;":"'"},B=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,L=String.fromCharCode(65533),P=(e,o=O)=>"string"==typeof e&&e?e.replace(B,(e=>{if("#"===e[1]){if(e.length<=3)return e;const o="x"===e[2].toLowerCase()?16:10,t=parseInt(e.slice(16===o?3:2),o);return t>=1114111?L:t>65535?(n=t,String.fromCodePoint(n)):String.fromCharCode(t)}var n;return o[e.slice(1)]||e})):"",E={"amp;":"&","#38;":"&","lt;":"<","#60;":"<","gt;":">","#62;":">","apos;":"'","#39;":"'","quot;":'"',"#34;":'"',"copy;":"©"},S=e=>"decodeHTMLEntities"in window?window.decodeHTMLEntities(e,E):P(e,E),M=()=>{const e=(0,h.A)(),o=S(e?.title||""),n=S(e?.subTitle||""),l=S(e?.performer||"");return e?(0,t.jsxs)("div",{className:b,children:[(0,t.jsxs)("div",{className:k,title:`${e.title}`,children:[(0,t.jsx)(t.Fragment,{children:o}),(0,t.jsx)("span",{className:j,children:n})]}),l&&(0,t.jsx)("div",{className:T,title:l,children:l})]}):null};var z=n(71898);const N=()=>(0,t.jsxs)("div",{className:z.A.TopPlayer,children:[(0,t.jsx)(A,{}),(0,t.jsx)(m,{}),(0,t.jsx)(M,{})]})},11707:(e,o,n)=>{n.d(o,{A:()=>d,V:()=>c});var t=n(96540),l=n(74225),a=n.n(l),i=n(60309);const r=[];let s=null;const c=e=>{s=e;for(const o of r)o(e)},u=()=>s||(window.ap?.getCurrentAudio?window.ap.getCurrentAudio():null),d=()=>{const[e,o]=(0,t.useState)(u());a()((async n=>{e||window.ap||(await(0,i.A)(),n()&&o(u()))}),[]),(0,t.useEffect)((()=>{if(!window.ap)return;const e=window.ap.on(null,"curr",(()=>{o(window.ap.getCurrentAudio())}));return()=>{e()}}),[]),(0,t.useEffect)((()=>(r.push(o),()=>{const e=r.indexOf(o);-1!==e&&r.splice(e,1)})),[o]);return(0,t.useMemo)((()=>{if(!window.AudioUtils?.audioTupleToAudioObject)return null;return window.AudioUtils.audioTupleToAudioObject(e)}),[e])}},43027:(e,o,n)=>{n.d(o,{A:()=>t});const t=e=>{e.preventDefault?.(),e.stopPropagation?.(),e.stopImmediatePropagation?.()}},40961:(e,o,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(22551)},74225:(e,o,n)=>{var t=n(96540);function l(e,o,n){var l="function"==typeof o;t.useEffect((function(){var n,t=!0,a=e((function(){return t}));return Promise.resolve(a).then((function(e){n=e})),function(){t=!1,l&&o(n)}}),l?n:o)}e.exports=l,e.exports.useAsyncEffect=l}}]);