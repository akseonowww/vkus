"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[5949],{48797:(e,s,n)=>{n.d(s,{A:()=>l});var t=n(74848),i=n(39107),r=n(58006);const l=({children:e,isTabs:s=!1,style:n={},...l})=>{const o=(0,r.A)({isTabs:s});return n.maxHeight||(n.maxHeight=o),(0,t.jsx)(i.guY,{style:n,...l,children:e})}},8017:(e,s,n)=>{n.a(e,(async(e,t)=>{try{n.d(s,{A:()=>g});var i=n(74848),r=n(48081),l=n(39107),o=n(96540),a=n(74225),_=n.n(a),c=n(8015),u=n(68741),d=n(57087),h=e([c]);c=(h.then?(await h)():h)[0];const m=["all","friends_and_contacts","only_me","some_friends"],g=()=>{const e=(0,c.A)(),[s,t]=(0,o.useState)(!1),[a,h]=(0,o.useState)(null),[g,x]=(0,o.useState)(null),{showSnackbar:f,hideSnackbar:p}=(0,d.Qs)(),{viewer:v}=(0,d.ur)(),k=(0,r.Gz)(),{isAuthVKMe:j}=(0,d.De)();_()((async e=>{const{vkapiWrapper:s}=await Promise.resolve().then(n.bind(n,52370)),{response:i}=await s.execute({code:"var r = API.account.getPrivacySettings({privacy_keys: 'online', need_default: 0}).settings[0].value;\nif (r.owners.allowed) r.profiles = API.users.get({user_ids: r.owners.allowed.slice(0, 5)});\nif (r.owners.excluded) r.profiles = API.users.get({user_ids: r.owners.excluded.slice(0, 5)});\nreturn r;"});e()&&(t(i?.category||"some_friends"),i?.profiles&&h(i.profiles||[]),i?.owners&&x(i.owners))}),[]);const y=(0,o.useCallback)((s=>"some_friends"===s?e.use("settings_privacy_some_friends"):"only_me"===s?e.use("settings_privacy_only_me"):"friends_and_contacts"===s?e.use("settings_privacy_all_friends_and_contacts"):"all"===s?e.use("settings_privacy_all"):""),[e]),b=(0,o.useCallback)((()=>{if(a?.length){const n=a.slice(0,5).map((e=>`${e.first_name} ${e.last_name}`)),t=(g?.allowed?.length||g?.excluded?.length||a.length)-a.length;let i=y("some_friends");return s&&"some_friends"!==s?y(s)+e.use("settings_vkme_friends_excluded_note"):(n.length&&(i+=`: ${n.join(", ")}`),t&&(i+=e.use("settings_vkme_manager_cell_description",{friends:e.use("settings_friends_from",t)})),i)}return s?y(s):""}),[e,a,g,s])();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.iau,{children:(0,i.jsx)(l.lZ$,{subtitle:(0,i.jsxs)(l.EYj,{children:[e.use("settings_vkme_hide_online_method_caption"),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),e.use("settings_vkme_online_visibility_info_caption")]})})}),m.map((r=>(0,i.jsx)(l.sxL,{checked:r===s,onChange:()=>{"some_friends"!==r&&(async s=>{if(!v?.id)return;const r=(await Promise.resolve().then(n.bind(n,49876))).default,o=await r({userId:v.id,onError:()=>{f((0,i.jsx)(l.qb_,{duration:2e3,onClose:p,children:e.use("settings_vkme_set_online_error")}))}});if(!o)return void k.push(u.JZ.root.main_0_0.vkmessenger);const{category:a}=await o.account.setPrivacy({key:"online",value:s});f((0,i.jsx)(l.qb_,{duration:2e3,onClose:p,children:a===s?e.use("settings_vkme_set_online_success"):e.use("settings_vkme_set_online_error")})),t(a),h([])})(r)},onClick:()=>{"some_friends"===r&&(j?k.push(u.JZ.root.main_0_0.changeOnline,{mode:"allow"}):k.push(u.JZ.root.main_0_0.vkmessenger))},children:s?y(r):(0,i.jsx)(l.EAD,{width:120})},r))),(0,i.jsx)(l.T6P,{chevron:"auto",multiline:!0,subtitle:0===b.length?(0,i.jsx)(l.EAD,{width:112}):e.use("settings_menu_vkme_manager_description",{users:b}),onClick:()=>{j?k.push(u.JZ.root.main_0_0.changeOnline,{mode:"exclude"}):k.push(u.JZ.root.main_0_0.vkmessenger)},children:e.use("settings_menu_vkme_manager_title")})]})};t()}catch(e){t(e)}}))},24123:(e,s,n)=>{n.a(e,(async(e,t)=>{try{n.r(s),n.d(s,{default:()=>m});var i=n(74848),r=n(7708),l=n(48797),o=n(95671),a=n(8015),_=n(68741),c=n(39107),u=n(8017),d=e([o,a,u]);[o,a,u]=d.then?(await d)():d;const h=()=>{const e=(0,a.A)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.YJl,{children:[(0,i.jsx)(o.A,{option:"silentstories",title:e.use("settings_sett_silent_stories"),isPrime:!0}),(0,i.jsx)(o.A,{option:"silentnotify",title:e.use("settings_sett_silent_notify")}),(0,i.jsx)(o.A,{option:"noonline",title:e.use("settings_sett_partial_online"),subtitle:e.use("settings_sett_partial_online_desc")})]}),(0,i.jsx)(c.YJl,{header:(0,i.jsx)(c.Y9Y,{size:"s",children:e.use("settings_who_can_see_me_online")}),children:(0,i.jsx)(u.A,{})}),(0,i.jsx)(c.YJl,{separator:"hide",children:(0,i.jsx)(o.A,{option:"offlinebypass",title:e.use("settings_sett_offline_bypass"),subtitle:e.use("settings_sett_offline_bypass_desc"),isPrime:!0})})]})},m=()=>{const e=(0,a.A)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.A,{hideBackButtonInTablet:!0,backPage:_.JZ.root.main.home,children:e.use("settings_menu_activity_title")}),(0,i.jsx)(l.A,{children:(0,i.jsx)(h,{})})]})};t()}catch(e){t(e)}}))}}]);