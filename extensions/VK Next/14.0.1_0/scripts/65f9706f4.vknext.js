"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[3158],{11012:(s,e,t)=>{t.d(e,{o:()=>a});var a=(0,t(33610).mT)("Icon20UgcChatStickerCircleFillBlackAlpha","ugc_chat_sticker_circle_fill_black_alpha_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="ugc_chat_sticker_circle_fill_black_alpha_20"><rect width="20" height="20" fill="#000" fill-opacity=".35" rx="10" /><path fill="#fff" d="M9.47 4v2.286c0 2.612 2.105 4.728 4.702 4.728h1.986c-.832 1.797-3.026 3.515-5.655 3.515a6.746 6.746 0 0 1-1.703-.216 12.07 12.07 0 0 1-1.896 1.34c-.115.065-.25.136-.401.21l-.159.078a.604.604 0 0 1-.802-.275.584.584 0 0 1-.017-.477 8.66 8.66 0 0 0 .225-.61c.176-.55.311-1.117.404-1.699C5.128 11.93 4.5 10.644 4.5 9.23 4.5 6.599 6.632 4.416 9.47 4Zm1.4.318v1.968a3.31 3.31 0 0 0 3.302 3.32H16.5l-5.63-5.288Z" /></symbol>',20,20,!1,void 0)},3178:(s,e,t)=>{t.d(e,{o:()=>a});var a=(0,t(93543).mT)("Icon28SlidersOutline","sliders_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="sliders_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M18.5 15a3.5 3.5 0 0 1 3.355 2.5H24a1 1 0 0 1 0 2h-2.145a3.502 3.502 0 0 1-6.71 0H4a1 1 0 0 1 0-2h11.145A3.5 3.5 0 0 1 18.5 15m0 1.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5M10.5 6a3.5 3.5 0 0 1 3.355 2.5H24a1 1 0 0 1 0 2H13.855a3.502 3.502 0 0 1-6.71 0H4a1 1 0 0 1 0-2h3.145A3.5 3.5 0 0 1 10.5 6m0 1.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5" /></g></symbol>',28,28,!1,void 0)},84833:(s,e,t)=>{t.d(e,{A:()=>c});var a=t(74848),i=t(39107),n=t(96540),o=t(17100);const c=({children:s,noClose:e=!1,...t})=>{const{open:c,setOpen:r,onClose:l,onClosed:_,onOpen:u,onOpened:h}=(0,o.Fs)(),m=(0,n.useId)();return(0,a.jsx)(i.VWm,{nav:m,open:c,onClose:(s,t)=>{e||(r(!1),l?.(s,t))},onClosed:_,onOpen:u,onOpened:h,...t,children:(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)(i.qBl,{}),children:s})})}},9794:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>_});var i=t(387),n=t(26555),o=t(52352),c=t(93819);const s=await c.A;let r=0;class l{id;listeners=new Map;icon;title;subtitle;progressTotal;progress;onCancel;timeLeft;indicator;progressText;iconUrl;_bytesPerSecond;startTime;interval;constructor(s){const e=s;this.id=`${r++}_${(0,i.A)()}`;const t=this.notifyListeners.bind(this),a=["title","subtitle","progress","progressTotal","onCancel","icon","timeLeft","indicator","progressText","iconUrl"];for(const s of a)Object.defineProperty(this,s,{get:()=>e[s],set(a){e[s]=a,t(s,a)}});this._bytesPerSecond=0,this.startTime=Date.now()}notifyListeners=(s,e)=>{if(this.listeners.has(s))for(const t of this.listeners.get(s))t(e)};addChangePropertyListener=(s,e)=>{const t=this.listeners.get(s)||new Set;return t.add(e),this.listeners.set(s,t),()=>{t.delete(e),this.listeners.set(s,t)}};updateBytesPerSecond=s=>{this._bytesPerSecond+=s};updateTimeLeft=(e,t=this.progress,a=this.progressTotal,i=0)=>{if(void 0===t)return;i||(i=(0,o.A)(t,0,a||100)),this.updateBytesPerSecond(e);const n=Date.now()-this.startTime;let c=`0${s.use("vkcom_time_s")}`;i<100&&(c=new Date(100*n/i-n),c=[[c.getUTCFullYear()-1970,s.use("vkcom_time_y")],[c.getUTCMonth(),s.use("vkcom_time_mo")],[c.getUTCDate()-1,s.use("vkcom_time_d")],[c.getUTCHours(),s.use("vkcom_time_h")],[c.getUTCMinutes(),s.use("vkcom_time_m")],[c.getUTCSeconds(),s.use("vkcom_time_s")]].filter((s=>!!s[0])).slice(0,2).map((s=>s.join(""))).join(" ")||`0${s.use("vkcom_time_s")}`),this.timeLeft=c};startSpeed(){return this.stopSpeed(),this.indicator=(0,n.A)(0),this.interval=setInterval((()=>{this.indicator=(0,n.A)(this._bytesPerSecond)+"/s",this._bytesPerSecond=0}),1e3),()=>{this.stopSpeed()}}clearIndicator(){this.stopSpeed(),this.progress=this.progressTotal=this.timeLeft=this.indicator=void 0}stopSpeed(){this.interval&&(clearInterval(this.interval),delete this.interval)}}const _=l;a()}catch(s){a(s)}}),1)},4336:(s,e,t)=>{t.d(e,{A:()=>c});var a=t(74848),i=t(1145),n=t(3068),o=t(70459);const c=new class{wrapper=document.createElement("li");_unsafeUnmount=null;listeners=[];events=[];getEvents(){return[...this.events]}addEvent(s){return this.events.push(s),this.onEventsChange(),()=>{this.events=this.events.filter((e=>e!==s)),this.onEventsChange()}}removeEvent(s){this.events=this.events.filter((e=>e.id!==s)),this.onEventsChange()}addEventsChangeListener(s){return this.listeners.push(s),()=>{this.listeners=this.listeners.filter((e=>e!==s))}}onEventsChange(){for(const s of this.listeners)s(this.getEvents());this.events.length>=1?(0,i.A)((()=>this.renderManager())):this.removeManager()}async downloadFileFromLink(s,e){const a=(await t.e(7746).then(t.bind(t,37746))).default;await a(s,e)}async renderManager(){if(this.wrapper.parentElement)return;this.wrapper.className="HeaderNav__item";const s=document.querySelector(".HeaderNav,#top_nav");if(!s)return void console.error("HeaderNav not found");const e=s.querySelector(".HeaderNav__audio");e?(e.insertAdjacentElement("afterend",this.wrapper),this.wrapper.style.order=""):(s.appendChild(this.wrapper),this.wrapper.style.order="-1"),this._unsafeUnmount&&this._unsafeUnmount();const{default:i}=await Promise.all([t.e(2551),t.e(7983),t.e(2020),t.e(3543),t.e(9452),t.e(2477),t.e(6052)]).then(t.bind(t,86052)),{unmount:c}=await(0,n.A)({root:this.wrapper,content:(0,a.jsx)(i,{}),disableParentTransformForPositionFixedElements:!0,disablePortal:!0,wrapperProps:{className:o.A.DownloadManagerPopup}});this._unsafeUnmount=c}removeManager(){0===this.events.length&&(this.wrapper.parentElement&&this.wrapper.remove(),this._unsafeUnmount&&(this._unsafeUnmount(),this._unsafeUnmount=null))}}},88298:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{N:()=>n.A,j:()=>i.A});var i=t(9794),n=t(4336),o=s([i]);i=(o.then?(await o)():o)[0],a()}catch(s){a(s)}}))},53129:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>k});var i=t(4255),n=t(43375),o=t(45568),c=t(26555),r=t(93819),l=t(52595),_=s([l]);l=(_.then?(await _)():_)[0];const u=await r.A,h=(s,e)=>{let t;return t=i.A.isUserId(s.peerId)&&!s.groupId?u.use("vkcom_chat_stats_title_user",{title:s.name}):i.A.isUserId(s.peerId)?u.use("vkcom_chat_stats_title_gim_user",{user:s.name,group:s.groupName}):i.A.isChatId(s.peerId)?u.use("vkcom_chat_stats_title_chat",{title:s.name}):u.use("vkcom_chat_stats_title_group",{title:s.groupName}),[t,u.use("vkcom_chat_stats_all_msg",{messagesCount:e.incoming+e.outgoing}),u.use("vkcom_chat_stats_words",{wordsCount:e.wordsCount}),u.use("vkcom_chat_stats_first_msg",{first:(0,o.A)(e.firstMessageTime)}),u.use("vkcom_chat_stats_last_msg",{last:(0,o.A)(e.lastMessageTime)}),u.use("vkcom_chat_stats_incoming_msg",{incoming:`${e.incoming} (${(100*e.incoming/(e.incoming+e.outgoing)).toFixed(2)}%)`}),u.use("vkcom_chat_stats_outgoing_msg",{outgoing:`${e.outgoing} (${(100*e.outgoing/(e.incoming+e.outgoing)).toFixed(2)}%)`}),u.use("vkcom_chat_stats_forwarded",{forwarded:e.fwd}),u.use("vkcom_chat_stats_replies",{replies:e.replies}),u.use("vkcom_chat_stats_chars",{chars:e.chars}),u.use("vkcom_chat_stats_explicit",{explicit:e.badWordsCount}),i.A.isChatId(s.peerId)&&u.use("vkcom_chat_stats_sources",{sources:e.actions}),i.A.isChatId(s.peerId)&&u.use("vkcom_chat_stats_unique_senders",{allTimeMembers:e.msgCountBySender.size})].filter((s=>s)).join("\n")},m=s=>[u.use("vkcom_chat_stats_attachments",{attachments:s.attachments}),u.use("vkcom_chat_stats_photos",{photos:`${s.photos} (${s.photosGeo} ${u.use("vkcom_chat_stats_photos_geo")})`}),u.use("vkcom_chat_stats_docs",{docs:`${s.docs} (${(0,c.A)(s.docsSize)})`}),u.use("vkcom_chat_stats_audio",{audio:`${s.audio} (${(0,l.A)(s.audioDuration)})`}),u.use("vkcom_chat_stats_video",{video:`${s.video} (${(0,l.A)(s.videoDuration)})`}),u.use("vkcom_chat_stats_voices",{voices:`${s.voices} (${(0,l.A)(s.voicesDuration)})`}),u.use("vkcom_chat_stats_video_messages",{count:`${s.videoMessages} (${(0,l.A)(s.videoMessagesDuration)})`}),u.use("vkcom_chat_stats_calls",{calls:`${s.calls} (${(0,l.A)(s.callsDuration)})`}),u.use("vkcom_chat_stats_posts",{posts:s.posts}),u.use("vkcom_chat_stats_post_replies",{post_replies:s.postReplies}),u.use("vkcom_chat_stats_stories",{stories:s.stories}),u.use("vkcom_chat_stats_polls",{polls:s.polls}),u.use("vkcom_chat_stats_stickers",{stickersCount:`${s.stickersCount+s.ugcStickersCount} (${u.use("vkcom_chat_stats_ugc_stickers",{count:s.ugcStickersCount})})`}),u.use("vkcom_chat_stats_graffities",{graffities:s.graffities}),u.use("vkcom_chat_stats_audio_playlists",{count:s.audioPlaylists}),u.use("vkcom_chat_stats_gifts",{gifts:s.gifts}),u.use("vkcom_chat_stats_links",{links:s.links}),u.use("vkcom_chat_stats_mini_apps",{miniapps:s.miniApps}),u.use("vkcom_chat_stats_money_requests",{money:s.moneyRequests}),u.use("vkcom_chat_stats_money_transfers",{count:s.moneyTransfers}),u.use("vkcom_chat_stats_geo",{geo:s.geo}),u.use("vkcom_chat_stats_market",{count:s.markets}),u.use("vkcom_chat_stats_artists",{count:s.artists}),u.use("vkcom_chat_stats_app_actions",{count:s.appActions}),u.use("vkcom_chat_stats_articles",{count:s.articles}),u.use("vkcom_chat_stats_curators",{count:s.curators}),u.use("vkcom_chat_stats_donut_links",{count:s.donutLinks}),u.use("vkcom_chat_stats_events",{count:s.events}),u.use("vkcom_chat_stats_group_calls",{count:s.groupCalls}),u.use("vkcom_chat_stats_market_albums",{count:s.marketAlbums}),u.use("vkcom_chat_stats_narratives",{count:s.narratives}),u.use("vkcom_chat_stats_podcasts",{count:s.podcasts}),u.use("vkcom_chat_stats_shares",{count:s.shares}),u.use("vkcom_chat_stats_widgets",{count:s.widgets})].join("\n"),d=(s,e,t=!1)=>{const a=s?.members||new Map;return a.size?[`${u.use("vkcom_chat_stats_members")}`,...(0,n.A)(e?.msgCountBySender||new Map).slice(0,t?100:15).map(((s,n)=>{const o=a.get(s[0]);return`${n+1}. ${t?o.name:`[${i.A.isUserId(s[0])?`id${s[0]}`:"club"+-s[0]}|${o.name}]`}${o.isMember?"":" [x]"} - ${e?.msgCountBySender.get(s[0])}`}))].join("\n"):""},p=(s,e=!1)=>s?.messagesByDay.size?[`${u.use("vkcom_chat_stats_top_dates")}:`,...(0,n.A)(s?.messagesByDay||new Map).slice(0,e?100:15).map(((s,e)=>`${e+1}. ${(0,o.A)(s[0],!1)}: ${s[1]}`))].join("\n"):"",v=(s,e=!1)=>s?.words.size?[`${u.use("vkcom_chat_stats_top_words")}:`,...(0,n.A)(s?.words||new Map).slice(0,e?100:15).map(((s,e)=>`${e+1}. ${s[0]}: ${s[1]}`))].join("\n"):"",g=(s,e=!1)=>s?.emojis.size?[`${u.use("vkcom_chat_stats_top_emoji")}:`,...(0,n.A)(s?.emojis||new Map).slice(0,e?100:15).map((s=>`${s[0]}: ${s[1]}`))].join("\n"):"",k=(s,e,t=!1)=>[h(s,e),m(e),d(s,e,t),p(e,t),v(e,t),g(e,t),t?`via ${u.use("global_app_name")} (https://vknext.net)`:`via [club207165415|${u.use("global_app_name")}]`].filter((s=>!!s)).join("\n\n");a()}catch(s){a(s)}}),1)},52595:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>n});var i=t(93819);const s=await i.A,n=e=>{const t=new Date(1e3*e);return[[t.getUTCFullYear()-1970,s.use("vkcom_time_y")],[t.getUTCMonth(),s.use("vkcom_time_mo")],[t.getUTCDate()-1,s.use("vkcom_time_d")],[t.getUTCHours(),s.use("vkcom_time_h")],[t.getUTCMinutes(),s.use("vkcom_time_m")],[t.getUTCSeconds(),s.use("vkcom_time_s")]].filter((s=>!!s[0])).slice(0,2).map((s=>s.join(""))).join(" ")||`0${s.use("vkcom_time_s")}`};a()}catch(s){a(s)}}),1)},46949:(s,e,t)=>{t.d(e,{V:()=>h,b:()=>u});var a=t(74848),i=t(96540),n=t(74225),o=t.n(n),c=t(4255),r=t(97307);const l=async(s,e,t,a)=>{const i={};if(i.peerId=s,i.groupId=e,c.A.isChatId(s)){const e=await vkApi.api("messages.getChat",{chat_ids:c.A.convertChatPeerIdToChatId(s),v:"5.199"});i.photoUrl=e[0].photo_200,i.name=e[0].title,i.membersCount=e[0].members_count||0,i.members=new Map,a((s=>({...s,...i}))),e[0].users?.forEach((s=>i.members?.set(s,{isMember:!0})));const n=t.filter((s=>c.A.isUserId(s))),o=t.filter((s=>c.A.isGroupId(s))).map((s=>-s)),l=[],_=[];if(n.length)for(const s of(0,r.A)(n,1e3))l.push(vkApi.api("users.get",{user_ids:s}));if(o.length)for(const s of(0,r.A)(o,1e3))_.push(vkApi.api("groups.getById",{group_ids:s}));const u=(s,e)=>{const t=i.members?.get(s);t?i.members?.set(s,{...t,name:e}):i.members?.set(s,{isMember:!1,name:e})};if(l.length){(await Promise.all(l)).flatMap((s=>s)).forEach((s=>u(s.id,`${s.first_name} ${s.last_name}`)))}if(_.length){(await Promise.all(_)).flatMap((s=>s.groups)).forEach((s=>u(-(s?.id||1),s?.name||"Группа")))}a((s=>({...s,...i})))}else if(c.A.isUserId(s)){const t=await vkApi.api("users.get",{user_ids:[s],fields:["photo_200, is_nft"]});if(e){const s=await vkApi.api("groups.getById",{group_ids:[e]});i.groupName=s.groups[0].name}i.photoUrl=t[0].photo_200,i.name=`${t[0].first_name} ${t[0].last_name}`,i.hasNftAvatar=!!t[0].is_nft,a((s=>({...s,...i})))}else{const e=await vkApi.api("groups.getById",{group_ids:[-s]});i.photoUrl=e.groups[0].photo_200,i.groupName=e.groups[0].name,a((s=>({...s,...i})))}},_=(0,i.createContext)(null),u=()=>{const s=(0,i.useContext)(_);if(!s)throw new Error("useChatsStats must be used within a ChatStatsContext");return s},h=({children:s,value:e})=>{const[t,n]=(0,i.useState)(null);return o()((async()=>{const{peerId:s,groupId:t,stats:a}=e;s&&await l(s,t,Array.from(a.msgCountBySender.keys()),n)}),[e.peerId,e.groupId]),(0,a.jsx)(_.Provider,{value:{...e,peerInfo:t},children:s})}},95582:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>v});var i=t(74848),n=t(39107),o=t(96540),c=t(7778),r=t(12938),l=t(62206),_=t(49438),u=t(52495),h=t(37176),m=t(54968),d=s([c,r,l,_,u,h,m]);[c,r,l,_,u,h,m]=d.then?(await d)():d;const p=(0,o.lazy)((()=>Promise.all([t.e(3096),t.e(9014),t.e(6613),t.e(9304)]).then(t.bind(t,9304)))),v=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.A,{}),(0,i.jsx)(n.wvv,{}),(0,i.jsx)(h.A,{}),(0,i.jsx)(n.wvv,{}),(0,i.jsx)(c.A,{}),(0,i.jsx)(n.wvv,{}),(0,i.jsx)(_.A,{}),(0,i.jsx)(n.wvv,{}),(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(n.qBl,{}),children:(0,i.jsx)(p,{})}),(0,i.jsx)(n.wvv,{}),(0,i.jsx)(u.A,{}),(0,i.jsx)(n.wvv,{}),(0,i.jsx)(m.A,{}),(0,i.jsx)(n.wvv,{}),(0,i.jsx)(l.A,{})]});a()}catch(s){a(s)}}))},7778:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>h});var i=t(74848),n=t(26555),o=t(39107),c=t(52595),r=t(87675),l=t(46949),_=t(31955),u=s([c,r]);[c,r]=u.then?(await u)():u;const h=()=>{const s=(0,r.A)(),{stats:e}=(0,l.b)();if(e.attachments)return(0,i.jsxs)(o.iau,{children:[!!e.attachments&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_attachments",{})," "]}),e.attachments]}),!!e.photos&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_photos",{})," "]}),e.photos," ",`(${e.photosGeo} ${s.use("vkcom_chat_stats_photos_geo")})`]}),!!e.docs&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_docs",{})," "]}),e.docs," ",`(${(0,n.A)(e.docsSize)})`]}),!!e.audio&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_audio",{})," "]}),e.audio," ",`(${(0,c.A)(e.audioDuration)})`]}),!!e.video&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_video",{})," "]}),e.video," ",`(${(0,c.A)(e.videoDuration)})`]}),!!e.voices&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_voices",{})," "]}),e.voices," ",`(${(0,c.A)(e.voicesDuration)})`]}),!!e.videoMessages&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_video_messages",{})," "]}),e.videoMessages," ",`(${(0,c.A)(e.videoMessagesDuration)})`]}),!!e.calls&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_calls",{})," "]}),e.calls," ",`(${(0,c.A)(e.callsDuration)})`]}),!!e.posts&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_posts",{})," "]}),e.posts]}),!!e.postReplies&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_post_replies",{})," "]}),e.postReplies]}),!!e.stories&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_stories",{})," "]}),e.stories]}),!!e.polls&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_polls",{})," "]}),e.polls]}),(e.stickersCount||e.ugcStickersCount)&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_stickers",{})," "]}),e.stickersCount+e.ugcStickersCount," (",s.use("vkcom_chat_stats_ugc_stickers",{})," ",e.ugcStickersCount,")"]}),!!e.graffities&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_graffities",{})," "]}),e.graffities]}),!!e.audioPlaylists&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_audio_playlists",{})," "]}),e.audioPlaylists]}),!!e.gifts&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_gifts",{})," "]}),e.gifts]}),!!e.links&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_links",{})," "]}),e.links]}),!!e.miniApps&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_mini_apps",{})," "]}),e.miniApps]}),!!e.moneyRequests&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_money_requests",{})," "]}),e.moneyRequests]}),!!e.moneyTransfers&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_money_transfers",{})," "]}),e.moneyTransfers]}),!!e.geo&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_geo",{})," "]}),e.geo]}),!!e.markets&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_market",{})," "]}),e.markets]}),!!e.artists&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_artists",{})," "]}),e.artists]}),!!e.appActions&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_app_actions",{})," "]}),e.appActions]}),!!e.articles&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_articles",{})," "]}),e.articles]}),!!e.curators&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_curators",{})," "]}),e.curators]}),!!e.donutLinks&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_donut_links",{})," "]}),e.donutLinks]}),!!e.events&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_events",{})," "]}),e.events]}),!!e.groupCalls&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_group_calls",{})," "]}),e.groupCalls]}),!!e.marketAlbums&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_market_albums",{})," "]}),e.marketAlbums]}),!!e.narratives&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_narratives",{})," "]}),e.narratives]}),!!e.podcasts&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_podcasts",{})," "]}),e.podcasts]}),!!e.shares&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_shares",{})," "]}),e.shares]}),!!e.widgets&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_widgets",{})," "]}),e.widgets]}),!!e.unknownAttachments&&(0,i.jsxs)(_.A,{children:[(0,i.jsxs)("b",{children:[s.use("vkcom_chat_stats_unknown",{})," "]}),e.unknownAttachments]})]})};a()}catch(s){a(s)}}))},12938:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>u});var i=t(74848),n=t(33258),o=t(45568),c=t(39107),r=t(87675),l=t(46949),_=s([r]);r=(_.then?(await _)():_)[0];const u=()=>{const s=(0,r.A)(),{peerInfo:e,stats:t}=(0,l.b)();return(0,i.jsx)(c.iau,{children:(0,i.jsx)(c.T6P,{multiline:!0,before:(0,i.jsx)(n.A,{src:e?.photoUrl,isNFT:e?.hasNftAvatar}),subtitle:s.use("vkcom_chat_stats_collected_date",{dateString:(0,o.A)(1e3*t.collectedTimestamp)}),children:e?e?.groupName||e?.name:(0,i.jsx)(c.EAD,{width:200})})})};a()}catch(s){a(s)}}))},92408:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>k});var i=t(74848),n=t(90275),o=t(43027),c=t(99381),r=t(3178),l=t(39107),_=t(17100),u=t(67078),h=t(88298),m=t(53129),d=t(87675),p=t(10634),v=t(46949),g=s([h,m,d]);[h,m,d]=g.then?(await g)():g;const k=()=>{const s=(0,d.A)(),{closeModal:e}=(0,_.Hb)(),{stats:t,peerInfo:a,showCleanCache:g}=(0,v.b)();return(0,i.jsx)(n.Ku,{trigger:"hover",placement:"bottom-end",hideOnClick:!0,actions:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.vH,{disabled:g,onClick:async()=>{e(),await p.default.deleteData(a?.peerId,a?.groupId),await(0,u.A)({type:"done",text:s.use("vkcom_chat_stats_deleted_from_cache")})},children:s.use("vkcom_chat_stats_delete_from_cache")}),!!a&&(0,i.jsx)(n.vH,{onClick:async()=>{e(),await vkApi.api("messages.send",{random_id:0,peer_id:a?.peerId,group_id:a?.groupId,disable_mentions:1,message:(0,m.A)(a,t)})},children:s.use("vkcom_chat_stats_send_to_chat")}),!!a&&(0,i.jsx)(n.vH,{onClick:async s=>{(0,o.A)(s);const e=new Blob([(0,m.A)(a,t,!0)]),i=URL.createObjectURL(e);await h.N.downloadFileFromLink(i,`${a.name}.txt`),URL.revokeObjectURL(i)},children:s.use("vkcom_chat_stats_save_to_file")})]}),children:(0,i.jsx)(l.qAe,{onClick:c.A,hasActive:!1,"aria-label":s.use("global_close"),children:(0,i.jsx)(r.o,{})})})};a()}catch(s){a(s)}}))},31955:(s,e,t)=>{t.d(e,{A:()=>o});var a=t(74848),i=t(39107),n=t(48591);const o=({className:s,weight:e="3",...t})=>(0,a.jsx)(i.EYj,{Component:"div",weight:e,className:(0,i.xWm)(n.A.chatStatsText,s),useAccentWeight:!0,...t})},24330:(s,e,t)=>{t.d(e,{A:()=>c});var a=t(74848),i=t(48591),n=t(39107);const o=({value:s})=>(0,a.jsx)("div",{className:i.A.Counter,children:s}),c=({text:s,value:e,dangerouslySetInnerHTML:t})=>(0,a.jsxs)("div",{className:i.A.CounterCell,children:[t&&(0,a.jsx)(n.EYj,{className:i.A.CounterCell__Text,children:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:s.replaceAll(window.Emoji.emojiRegex,window.Emoji.emojiReplace)}})}),!t&&(0,a.jsx)(n.EYj,{className:i.A.CounterCell__Text,children:s}),(0,a.jsx)(o,{value:e})]})},62206:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>d});var i=t(74848),n=t(43375),o=t(39107),c=t(96540),r=t(87675),l=t(48591),_=t(46949),u=t(24330),h=t(30311),m=s([r]);r=(m.then?(await m)():m)[0];const d=()=>{const s=(0,r.A)(),{stats:e}=(0,_.b)(),[t,a]=(0,c.useState)(h.u7);if(e?.emojis?.size)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Y9Y,{size:"m",after:e.emojis.size>h.u7&&(0,i.jsx)(o.N_E,{onClick:()=>a((s=>(0,h.Ay)(s,h.u7))),children:t===h.u7?s.use("vkcom_chat_stats_show_more"):s.use("vkcom_chat_stats_show_multiple")}),children:s.use("vkcom_chat_stats_top_emoji")}),(0,i.jsx)(o.iau,{className:(0,o.xWm)(l.A.chatStatsDiv,l.A.CounterCellContainer),children:(0,n.A)(e?.emojis||new Map).slice(0,t).map((s=>(0,i.jsx)(u.A,{text:s[0],value:s[1],dangerouslySetInnerHTML:!0},s[0])))})]})};a()}catch(s){a(s)}}))},49438:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>g});var i,n=t(74848),o=t(13780),c=t(43375),r=t(39107),l=t(96540),_=t(87675),u=t(46949),h=t(48591),m=t(31955),d=t(30311),p=s([_]);_=(p.then?(await p)():p)[0],(v=i||(i={}))[v.All=0]="All",v[v.OnlyMembers=1]="OnlyMembers",v[v.OnlyLeft=2]="OnlyLeft";const g=()=>{const s=(0,_.A)(),[e,t]=(0,l.useState)(15),[a,p]=(0,l.useState)(i.All),{peerInfo:v,stats:g}=(0,u.b)(),k=v?.members||new Map,A=(0,l.useMemo)((()=>(0,c.A)(g?.msgCountBySender||new Map)),[]);if(!k.size)return;const x=A.filter((s=>a===i.All||a===i.OnlyMembers&&k.get(s[0])?.isMember||a===i.OnlyLeft&&!k.get(s[0])?.isMember)).slice(0,e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Y9Y,{size:"m",after:A.length>d.Kl&&(0,n.jsx)(r.N_E,{onClick:()=>t((s=>(0,d.Ay)(s))),children:e===d.Kl?s.use("vkcom_chat_stats_show_more"):s.use("vkcom_chat_stats_show_multiple")}),children:s.use("vkcom_chat_stats_members_header")}),(0,n.jsx)(r.tUM,{mode:"accent",children:(0,n.jsxs)(r.ox2,{children:[(0,n.jsx)(r.ORv,{onClick:()=>p(i.All),selected:a===i.All,children:s.use("vkcom_chat_stats_all_members")}),(0,n.jsx)(r.ORv,{onClick:()=>p(i.OnlyMembers),selected:a===i.OnlyMembers,children:s.use("vkcom_chat_stats_in_members")}),(0,n.jsx)(r.ORv,{onClick:()=>p(i.OnlyLeft),selected:a===i.OnlyLeft,children:s.use("vkcom_chat_stats_left_members")})]})}),(0,n.jsx)(r.iau,{className:h.A.chatStatsDiv,children:x.length?x.map(((s,e)=>(0,n.jsxs)(m.A,{className:(0,r.xWm)(!k.get(s[0])?.isMember&&h.A.chatStatsTextTransparent),children:[(0,n.jsxs)("b",{children:[e+1,"."," ",(0,n.jsx)(r.N_E,{href:(0,o.A)(s[0]),target:"_blank",children:k.get(s[0])?.name}),":"," "]}),g?.msgCountBySender.get(s[0])]},s[0]))):(0,n.jsx)(r.OrA,{children:s.use("global_not_found")})})]})};a()}catch(s){a(s)}var v}))},52495:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>v});var i=t(74848),n=t(11012),o=t(96540),c=t(74225),r=t.n(c),l=t(39107),_=t(48591),u=t(87675),h=t(46949),m=s([u]);u=(m.then?(await m)():m)[0];const d=window.location?.host||"vk.com",p=async(s,e,t,a)=>{const i=[];if(t.size)for(const[s,e]of t)i.push({id:s,isUGC:!1,count:e,imageUrl:`https://${d}/sticker/1-${s}-128b`});if(a.size){const t=await vkApi.api("stickers.getUGCPacks",{owner_id:s,pack_ids:e});for(const[s,e]of a)i.push({id:s,isUGC:!0,count:e,imageUrl:t.packs[0].stickers.find((e=>e.id===s))?.images[1].url||""})}return{stickers:i}},v=()=>{const s=(0,u.A)(),{stats:e,peerId:t}=(0,h.b)(),[a,c]=(0,o.useState)(null);if(e?.stickers?.size||e?.ugcStickers?.size)return r()((async()=>{const s=await p(t,e?.ugcPackId,e?.stickers,e?.ugcStickers);c(s)}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Y9Y,{size:"m",children:s.use("vkcom_chat_stats_top_stickers")}),(0,i.jsx)(l.iau,{className:_.A.chatStatsDiv,children:(0,i.jsx)(l.ox2,{showArrows:!0,getScrollToLeft:s=>s-280,getScrollToRight:s=>s+280,children:(0,i.jsxs)("div",{className:_.A.stickersGalleryWrapper,children:[!a&&[...Array(15).keys()].map(((s,e)=>(0,i.jsx)(l.Fw6,{size:"l",title:(0,i.jsx)("div",{className:_.A.stickersTitle,children:(0,i.jsx)(l.EAD,{width:"30px"})}),children:(0,i.jsx)(l.EAD,{width:"128px",height:"128px"})},e))),!!a&&a.stickers.sort(((s,e)=>e.count-s.count)).slice(0,30).map((s=>{const e=s?.isUGC;return(0,i.jsx)(l.Fw6,{size:"l",onClick:e?void 0:async()=>{if(e)return;const t=await vkApi.api("store.getStockItemByStickerId",{sticker_id:s.id});window.Emoji.previewSticker(t.product.id)},disabled:e,title:(0,i.jsx)("div",{className:_.A.stickersTitle,children:s.count}),children:(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{alt:"sticker",src:s.imageUrl,width:128,height:128}),s.isUGC&&(0,i.jsx)(n.o,{className:_.A.ugcBadge})]})},s.id)}))]})})})]})};a()}catch(s){a(s)}}))},37176:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>m});var i=t(74848),n=t(4255),o=t(45568),c=t(39107),r=t(87675),l=t(46949),_=t(48591),u=t(70828),h=s([r]);r=(h.then?(await h)():h)[0];const m=()=>{const s=(0,r.A)(),{peerId:e,stats:t}=(0,l.b)(),a=n.A.isChatId(e);return(0,i.jsxs)(c.iau,{className:_.A.SummarySection,children:[(0,i.jsx)(u.A,{mainValue:t.incoming+t.outgoing,caption:s.use("vkcom_chat_stats_all_msg",{})}),(0,i.jsx)(u.A,{mainValue:t.wordsCount,caption:s.use("vkcom_chat_stats_words",{})}),(0,i.jsx)(u.A,{tooltipText:(0,o.A)(t.firstMessageTime),mainValue:(0,o.A)(t.firstMessageTime,!1),caption:s.use("vkcom_chat_stats_first_msg",{})}),(0,i.jsx)(u.A,{tooltipText:(0,o.A)(t.lastMessageTime),mainValue:(0,o.A)(t.lastMessageTime,!1),caption:s.use("vkcom_chat_stats_last_msg",{})}),(0,i.jsx)(u.A,{mainValue:t.incoming,percentValue:100*t.incoming/(t.incoming+t.outgoing),caption:s.use("vkcom_chat_stats_incoming_msg",{})}),(0,i.jsx)(u.A,{mainValue:t.outgoing,percentValue:100*t.outgoing/(t.incoming+t.outgoing),caption:s.use("vkcom_chat_stats_outgoing_msg",{})}),(0,i.jsx)(u.A,{mainValue:t.fwd,caption:s.use("vkcom_chat_stats_forwarded",{})}),(0,i.jsx)(u.A,{mainValue:t.replies,caption:s.use("vkcom_chat_stats_replies",{})}),(0,i.jsx)(u.A,{mainValue:t.chars,caption:s.use("vkcom_chat_stats_chars",{})}),(0,i.jsx)(u.A,{mainValue:t.badWordsCount,isApproximated:!0,caption:s.use("vkcom_chat_stats_explicit",{})}),a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{mainValue:t.actions,caption:s.use("vkcom_chat_stats_sources",{})}),(0,i.jsx)(u.A,{mainValue:t.msgCountBySender.size,caption:s.use("vkcom_chat_stats_unique_senders",{})})]})]})};a()}catch(s){a(s)}}))},70828:(s,e,t)=>{t.d(e,{A:()=>r});var a=t(74848),i=t(48591),n=t(39107),o=t(3772);function c({value:s,isApproximated:e,getRootRef:t}){return(0,a.jsxs)("div",{ref:t,className:i.A.SummaryText__mainValue,children:[e&&"~","number"==typeof s?(0,o.A)(s):s]})}const r=({mainValue:s,percentValue:e,caption:t,isApproximated:o,tooltipText:r})=>{const l=(0,a.jsx)(c,{value:s,isApproximated:!!o});return(0,a.jsxs)("div",{className:i.A.SummaryText,children:[r?(0,a.jsx)(n.m_M,{description:r,appearance:"inversion",placement:"top-start",children:l}):l,!!e&&(0,a.jsxs)("div",{className:i.A.SummaryText__percentValue,children:[e.toFixed(2),"%"]}),(0,a.jsx)("div",{className:(0,n.xWm)(i.A.SummaryText__caption),children:t.trim().replace(/:$/,"")})]})}},54968:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{A:()=>d});var i=t(74848),n=t(43375),o=t(39107),c=t(96540),r=t(87675),l=t(48591),_=t(46949),u=t(24330),h=t(30311),m=s([r]);r=(m.then?(await m)():m)[0];const d=()=>{const s=(0,r.A)(),{stats:e}=(0,_.b)(),[t,a]=(0,c.useState)(h.u7);if(e?.words?.size)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Y9Y,{size:"m",after:e.words.size>h.u7&&(0,i.jsx)(o.N_E,{onClick:()=>a((s=>(0,h.Ay)(s,h.u7))),children:t===h.u7?s.use("vkcom_chat_stats_show_more"):s.use("vkcom_chat_stats_show_multiple")}),children:s.use("vkcom_chat_stats_top_words")}),(0,i.jsx)(o.iau,{className:(0,o.xWm)(l.A.chatStatsDiv,l.A.CounterCellContainer),children:(0,n.A)(e?.words||new Map).slice(0,t).map((s=>(0,i.jsx)(u.A,{text:s[0],value:s[1]},s[0])))})]})};a()}catch(s){a(s)}}))},30311:(s,e,t)=>{t.d(e,{Ay:()=>n,Kl:()=>a,u7:()=>i});const a=15,i=30,n=(s,e=a,t=100)=>s===t?e:t},63158:(s,e,t)=>{t.a(s,(async(s,a)=>{try{t.d(e,{default:()=>h});var i=t(74848),n=t(39107),o=t(87675),c=t(46949),r=t(84833),l=t(92408),_=t(95582),u=s([o,l,_]);[o,l,_]=u.then?(await u)():u;const h=({value:s})=>{const e=(0,o.A)();return(0,i.jsx)(c.V,{value:s,children:(0,i.jsx)(r.A,{size:700,height:"90%",header:(0,i.jsx)(n.aO9,{after:(0,i.jsx)(l.A,{}),children:e.use("vkcom_menu_chat_stats_title")}),children:(0,i.jsx)(_.A,{})})})};a()}catch(s){a(s)}}))},13780:(s,e,t)=>{t.d(e,{A:()=>i});var a=t(4255);const i=s=>`/${a.A.isUserId(+s)?"id":"club"}${Math.abs(+s)}`},3772:(s,e,t)=>{function a(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}t.d(e,{A:()=>a})},97307:(s,e,t)=>{function a(s,e){const t=[];for(let a=0;a<s.length;a+=e){const i=s.slice(a,a+e);t.push(i)}return t}t.d(e,{A:()=>a})},43375:(s,e,t)=>{function a(s){return Array.from(s.entries()).sort(((s,e)=>e[1]-s[1]))}t.d(e,{A:()=>a})},45568:(s,e,t)=>{t.d(e,{A:()=>a});const a=(s,e=!0,t=!1)=>{const a=new Date(s),i=s=>String(s).padStart(2,"0"),n=i(a.getDate()),o=i(a.getMonth()+1);let c=i(a.getFullYear());const r=i(a.getHours()),l=i(a.getMinutes()),_=i(a.getSeconds());return t&&(c=c.substring(2)),e?`${n}.${o}.${c}, ${r}:${l}:${_}`:`${n}.${o}.${c}`}},52352:(s,e,t)=>{t.d(e,{A:()=>a});const a=(s,e,t)=>s<e?0:s>t?100:(s-e)/(t-e)*100},70459:(s,e,t)=>{t.d(e,{A:()=>a});const a={AudioPageMainTabBtn:"XYzoAKWs2KhH02Ye",AudioArtistHeaderActions:"v8VBorduCtZgTyyi",VideoPlayerDownloadIcon:"eaSw45y_1KLlo4Gw",SecondaryAttachment__afterItem:"RZ6NWD1WvjAOxG2Y",DownloadManagerPopup:"o9vy1XhnZrkvykUb",VideoPlayerHlsWarning__tooltip:"P9MhdlrtilEQt7Am",VideoPlayerHlsWarning__text:"Xq2PVks6OK6Z74Al",AudioPlaylistSnippet__actions:"FawmW4_Zd1R1BI1E",AudioPlaylistSnippet__actionButton:"ZPr5mXzL52VUPaRe",ActionButton__icon:"_5bFyslOmNjqqP7y",ActionButton__text:"o7YAH98fI9KVToa5",AudioPlayerUserControlsContainer__userButton:"e47qq1XqMPp6oTp7",AudioPlayerPlaybackButton:"wqb5e3cgYZFgHCc1",AudioRowReact__button:"q7d6KTdMjs6HYpKm"}},48591:(s,e,t)=>{t.d(e,{A:()=>a});const a={ugcBadge:"rpyWwH3G0y7EmLsp",chatStatsText:"gvQW7noeUsjFFwFg",chatStatsDiv:"ouwC5VBkFVn7R06c",chatStatsTextTransparent:"adNHcBNszVsgAXBg",stickersGalleryWrapper:"ebGNFjJKzTu5yedT",stickersTitle:"OAW00k6cK7q3TUKn",SummaryText:"QhpKB7bDjlgyLAnL",SummaryText__mainValue:"Z5eCfrt3fMtvmx74",SummaryText__caption:"aqRR0KG9vKcjTZGD",SummaryText__percentValue:"gStKKyLFHr8XehTX",SummarySection:"CgaZyHwJVVfEs31J",DatesChart:"uL8dseaAIp81nF4C",ChatStatsModal:"NHxEYCLXcdYYHHec",CounterCellContainer:"ryL2sbvV29nXJkeD",CounterCell:"g_erOqBX3jafAVEJ",CounterCell__Text:"_PuDc5QZhHypCtgq",Counter:"D_LKmKjKecgO7k8V"}}}]);