"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[9082,9441],{45117:(e,n,t)=>{t.d(n,{p:()=>i});var i=(0,t(93543).mT)("Icon12Circle","circle_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12" id="circle_12"><path fill="currentColor" d="M10 6a4 4 0 1 1-8 0 4 4 0 0 1 8 0" /></symbol>',12,12,!1,void 0)},31599:(e,n,t)=>{t.d(n,{Y:()=>i});var i=(0,t(93543).mT)("Icon12OnlineMobile","online_mobile_12","0 0 8 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 12" id="online_mobile_12"><path fill="currentColor" d="M5.99 0C7.1 0 8 .9 8 2.01v7.98C8 11.1 7.1 12 5.99 12H2.01C.9 12 0 11.1 0 9.99V2.01C0 .9.9 0 2.01 0zm.008 3H2.003a.5.5 0 0 0-.503.502v4.996c0 .277.225.502.503.502h3.995a.5.5 0 0 0 .502-.502V3.503A.5.5 0 0 0 5.997 3" /></symbol>',8,12,!1,void 0)},46108:(e,n,t)=>{t.a(e,(async(e,i)=>{try{t.r(n),t.d(n,{default:()=>v});var s=t(74848),o=t(39107),r=t(96540),l=t(11092),a=t(74225),c=t.n(a),_=t(33258),d=t(75623),u=t(43027),f=t(87675),w=t(89441),p=t(97339),h=e([f]);f=(h.then?(await h)():h)[0];const m=({users:e,onHide:n})=>{const t=(0,r.useRef)(window.innerHeight/2.5);return(0,s.jsx)(l.B8,{height:t.current,rowCount:e.length,rowHeight:44,rowRenderer:({key:t,style:i,index:r})=>{const{id:l,first_name:a,last_name:c,photo_50:d,online_info:f,is_nft:p}=e[r];return(0,s.jsxs)(o.T6P,{className:(0,o.xWm)(w.default.OnlineUsersList__cell,"vknextInternalColorLink"),borderRadiusMode:"inherit",before:(0,s.jsx)(_.A,{size:28,src:d,badge:f&&f.is_mobile?"online_mobile":"online",isNFT:p}),href:`/id${l}`,onClick:e=>{(0,u.A)(e),window.vkmeIntegration?(n(),window.nav.go({...window.nav.objLoc,rp:`peer${l}`})):window.open(`/id${l}`,"_blank")},target:"_blank",style:i,children:[a," ",c]},t)},width:320})},v=({peerId:e})=>{const[n,t]=(0,r.useState)(null),[i,l]=(0,r.useState)(!1),a=(0,f.A)();c()((async n=>{if(!e)return;const i=async()=>{if(!n())return;t(null);const i=await(0,p.A)(e);n()&&t(i)};await i();const s=setTimeout((async()=>{await i()}),3e5);return()=>{clearTimeout(s)}}),[e]);const _=null===n,u=n?.length||0;return(0,s.jsx)(d.A,{trigger:"hover",placement:"bottom",content:_?void 0:(0,s.jsx)(m,{users:n,onHide:()=>l(!1)}),className:w.default.OnlineUsersList__popover,shown:i,onShownChange:l,children:(0,s.jsxs)("span",{className:(0,o.xWm)(w.default.OnlineUsersList__online,_&&w.default.OnlineUsersList__skeleton,0===u&&w.default.OnlineUsersList__null),children:["(",u," ",a.use("vkcom_online"),")"]})})};i()}catch(e){i(e)}}))},97339:(e,n,t)=>{t.d(n,{A:()=>r});var i=t(4255),s=t(43883),o=t(52968);const r=async e=>{const n=await(0,s.A)(),{profiles:t,items:r}=await n.api("messages.getConversationMembers",{peer_id:e,group_id:Math.abs((0,o.A)()),offset:0,extended:!0,fields:"friend_status,online_info,photo_50,is_nft"}),l=Object.fromEntries((t||[]).map((e=>[e.id,e]))),a=[];for(const{member_id:e}of r||[]){if(!e)continue;if(!i.A.isUserId(e))continue;const n=e===window.vk.id,t=l[e];t.online_info?.is_online&&!n&&a.push(t)}return a.sort(((e,n)=>e.friend_status>n.friend_status?-1:e.friend_status<n.friend_status?1:0))}},87675:(e,n,t)=>{t.a(e,(async(e,i)=>{try{t.d(n,{A:()=>o});var s=t(93819);const e=await s.A,o=()=>e;i()}catch(e){i(e)}}),1)},52968:(e,n,t)=>{t.d(n,{A:()=>o});var i=t(4255),s=t(1003);const o=()=>{if(window.cur.gid&&i.A.isGroupId(window.cur.gid))return window.cur.gid;const e=(0,s.A)();return i.A.isGroupId(e)?e:0}},43027:(e,n,t)=>{t.d(n,{A:()=>i});const i=e=>{e.preventDefault?.(),e.stopPropagation?.(),e.stopImmediatePropagation?.()}},89441:(e,n,t)=>{t.r(n),t.d(n,{default:()=>i});const i={TitleMeta:"jgXVPcfCfYGKMObR",OnlineUsersList:"qyO2QBBsb4ACtJeO",OnlineUsersList__online:"dvNrJQAgHLi8fAYR",OnlineUsersList__skeleton:"CZU_n6H_3vFLVOSt",OnlineUsersList__null:"G4SEPix9nlogCgVB",OnlineUsersList__popover:"jcXm5xFSV3EzUly2",OnlineUsersList__cell:"eod5_ZDaYbNGoEBf"}},40961:(e,n,t)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=t(22551)},74225:(e,n,t)=>{var i=t(96540);function s(e,n,t){var s="function"==typeof n;i.useEffect((function(){var t,i=!0,o=e((function(){return i}));return Promise.resolve(o).then((function(e){t=e})),function(){i=!1,s&&n(t)}}),s?t:n)}e.exports=s,e.exports.useAsyncEffect=s}}]);