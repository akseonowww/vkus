"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[6946],{90603:(e,t,o)=>{o.d(t,{A:()=>n});var r=o(95728);const n=()=>{const e=document.getElementById("profile_redesigned");if(!e)return{state:void 0,profileRedesigned:void 0,store:void 0};const t=document.getElementById("react_rootprofile"),{container:o}=(0,r.A)(t);let{env:n,store:i}=o?.memoizedState?.element?.props||{};if(!i){const{fiber:t}=(0,r.A)(e);i=t?.return?.return?.memoizedProps?.value?.store}const s=i?.getState?.();return s||console.warn("profile state not found"),{state:s||void 0,profileRedesigned:e,store:i,env:n}}},38444:(e,t,o)=>{o.d(t,{A:()=>v});var r=o(22440),n=o(1145),i=o(14943),s=o(95684),a=o(38729),c=o(4107),l=o(2006);const d=(0,r.A)(),u=(0,a.NS)(),f=(0,a.NS)(),p=[],y=async(e,t)=>{for(const o of p){const r=o[t];r&&(await(0,s.A)(),r(e))}},h=(e,t)=>{t[u]||(t[u]=new MutationObserver((async o=>{for(const r of o)if("attributes"===r.type&&"style"===r.attributeName&&(await(0,s.A)(),"none"===t.style.display)){const t=e.querySelector(".Profile");t&&y(t,"onProfileLoadComplited")}})),t[u].observe(t,{attributes:!0}),l.A.add(t))},w=e=>{const t=e.querySelector(".Profile");return!!t&&(y(t,"onProfileLoadComplited"),!0)},A=()=>{for(const e of document.querySelectorAll(".ProfileWrapper,.ProfileWrapper__root")){y(e,"onProfileLoad");const t=e.querySelector("#profile_skeleton"),o=e.querySelector(".ProfileWrapper__root,#react_rootprofile");o?.firstChild?w(o)||o&&!o[f]&&(o[f]=new MutationObserver(((e,t)=>{w(o)&&t.disconnect()})),o[f].observe(o,{childList:!0}),l.A.add(o)):t?h(e,t):y(e,"onErrorFindSkeleton")}};let m=!1;const v=async e=>{if(p.push(e),(0,n.A)(A),m)return;m=!0;(await(0,c.A)()).subscribeOnModuleEvaluated((async()=>{await(0,i.A)(),d.cur?.module&&"profile"!==d.cur?.module||requestIdleCallback(A)}))}},33734:(e,t,o)=>{o.d(t,{A:()=>s});var r=o(47875),n=o(43883);const i=new Map,s=e=>{const t=i.get(e);if(t)return t;const o=new Promise((async t=>{const o=await r.A.call("users.getGifById",{user_id:e});if(!o.docs)return t(null),void i.delete(e);const s=await(0,n.A)(),a=(await s.api("docs.getById",{docs:o.docs}))[0].url;if(a){const e={imageUrl:a};o.height&&(e.height=o.height),t(e)}}));return i.set(e,o),o}},66946:(e,t,o)=>{o.a(e,(async(e,r)=>{try{o.r(t);var n=o(57580),i=o(90603),s=o(38444),a=o(33734),c=e([n]);n=(c.then?(await c)():c)[0];const l=async()=>{const{state:e,store:t}=(0,i.A)();if(!e?.owner.id)return;if(!t)return;const o=await(0,a.A)(e.owner.id);if(!o)return;const r={...t.getState().owner};r.cover={enabled:1,images:[{url:o.imageUrl,width:0,height:0}],photo_id:0},t.dispatch({type:"UPDATE_STATE",state:{owner:r}})};0,(0,s.A)({onProfileLoadComplited:l}),r()}catch(e){r(e)}}))}}]);