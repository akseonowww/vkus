"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1512],{4252:(e,t,o)=>{o.d(t,{A:()=>n});var s=o(65578);const n=()=>(0,s.A)("boxQueue")},92527:(e,t,o)=>{o.d(t,{A:()=>n});var s=o(65578);const n=()=>(0,s.A)("Photoview")},55015:(e,t,o)=>{o.d(t,{A:()=>p});var s=o(22440),n=o(95728),r=o(67992),c=o(38729),i=o(2006),a=o(4252);const d=(0,s.A)(),l=new r.A,u=(0,c.NS)(),f=e=>{const{fiber:t}=(0,n.A)(e);if(!t)return;let o=e.querySelector(".Entity__title");if(!o)return;o=o.querySelector("a > span")||o;const s=Number(t?.return?.key);if(s){0;for(const e of l.listeners)requestIdleCallback((()=>e(o,s)))}},m=e=>{if(!e[u]){for(const t of e.getElementsByClassName("ListItem"))f(t);e[u]=new MutationObserver((e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length)for(const e of t.addedNodes)e instanceof HTMLElement&&e.classList.contains("ListItem")&&f(e)})),e[u].observe(e,{childList:!0})}},h=e=>{if(e[u])return;const t=()=>{for(const t of e.querySelectorAll(".ChatSettingsMembersWidget__list > ul, .ChatSettingsMembersWidget__list > .List"))m(t)};t(),e[u]=new MutationObserver(t),e[u].observe(e,{childList:!0}),i.A.add(e)},A=e=>{if(e[u])return;const t=()=>{for(const t of e.getElementsByClassName("ChatSettings__content"))h(t)};t(),e[u]=new MutationObserver(t),e[u].observe(e,{childList:!0}),i.A.add(e)};let b=!1;const p=e=>{const t=l.addListener(e);return b||(b=!0,(0,a.A)().then((()=>{const e=d.boxQueue._show;d.boxQueue._show=function(...t){try{const[e]=t,o=d._message_boxes[e];if(o?.bodyNode){const e=o.bodyNode.querySelector("#ChatSettings,.ChatSettingsWrapper");e&&(e=>{if(e[u])return;const t=()=>{for(const t of e.getElementsByClassName("ChatSettings"))A(t)};t(),e[u]=new MutationObserver(t),e[u].observe(e,{childList:!0}),i.A.add(e)})(e)}}catch(e){console.error(e)}return Reflect.apply(e,d.boxQueue,t)}}))),t}},51210:(e,t,o)=>{o.d(t,{A:()=>A});var s=o(1145),n=o(67992),r=o(38729),c=o(4107),i=o(2006);const a=new n.A,d=(0,r.NS)(),l=(0,r.sr)(),u=e=>{if(e[l])return;e[l]=!0;const t=Number(e.id.match(/group_u_(members|admins)(\d+)/)?.[2]);if(!t)return void 0;const o=e.querySelector(".group_u_title");o&&((e,t)=>{for(const o of a.listeners)requestIdleCallback((()=>o(e,t)))})(o,t)},f=e=>{for(const t of e.getElementsByClassName("group_l_row"))u(t);e[d]||(e[d]=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&e.classList.contains("group_l_row")&&u(e)})),e[d].observe(e,{childList:!0}),i.A.add(e))},m=()=>{for(const e of document.querySelectorAll("#group_u_rows_members,.group_u_rows"))f(e)};let h=!1;const A=async e=>{const t=a.addListener(e);return(0,s.A)(m),h||(h=!0,(0,c.A)().then((e=>{e.onLocationChange((e=>{e.includes("act=users")&&m()}))}))),t}},88016:(e,t,o)=>{o.d(t,{A:()=>_});var s=o(22440),n=o(1145),r=o(95684),c=o(67992),i=o(38729),a=o(4107),d=o(2006);const l=(0,s.A)(),u=new c.A,f=(0,i.NS)(),m=(0,i.sr)(),h=e=>{const t=Number(e.dataset.id)|Number(e.dataset.groupId)||Number(e.id.match(/(\d+)/)?.[0]);if(!t)return void 0;const o=e.querySelector(".title, .labeled, .group_row_labeled");o&&(async(e,t)=>{if(e[m])return;e[m]=!0;const o=-Math.abs(t);for(const t of u.listeners)await(0,r.A)(),t(e,o)})(o,t)},A=e=>e.classList.contains("group_list_row")||e.classList.contains("groups_row"),b=e=>{for(const t of e.getElementsByClassName("group_list_row"))h(t);for(const t of e.getElementsByClassName("groups_row"))h(t);e[f]||(e[f]=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes){const t=e instanceof HTMLElement;t&&A(e)&&h(e),t&&"search_more_results"===e.id&&b(e)}})),e[f].observe(e,{childList:!0}),d.A.add(e))},p=()=>{for(const e of document.querySelectorAll(".groups_list,#groups_list_groups,.search_communities_block,.search_communities_results,#results:has(.groups_row)"))b(e)};let y=!1;const _=e=>{const t=u.addListener(e);return(0,n.A)(p),y||(y=!0,(0,a.A)().then((e=>{e.subscribeOnModuleEvaluated((()=>{l.cur.module&&l.cur.module.startsWith("groups")&&p()}))}))),t}},82181:(e,t,o)=>{o.d(t,{A:()=>A});var s=o(1145),n=o(14943),r=o(95684),c=o(67992),i=o(38729),a=o(4107),d=o(45939);const l=new c.A,u=(0,i.NS)(),f=async e=>{await(0,r.A)(),await(0,n.A)();const t=Number(e?.dataset?.peer);if(t)for(const o of l.listeners)o(e,t)},m=()=>{const e=document.querySelector("._im_peer_history");if(e){for(const t of e.getElementsByClassName("im-mess-stack"))f(t);e[u]||(e[u]=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes){const t=e;t.parentElement&&f(t)}})),e[u].observe(e,{childList:!0}),d.A.add(e))}};let h=!1;const A=e=>{const t=l.addListener(e);return(0,s.A)((()=>{for(const e of document.getElementsByClassName("im-mess-stack"))f(e)})),h||(h=!0,(0,a.A)().then((e=>{m(),e.onLocationChange((e=>{e.includes("sel=")&&m()}))}))),t}},60312:(e,t,o)=>{o.d(t,{A:()=>p});var s=o(22440),n=o(67992),r=o(38729),c=o(84060),i=o(2006),a=o(79068);const d=new n.A,l=async e=>{for(const t of d.listeners)try{t?.(e)}catch(e){console.error(e)}};(0,a.A)((e=>{!function(e){let{peer:t}=e;Object.defineProperty(e,"peer",{get:()=>t,set:e=>(l(e),t=e),configurable:!0}),l(t)}(e)}));const u=function(e){const t=d.addListener(e);return window.cur?.peer&&l(window.cur.peer),t},f=(0,s.A)(),m=new n.A,h=(0,r.NS)(),A=e=>{const t=document.querySelector(".im-page--title-main-in");if(t){0;for(const o of m.listeners)requestIdleCallback((()=>o(t,e)))}};let b=!1;const p=e=>{const t=m.addListener(e);if(!b){b=!0;const e=new Map;(0,c.A)().then((()=>{u((async t=>{t&&(e.has(t)&&clearTimeout(e.get(t)),e.set(t,setTimeout((async()=>{A(t),(()=>{const e=document.querySelector(".im-page--title-wrapper");e&&(e[h]&&e[h].disconnect(),e[h]=new MutationObserver((e=>{for(const t of e)t.removedNodes.length&&f.cur.peer&&A(f.cur.peer)})),e[h].observe(e,{attributes:!0,childList:!0,characterData:!0}),i.A.add(e))})(),e.delete(t)}),1e3)))}))}))}return t}},13435:(e,t,o)=>{o.d(t,{A:()=>f});var s=o(14943),n=o(95684),r=o(67992),c=o(5679);const i=new r.A;(0,c.A)((e=>{if("UserOpenedConvoProfile"===e.type){0;for(const t of i.listeners)try{t?.(e.peerId,e.isLinkWithHistory)}catch(e){console.error(e)}}}),!0);const a=e=>i.addListener(e),d=new r.A,l=async e=>{if(!e)return;await(0,n.A)(),await(0,s.A)();const t=document.querySelector("#reforged-root .ConvoProfileNew,#reforged-root .RightPanel__profile");if(t){0;for(const o of d.listeners)await(0,n.A)(),o(t,e)}};let u=!1;const f=async e=>{const t=d.addListener(e);return u||(u=!0,a(l)),t}},61622:(e,t,o)=>{o.d(t,{A:()=>b});var s=o(11630),n=o(95728),r=o(95684),c=o(67992),i=o(43171),a=o(56969);const d=new c.A,l=new Set;let u=!1;const f=async e=>{if(!e.classList.contains("SearchResult"))return;const{fiber:t}=(0,n.A)(e),o=Number(t?.key);if(!o)return void 0;const s=e.getElementsByClassName("ConvoTitle")[0];if(s){0;for(const e of d.listeners)await(0,r.A)(),e(s,o)}},m=e=>{if(!e.classList.contains("SearchMessageResult"))return;const{fiber:t}=(0,n.A)(e),o=Number(t?.return?.memoizedProps?.convo?.peerId||t.return?.memoizedProps?.peer?.id);if(!o)return void 0;const s=e.getElementsByClassName("SearchMessageResult__titleWithIcon")[0];if(s)for(const e of d.listeners)e(s,o)},h=()=>{const e=document.getElementById("reforged-root");if(!e)return;const t=new s.A({selector:"#reforged-root .ConvoList > .SearchTabs .SearchTabs__tabPanel > div .SearchConvoTab__scrollbar-content > .SearchConvoTab__resultsContainer",onAddNode:e=>{new s.A({selector:".SearchResult",onAddNode:f}).observe(e,{simulateAddedNodes:!0})}}).observe(e,{simulateAddedNodes:!0}),o=new s.A({selector:"#reforged-root .ConvoList > .SearchTabs .SearchTabs__tabPanel > div .SearchMessageTab__scrollbar-content > .SearchMessageTab__resultsContainer",onAddNode:e=>{new s.A({selector:".SearchMessageResult",onAddNode:m}).observe(e,{simulateAddedNodes:!0})}}).observe(e,{simulateAddedNodes:!0}),n=new s.A({selector:"#reforged-root .MEApp > .RightPanel .ConvoSearch__container > .ConvoSearch__content .ConvoSearch__scrollbar-content > .SearchMessageTab__resultsContainer",onAddNode:e=>{new s.A({selector:".SearchMessageResult",onAddNode:m}).observe(e,{simulateAddedNodes:!0})}}).observe(e,{simulateAddedNodes:!0});l.add((()=>t.disconnect())),l.add((()=>o.disconnect())),l.add((()=>n.disconnect())),u||(u=!0,(0,i.A)((()=>{for(const e of l)e();l.clear(),u=!1})))};let A=!1;const b=async e=>{const t=d.addListener(e);return A||(A=!0,(0,a.A)(h)),t}},99769:(e,t,o)=>{o.d(t,{A:()=>_});var s=o(14943),n=o(95684),r=o(67992),c=o(38729),i=o(4107),a=o(56969);const d=new r.A,l=(0,c.NS)(),u=(0,c.NS)(),f=(0,c.NS)(),m=(0,c.sr)(),h=async e=>{if(!e[m]){e[m]=!0,await(0,s.A)();for(const t of d.listeners)await(0,n.A)(),t(e)}},A=e=>{const t=()=>{for(const t of e.getElementsByClassName("ConvoListItem"))h(t)};t(),e[l]||(e[l]=new MutationObserver((e=>{for(const o of e)for(const e of o.addedNodes)e instanceof HTMLElement&&t()})),e[l].observe(e,{childList:!0}))},b=e=>{for(const t of e.children)A(t);e[u]||(e[u]=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&e.childNodes[0]instanceof HTMLElement&&A(e)})),e[u].observe(e,{childList:!0}))},p=()=>{const e=document.getElementById("reforged-root");if(!e)return;const t=e.querySelector(".ConvoList .ConvoList__items .ConvoList__itemsWrapper > .ConvoList__scrollbar-content");t&&(e=>{for(const t of e.querySelectorAll(".ConvoList__organiserSection,section[id]"))b(t);e[f]||(e[f]=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&e.matches(".ConvoList__organiserSection,section[id]")&&b(e)})),e[f].observe(e,{childList:!0}))})(t)};let y=!1;const _=e=>{const t=d.addListener(e);return p(),y||(y=!0,(0,a.A)(p),(0,i.A)().then((e=>{e.onLocationChange((e=>{e.startsWith("im")&&p()}))}))),t}},30646:(e,t,o)=>{o.d(t,{A:()=>l});var s=o(4255),n=o(67992),r=o(94169),c=o(44497);const i=new n.A,a=e=>{const t=document.querySelector("#reforged-root .ConvoHeader .ConvoTitle");if(t){0;for(const o of i.listeners)requestIdleCallback((()=>o(t,e)))}};let d=!1;const l=e=>{const t=i.addListener(e);const o=(0,c.A)();return o&&!s.A.isChatId(o)&&a(o),d?t:(d=!0,void(0,r.A)((e=>{s.A.isChatId(e)||a(e)})))}},18397:(e,t,o)=>{o.d(t,{A:()=>b});var s=o(49032),n=o(1145),r=o(31381),c=o(14943),i=o(95684),a=o(67992),d=o(38729),l=o(4107);const u=new a.A,f="#im_dialogs .ui_scroll_content, #im_dialogs:not(.ui_scroll_container)",m=(0,d.NS)(),h=async()=>{const e=document.querySelector(f);if(e){if(e)for(const t of e.querySelectorAll(".nim-dialog")){await(0,i.A)(),await(0,c.A)();for(const e of u.listeners)e(t)}e[m]||(e[m]=new MutationObserver((async e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes){if(1!==e.nodeType)continue;await(0,i.A)(),await(0,c.A)();const t=e;if(t.classList.contains("nim-dialog")){0;for(const e of u.listeners)e(t)}}})),e[m].observe(e,{childList:!0}))}};let A=!1;const b=async e=>{const t=u.addListener(e);if(requestAnimationFrame(h),!A){if(A=!0,s.lz.test(window.location.pathname)){let e=!1;const t=new MutationObserver((()=>{document.querySelector(f)&&(e=!0,t.disconnect(),h())}));t.observe(await(0,r.A)(),{childList:!0}),(0,n.A)((()=>{e||(t.disconnect(),h())}))}(0,l.A)().then((e=>{e.onLocationChange((e=>{s.lz.test(e)&&requestIdleCallback(h)}))}))}return t}},34881:(e,t,o)=>{o.d(t,{A:()=>m});var s=o(22440),n=o(14943),r=o(67992),c=o(84060),i=o(4107);const a=(0,s.A)(),d=new r.A,l=(e,t)=>{for(const o of d.listeners)o(e,t)},u=async()=>{const e=await(0,c.A)();if("number"==typeof e?.oid)for(const e of document.getElementsByClassName("page_name"))l(e,a.cur.oid)};let f=!1;const m=async e=>{const t=d.addListener(e);return requestAnimationFrame(u),f||(f=!0,(0,i.A)().then((e=>{e.subscribeOnModuleEvaluated((async()=>{await(0,n.A)(),["group","public","profile","groups"].includes(a.cur?.module)&&await u()}))}))),t}},79346:(e,t,o)=>{o.d(t,{A:()=>d});var s=o(1145),n=o(67992),r=o(92527);const c=new n.A,i=()=>{const e=document.getElementById("pv_box");if(!e)return;const t=e.querySelector(".narrow_column");if(!t)return;const o=t.querySelector("#pv_author_name");o&&(e=>{const t=Number(window.cur?.pvCurPhoto?.id.split("_")[0]);if(t)for(const o of c.listeners)o(e,t)})(o)};let a=!1;const d=e=>{const t=c.addListener(e);return(0,s.A)(i),a||(a=!0,(0,r.A)().then((e=>{const t=e.show;e.show=function(...e){const o=Reflect.apply(t,this,e);try{i()}catch(e){console.error(e)}return o}}))),t}},38444:(e,t,o)=>{o.d(t,{A:()=>_});var s=o(22440),n=o(1145),r=o(14943),c=o(95684),i=o(38729),a=o(4107),d=o(2006);const l=(0,s.A)(),u=(0,i.NS)(),f=(0,i.NS)(),m=[],h=async(e,t)=>{for(const o of m){const s=o[t];s&&(await(0,c.A)(),s(e))}},A=(e,t)=>{t[u]||(t[u]=new MutationObserver((async o=>{for(const s of o)if("attributes"===s.type&&"style"===s.attributeName&&(await(0,c.A)(),"none"===t.style.display)){const t=e.querySelector(".Profile");t&&h(t,"onProfileLoadComplited")}})),t[u].observe(t,{attributes:!0}),d.A.add(t))},b=e=>{const t=e.querySelector(".Profile");return!!t&&(h(t,"onProfileLoadComplited"),!0)},p=()=>{for(const e of document.querySelectorAll(".ProfileWrapper,.ProfileWrapper__root")){h(e,"onProfileLoad");const t=e.querySelector("#profile_skeleton"),o=e.querySelector(".ProfileWrapper__root,#react_rootprofile");o?.firstChild?b(o)||o&&!o[f]&&(o[f]=new MutationObserver(((e,t)=>{b(o)&&t.disconnect()})),o[f].observe(o,{childList:!0}),d.A.add(o)):t?A(e,t):h(e,"onErrorFindSkeleton")}};let y=!1;const _=async e=>{if(m.push(e),(0,n.A)(p),y)return;y=!0;(await(0,a.A)()).subscribeOnModuleEvaluated((async()=>{await(0,r.A)(),l.cur?.module&&"profile"!==l.cur?.module||requestIdleCallback(p)}))}},51302:(e,t,o)=>{o.d(t,{A:()=>N});var s=o(14943),n=o(95684),r=o(67992),c=o(38729),i=o(92527),a=o(2006),d=o(67767);const l=new r.A,u=(0,c.NS)(),f=(0,c.NS)(),m=(0,c.Ln)(),h=(0,c.sr)(),A=(0,c.NS)(),b=async e=>{if(e[h])return;if(e[h]=!0,await(0,s.A)(),!e.classList.contains("reply"))return;await(0,n.A)();let t=Number(e.dataset.answeringId);if(!t&&e.onclick){const o=e.onclick.toString().match(/Wall\.replyClick\(.+?,\s*(-?\d+)\)/);o&&(t=Number(o[1]))}if(t||(t=Number(e.querySelector("div[data-outline-id]")?.dataset?.outlineId)),!t)return void 0;const o=e.querySelector(".reply_author");if(o)for(const e of l.listeners)await(0,n.A)(),e(o,t)},p=e=>{e[m]||(e[m]=new IntersectionObserver((async t=>{for(const o of t)o.isIntersecting&&(b(e),e._ibs&&(e._ibs.unobserve(e),delete e._ibs))}),{threshold:0}),e[m].observe(e),a.A.add(e))},y=e=>{for(const t of e.getElementsByClassName("reply"))p(t);e[u]||(e[u]=new MutationObserver((()=>{for(const t of e.getElementsByClassName("reply"))p(t);for(const t of e.getElementsByClassName("replies_list_deep"))y(t)})),e[u].observe(e,{childList:!0}),a.A.add(e))},_=e=>{e[f]||(e[f]=new MutationObserver((e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length)for(const e of t.addedNodes)e instanceof HTMLElement&&(e.classList.contains("reply")&&p(e),(e.classList.contains("replies_wrap_deep")||e.classList.contains("replies_list_deep"))&&y(e))})),e[f].observe(e,{childList:!0}),a.A.add(e))},w=e=>{const t=e;for(const e of t.querySelectorAll(".replies_list,.wl_replies")){for(const t of e.getElementsByClassName("reply"))p(t);for(const t of e.getElementsByClassName("replies_wrap_deep"))y(t);for(const t of e.getElementsByClassName("replies_list_deep"))y(t);_(e)}};let v=!1;const N=e=>{const t=l.addListener(e);return v||(v=!0,(0,d.A)(w),(0,i.A)().then((e=>{const t=e.show;e.show=function(...e){const o=Reflect.apply(t,this,e);try{(()=>{const e=document.getElementById("pv_box");if(!e)return;const t=e.querySelector(".narrow_column .ui_scroll_overflow .pv_comments_list");if(t){for(const e of t.getElementsByClassName("reply"))p(e);t[A]||(t[A]=new MutationObserver((e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length)for(const e of t.addedNodes)e instanceof HTMLElement&&b(e)})),t[A].observe(t,{childList:!0}),a.A.add(t))}})()}catch(e){console.error(e)}return o}}))),t}},39201:(e,t,o)=>{o.d(t,{A:()=>p});var s=o(1145),n=o(67992),r=o(38729),c=o(4107);const i=new n.A,a=(0,r.NS)(),d=(0,r.NS)(),l=(0,r.sr)(),u="vkui__root",f=`.${u}`,m=e=>{if(!e[l]){e[l]=!0;for(const t of i.listeners)t(e)}},h=e=>{if(e.classList.contains(u))return m(e);for(const t of e.querySelectorAll(f))m(t);e[a]||(e[a]=new MutationObserver((async e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)e instanceof HTMLElement&&e.classList.contains(u)&&m(e)})),e[a].observe(e,{childList:!0}))},A=()=>{const e=document.getElementById("spa_root");if(e){for(const t of e.querySelectorAll(f))h(t);e[d]||(e[d]=new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)e instanceof HTMLElement&&e.classList.contains(u)&&h(e)})),e[d].observe(e,{childList:!0}))}};let b=!1;const p=async e=>{const t=i.addListener(e);if((0,s.A)(A),b)return t;b=!0;return(await(0,c.A)()).subscribeOnModuleEvaluated((()=>{setTimeout(A,100)})),t}},14198:(e,t,o)=>{o.d(t,{A:()=>y});var s=o(22440),n=o(95728),r=o(14943),c=o(95684),i=o(67992),a=o(38729),d=o(4107),l=o(39201);const u=(0,s.A)(),f=new i.A,m=(0,a.NS)(),h='div[class*="UserRichCell__container"]',A=async e=>{const t=e.querySelector('a[href^="/id"], [class*="UserRichCell__name"] > a');if(!t)return;await(0,c.A)();const{fiber:o}=(0,n.A)(e);let s=o?.memoizedProps?.children?.props?.id||o?.return?.memoizedProps?.children?.props?.id||o?.return?.memoizedProps?.status?.props?.user?.id||o?.return?.memoizedProps?.nameAfter?.props?.user?.id;if(s||(s=Number(t.href?.split("/id")[1])),s)for(const t of f.listeners){if(await(0,r.A)(),!e.parentElement)return;await(0,c.A)(),t(e,s)}},b=e=>{const t=e.querySelector('.vkuiSplitLayout__inner,[class*="TwoColumnLayout__container"]');if(!t)return;if(t.querySelector('.vkuiRichCell [class*="Skeleton__skeleton"]'))return void setTimeout((()=>b(e)),500);const o=t.querySelector(`.vkuiInternalGroup ${h}`)?.parentElement?.parentElement;if(o){for(const e of t.querySelectorAll(h))A(e);o[m]||(o[m]=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)A(e)})),o[m].observe(o,{childList:!0}))}};let p=!1;const y=e=>{const t=f.addListener(e);return(async()=>{if(p)return;p=!0,(0,l.A)((async e=>{await(0,r.A)(),"friends"===u.cur.module&&b(e)})),(await(0,d.A)()).onLocationChange((async e=>{if(e.startsWith("friends")){await(0,r.A)();const e=document.querySelector("#spa_root > .vkui__root");if(!e)return;b(e)}}))})(),t}},47648:(e,t,o)=>{o.d(t,{A:()=>h});var s=o(49032),n=o(1145),r=o(14943),c=o(67992),i=o(38729),a=o(4107);const d=(0,i.sr)(),l=new c.A,u=()=>{if(document.querySelector(".im-page:not(.im-page_group)"))return void setTimeout(u,1e3);const e=document.querySelector("#reforged-root,.VKCOMMessenger__reforgedRoot");e?e.querySelector(".VKCOMMessenger__skeletonWrapper")?setTimeout(u,500):(e=>{if(!e[d]){e[d]=!0;for(const t of l.listeners)t(e)}})(e):0===document.getElementById("wrap3")?.children.length&&setTimeout(u,500)},f=async e=>{if(document.getElementsByClassName("im-page")[0]&&!e)return void(0,n.A)((()=>f(!0)));const t=await(0,a.A)();u(),t.onLocationChange((async e=>{await(0,r.A)(),s.lz.test(e)&&u()}))};let m=!1;const h=e=>{const t=l.addListener(e);return(0,n.A)(u),m||(m=!0,f()),t}},79068:(e,t,o)=>{o.d(t,{A:()=>a});var s=o(67992),n=o(84060);const r=new s.A;let c=!1;const i=async e=>{c?await(0,n.A)():(c=!0,await(async()=>{let e=await(0,n.A)();Object.defineProperty(window,"cur",{get:()=>e,set:t=>{e=t;for(const e of r.listeners)try{e(t)}catch(e){console.error(e)}return!0},configurable:!0})})()),e(window.cur)},a=e=>{const t=r.addListener(e);return i(e),t}},56969:(e,t,o)=>{o.d(t,{A:()=>u});var s=o(67992),n=o(38729),r=o(47648);const c=new s.A,i=(0,n.NS)(),a=e=>{for(const t of c.listeners)t(e)},d=e=>{const t=e.querySelector(".MEApp__content");t?a(t):e[i]&&(e[i]=new MutationObserver((()=>{const t=e.querySelector(".MEApp__content");t&&(a(t),e[i].disconnect())})),e[i].observe(e,{childList:!0,subtree:!0}))};let l=!1;const u=e=>{const t=c.addListener(e);return l||(l=!0,(0,r.A)(d)),t}},44497:(e,t,o)=>{o.d(t,{A:()=>s});const s=()=>{const e=window.location.pathname.match(/\/convo\/(-?\d+)/);if(e)return Number(e[1])||0;const t=new URLSearchParams(window.location.search),o=Number(t.get("sel"));return o||0}},11630:(e,t,o)=>{o.d(t,{A:()=>c});var s=o(14943),n=o(95684);class r{obs;obsChildNodes;simulateAddedNodes;target;initialSelector;selectors;onAddNodes;onRemoveNodes;constructor({selector:e,onAddNode:t,onRemoveNode:o}){this.initialSelector=e,this.selectors=e.split(">").map((e=>e.trim())),this.onAddNodes=new Set,this.onRemoveNodes=new Set,t&&this.onAddNodes.add(t),o&&this.onRemoveNodes.add(o);this.obsChildNodes=[],this.obs=new MutationObserver((async e=>{for(const t of e)"childList"===t.type&&(t.addedNodes.length&&await this.processNodes({nodes:t.addedNodes,callbacks:this.onAddNodes,type:"add"}),t.removedNodes.length&&this.onAddNodes.size&&await this.processNodes({nodes:t.removedNodes,callbacks:this.onAddNodes,type:"remove"}))}))}_childSelector;get childSelector(){if(this._childSelector)return this._childSelector;const e=[...this.selectors];if(e.length>=2){const t=e.slice(0,2).join(" ");this._childSelector=[t,...e.slice(2)].join(" > ")}else this._childSelector=e.join(" > ");return this._childSelector}async processNodes({nodes:e,callbacks:t,type:o}){await(0,n.A)();const c=this.selectors[0],i=this.selectors.length<=1||"remove"===o,a=this.target?.matches(c);for(const o of e){if(1!==o.nodeType)continue;await(0,n.A)(),await(0,s.A)();const e=o,d=e.matches(c);if(i&&(a||d))for(const o of t)await(0,n.A)(),await(0,s.A)(),o(e,this.target);else if(!d){const t=e.querySelector(c);if(t){const e=new r({selector:this.childSelector});for(const t of this.onAddNodes)e.onAddNodes.add(t);for(const t of this.onRemoveNodes)e.onRemoveNodes.add(t);e.observe(t,{simulateAddedNodes:!0}),this.obsChildNodes.push(e)}}}}observe(e,{simulateAddedNodes:t}={}){if(e._clMO&&e._clMO.initialSelector===this.initialSelector){const o=e._clMO;let s=!1;for(const e of this.onAddNodes)o.onAddNodes.has(e)||(s=!0),o.onAddNodes.add(e);for(const e of this.onRemoveNodes)o.onRemoveNodes.has(e)||(s=!0),o.onRemoveNodes.add(e);return s&&t&&o.processNodes({nodes:e.childNodes,callbacks:o.onAddNodes,type:"add"}).catch(console.error),o}return this.target=e,this.simulateAddedNodes=t,this.simulateAddedNodes&&this.processNodes({nodes:e.childNodes,callbacks:this.onAddNodes,type:"add"}).catch(console.error),this.obs.observe(this.target,{childList:!0}),e._clMO=this,this}disconnect(){for(const e of this.obsChildNodes)e.disconnect();return this.obs.disconnect(),this.target?._clMO&&delete this.target._clMO,this}}const c=r},31381:(e,t,o)=>{o.d(t,{A:()=>n});let s=null;const n=async e=>document.body?document.body:s&&!e?s:(s=new Promise((e=>{if(document.body)return e(document.body);const t=new MutationObserver((()=>{document.body&&(e(document.body),t.disconnect())}));t.observe(document.documentElement,{childList:!0})})),await s)}}]);