"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1049],{71049:(t,e,n)=>{n.d(e,{default:()=>I});var a=n(4255),o=n(98570);const i=t=>{const e=document.createElement("div");e.className="addpost_button_wrap";const n=document.createElement("button");n.className="FlatButton FlatButton--primary FlatButton--size-m addpost_button",n.type="button",n.id="send_post",n.setAttribute("onclick","wall.sendPost()");const a=document.createElement("span");a.className="FlatButton__in";const o=document.createElement("span");return o.className="FlatButton__content",o.textContent=t?"Предложить новость":"Опубликовать",a.appendChild(o),n.appendChild(a),e.appendChild(n),e},s=(t="")=>{const e=document.createElement("span");e.className="AvatarRich AvatarRich--sz-28 AvatarRich--shadow post_field_user_image _post_field_image",e.style.cssText="width: 28px; height: 28px; border-radius: 50%; --avatar-rich-stroke-width: 1.5px; --avatar-rich-nft-frame-width: 2px;",e.setAttribute("aria-hidden","true"),e.setAttribute("onclick","if (!checkEvent(event)) return nav.go(this, event); event.cancelBubble = true;");const n=document.createElement("div");n.className="AvatarRich__background";const a=document.createElement("img");return a.src=t,a.alt="",a.className="AvatarRich__img",e.append(n,a),e},c=()=>{const t=document.createElement("div");return t.id="media_info",t.className="media_info",t},l=()=>{const t=document.createElement("div");return t.id="media_preview",t.className="clear_fix media_preview wall_post_media_preview",t};var r=n(57182),d=n(53644);const m=()=>{const t=document.createElement("div");t.className="checkbox_pic check_sign_pic PostOption",t.id="check_sign",t.setAttribute("onclick","Wall && Wall.saveCheckSign(this)"),t.setAttribute("onmouseover","showTitle(this, false, [10,10], {noZIndex: true});"),t.setAttribute("role","checkbox"),t.setAttribute("aria-checked","false"),t.setAttribute("tabindex","0"),window.getLang&&(t.setAttribute("data-title",window.getLang("wall_check_sign_disabled")),t.setAttribute("aria-label",window.getLang("wall_check_sign_enabled")));const e=document.createElement("span");e.className="blind_label",e.textContent="Убирать подпись при редактировании записи";const n=document.createElement("span");return n.className="PostOption__iconWrapper",n.appendChild((0,d.A)(r.A)),t.append(e,n),t},p=()=>{const t=document.createElement("span");return t.className="post_action_btn_text",t.setAttribute("role","button"),t.setAttribute("aria-label","Видно всем"),t.textContent="Видно всем",t};var u=n(6249);const _=()=>{const t=document.createElement("span");t.className="post_action_image_btn";const e=(0,d.A)(u.A);return t.appendChild(e),t};var b=n(33340);const h=({id:t,value:e,checked:n,label:a,onclick:o})=>{const i=document.createElement("div");if(i.className="FancyElementTT__item radiobtn",i.role="radio",i.setAttribute("data-value",String(e)),i.setAttribute("aria-checked",n?"1":""),o&&i.setAttribute("onclick",o),t&&(i.id=t,i.classList.add(`name_${t}`),i.setAttribute("name",t)),"string"==typeof a&&i.setAttribute("aria-label",a),n){i.classList.add("on");const t=document.createElement("span");t.className="FancyElementTT__checkIcon";const e=(0,d.A)(b.A);t.appendChild(e),i.appendChild(t)}const s=document.createElement("div");return s.className="FancyElementTT__itemLabel","string"==typeof a?s.textContent=a:a instanceof HTMLElement&&s.appendChild(a),i.appendChild(s),i},v=()=>{const t=document.createElement("div");t.className="PostVisibilityBestFriendsOnlyOption";const e=document.createTextNode("Для близких друзей"),n=document.createElement("span");n.className="PostVisibilityBestFriendsOnlyOption__info";const a=document.createElement("span");return a.className="PostVisibilityBestFriendsOnlyOption__editLink",a.setAttribute("role","button"),a.textContent="Редактировать",n.appendChild(a),t.appendChild(e),t.appendChild(n),t},g=()=>{const t=document.createElement("div");return t.className="post_action_tt_content",t.id="post_visibility_tt_content",t.append(h({id:"no_friends_only",value:0,checked:!0,label:"Видно всем",onclick:"Wall.togglePostVisibilityAccess(event.target, 0, '')"}),h({id:"friends_only",value:1,checked:!1,label:"Видно друзьям",onclick:"Wall.togglePostVisibilityAccess(event.target, 1, '')"}),h({id:"best_friends_only",value:2,checked:!1,label:v(),onclick:"Wall.togglePostVisibilityAccess(event.target, 2, '')"})),t},A=t=>{const e=document.createElement("div");if(e.className="post_actions_btns",e.id="post_actions_btns",t){const t=document.createElement("div");t.className="post_action_btn post_available",t.id="post_visibility_btn";const n=document.createElement("div");n.className="post_action_btn_layout",n.append(p(),_(),g()),t.appendChild(n),e.appendChild(t)}return e};var w=n(91314);const f=()=>{const t=document.createElement("span");t.setAttribute("onmouseover","Wall && Wall.showPostSettings(this, event);"),t.id="post_button_gear_settings",t.className="PostOption PostSettings__gear",t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label","Настройки публикации");const e=document.createElement("span");return e.className="PostOption__iconWrapper",e.id="post_icon_gear_settings",e.appendChild((0,d.A)(w.A)),t.appendChild(e),t};var E=n(94943);const k=()=>{const t=document.createElement("div");t.className="emoji_smile_wrap _emoji_wrap";const e=document.createElement("div");e.className="emoji_smile _emoji_btn",e.role="button",e.title=window.getLang?.("wall_reply_emoji_hint")||"",e.setAttribute("onmouseenter","return Emoji.show(this, event);"),e.setAttribute("onmouseleave","return Emoji.hide(this, event);"),e.setAttribute("onclick","return cancelEvent(event);"),e.setAttribute("aria-label","Add emoji or sticker");const n=document.createElement("div");n.className="emoji_smile_icon_inline_svg emoji_smile_icon";const a=(0,d.A)(E.A);return n.appendChild(a),e.appendChild(n),t.appendChild(e),t},C=(t,e)=>{const n=document.createElement("div");n.id="post_field",n.className="submit_post_field dark",n.setAttribute("onkeyup","Wall && Wall.postChanged()"),n.setAttribute("onkeydown","onCtrlEnter(event, wall.sendPost)"),n.setAttribute("onfocus","wall && wall.showEditPost()");const a=e?t?"Предложите новость":"Что у вас нового?":"Напишите что-нибудь...";return n.setAttribute("placeholder",a),n.setAttribute("contenteditable","true"),n.setAttribute("role","textbox"),n.setAttribute("aria-multiline","true"),n.setAttribute("aria-label",a),n},y=()=>{const t=document.createElement("span");return t.className="post_field_warning",t},N=(t,e)=>{const n=document.createElement("div");n.className="post_field_wrap _emoji_field_wrap";const a=k();n.appendChild(a);const o=C(t,e);return n.appendChild(o),n.appendChild(y()),n};var x=n(61766),P=n(53349);const B=t=>{const e=document.createElement("span");return e.className="Post__copyrightButtonIcon",e.appendChild((0,d.A)(t)),e},T=()=>{const t=document.createElement("a");t.className="Post__copyrightButton",t.id="ads_ord_mini_app_option",t.setAttribute("onclick","Wall && Wall.openMarkAsAdsOrdMiniApp(this)");const e=document.createElement("input");e.type="hidden",e.name="ord_pred_id",t.appendChild(e);const n=document.createElement("input");n.type="hidden",n.name="erid",t.appendChild(n);const a=B(P.A);a.classList.add("withoutAds"),t.appendChild(a);const o=B(x.A);o.classList.add("withAds"),t.appendChild(o);const i=document.createElement("span");i.className="Post__copyrightButtonText withoutAds",i.textContent="Отметить рекламу",t.appendChild(i);const s=document.createElement("span");return s.className="Post__copyrightButtonText withAds",s.textContent="Изменить отметку о рекламе",t.appendChild(s),t};var L=n(88101);const O=()=>{const t=document.createElement("a");t.className="Post__copyrightButton",t.id="post-copyright-button";const e=B(L.A);t.appendChild(e);const n=document.createElement("span");return n.className="Post__copyrightButtonText",n.textContent=window.getLang?.("wall_post_copyright_add_button")||"Указать источник",t.appendChild(n),t},S=(t,e)=>{const n=document.createElement("div");n.className="_post_settings_items";const a=document.createElement("div");if(a.className="checkbox",a.id="close_comments",a.setAttribute("onclick","checkbox(this)"),a.textContent="Выключить комментарии",n.appendChild(a),t){const t=document.createElement("div");t.className="checkbox",t.id="signed",t.setAttribute("onclick","checkbox(this); Wall && Wall.postChanged(true);"),t.textContent="Подпись",n.appendChild(t)}const o=document.createElement("div");if(o.className="checkbox",o.id="mute_notifications",o.setAttribute("onclick","checkbox(this)"),o.textContent="Не отправлять уведомления",n.appendChild(o),!e){const t=document.createElement("div");t.className="checkbox on",t.id="official",t.setAttribute("onclick","Wall && Wall.checkAsGroup(this)"),t.setAttribute("role","checkbox"),t.setAttribute("aria-checked","true"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label","от имени сообщества"),t.textContent=window.getLang?.("global_on_behalf_group")||"От имени сообщества",n.prepend(t)}return n.append(T(),O()),n},W=()=>{const t=document.createElement("div");return t.id="submit_post_error",t.className="error",t},F=(t,e,n)=>{const a=document.createElement("div");a.id="submit_post",a.className="submit_post clear_fix",a.setAttribute("onclick","if(domClosest('article_snippet', event.target)) return;event.cancelBubble=true;"),a.append(i(e),((t,e,n)=>{const a=document.createElement("div");return a.className="post_settings PostSettings",a.id="post_settings_btn",e||a.appendChild(f()),a.appendChild(S(t,n)),a})(t,e,n)),e&&a.appendChild(m());const o=document.createElement("div");return o.id="page_add_media",o.className="page_add_media",o.setAttribute("onclick","wall && wall.showEditPost()"),a.appendChild(o),a},j=({oid:t,fromOid:e,ownerName:n,ownerPhoto:o,ownerHref:i,isSuggestPost:r,onlyOfficial:d})=>{const m=a.A.isUserId(t),p=document.createElement("div");p.className="page_block",p.id="page_block_submit_post",m||p.setAttribute("data-tooltip-id","business_groups_web:make_post");const u=(({oid:t,fromOid:e,ownerName:n="",ownerPhoto:o="",ownerHref:i=""})=>{const s=document.createElement("div");return s.id="submit_post_box",s.className="submit_post_box clear_fix _submit_post_box",s.setAttribute("data-from-oid",String(e)||""),s.setAttribute("data-oid",String(t)||""),s.setAttribute("data-owner-name",n),s.setAttribute("data-owner-photo",o),s.setAttribute("data-owner-href",i),s.setAttribute("onclick","if(domClosest('article_snippet', event.target)) return;return cancelEvent(event)"),a.A.isUserId(t)&&s.classList.add("submit_post_box_with_sitposting"),s})({oid:t,fromOid:e,ownerName:n,ownerPhoto:o,ownerHref:i});return u.append(W(),(({ownerHref:t="",ownerPhoto:e=""})=>{const n=document.createElement("a");n.href=t,n.className="post_field_user_link _post_field_author",n.setAttribute("onclick","if (!checkEvent(event)) return nav.go(this, event); event.cancelBubble = true;");const a=s(e);n.appendChild(a);const o=s(e);return o.classList.add("post_field_image_secondary"),n.appendChild(o),n})({ownerHref:i,ownerPhoto:o}),N(r,d),l(),c(),A(m),F(!m,r,d)),p.appendChild(u),p},I=({wall_oid:t,public_link:e,loc:n,owner:i,wall_tpl:s,only_official:c})=>{if((0,o.A)()?.vcf_installed)return;const l=document.querySelector("#page_block_submit_post.new_posting"),r=document.querySelector("#page_block_submit_post:has(> .gtop_complex_message)"),d=document.getElementById("main_feed");if(document.getElementById("post_field"))return;if(!d&&!l&&!r)return;const[m,p,u,_]=s?.ownerData||[],[b,h,v]=s?.profileData||[];window.templates||(window.templates={}),window.templates.primary_attachments_view_template||(window.templates.primary_attachments_view_template='<div class="post_action_btn primary_attachments_view" id=\'primary_attachments_view_btn%link_id%\' style=\'display: none;\'>\n  <div class="post_action_btn_layout">\n    <span class="post_action_btn_text" role="button" aria-label="Сетка">Сетка</span>\n    <span class="post_action_image_btn"><svg fill="none" height="8" viewBox="0 0 12 8" width="12" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M2.16 2.3a.75.75 0 0 1 1.05-.14L6 4.3l2.8-2.15a.75.75 0 1 1 .9 1.19l-3.24 2.5c-.27.2-.65.2-.92 0L2.3 3.35a.75.75 0 0 1-.13-1.05z" fill="currentColor" fill-rule="evenodd"/></svg></span>\n    <div class="post_action_tt_content">\n      <div class="FancyElementTT__item radiobtn" role="radio" aria-label=\'Сетка\' data-value=\'grid\'>\n  \n  <div class="FancyElementTT__itemLabel">Сетка</div>\n</div><div class="FancyElementTT__item radiobtn" role="radio" aria-label=\'Карусель\' data-value=\'carousel\'>\n  \n  <div class="FancyElementTT__itemLabel">Карусель</div>\n</div>\n    </div>\n  </div>\n</div>');const g=t||m||b,A=j({onlyOfficial:!!c,isSuggestPost:t!==(m||b)&&a.A.isGroupId(g),oid:g,fromOid:g,ownerHref:u||e||n||(i?.id?`id${i.id}`:void 0)||v,ownerPhoto:p||i?.photo||h,ownerName:_});if(l&&(l.parentElement.insertBefore(A,l),l.remove()),d){d.parentElement.prepend(A);const t=document.querySelector(".PostingReactBlock__root");t&&t.remove()}if(r){r.insertAdjacentElement("afterend",A);const t=r.querySelector(".PostingReactBlock__root");t&&t.remove()}}},53644:(t,e,n)=>{n.d(e,{A:()=>o});let a=0;const o=t=>{const e=!!document.importNode;let n=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;e&&(n=document.importNode(n,!0));for(const t of n.querySelectorAll("title,desc"))t.remove();for(const t of n.querySelectorAll("[id]")){if(!t.id)continue;const e="vknext_icon-"+a++;let o=!1;for(const a of n.querySelectorAll(`[fill="url(#${t.id})"]`))a.setAttribute("fill",`url(#${e})`),o=!0;o&&(t.id=e)}return n}}}]);