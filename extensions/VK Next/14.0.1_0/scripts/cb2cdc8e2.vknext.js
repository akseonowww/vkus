"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1584],{2120:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(53644);const o="wGnjLCZ_kHG1SsM_",r="u4jlO0w2ygIFdPcp",i="h3nvK3QpPJNPuRux",a=({leftIcon:e,onClick:t,text:n})=>{const a=document.createElement("button");if(a.className=o,e){const t=document.createElement("div");t.className=r,t.appendChild((0,s.A)(e)),a.appendChild(t)}if(n){const e=document.createElement("div");e.className=i,e.innerText=n,a.appendChild(e)}return t&&a.addEventListener("click",t),a}},65929:(e,t,n)=>{n.d(t,{A:()=>m});var s=n(1145),o=n(67992),r=n(38729),i=n(4107);const a=".audio_section__artist .CatalogSection__artist .CatalogBlock .CatalogBlock__artist_header",c=new o.A,l=(0,r.NS)(),d=e=>{for(const t of c.listeners)requestIdleCallback((()=>t(e)))},u=()=>{const e=document.querySelector(".audio_section__artist");if(!e)return;const t=e.closest(".audio_page_sections");if(!t)return;const n=t.querySelector(a);n?d(n):t[l]||(t[l]=new MutationObserver((()=>{const e=t.querySelector(a);e&&(t._mbs&&(t._mbs.disconnect(),delete t._mbs),d(e))})),t[l].observe(t,{childList:!0}))};let h=!1;const m=e=>{const t=c.addListener(e);return window.location.pathname.startsWith("/artist/")&&(0,s.A)(u),h||(h=!0,(0,i.A)().then((e=>{e.onLocationChange((e=>{e.startsWith("artist/")&&u()}))}))),t}},9794:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.d(t,{A:()=>d});var o=n(387),r=n(26555),i=n(52352),a=n(93819);const e=await a.A;let c=0;class l{id;listeners=new Map;icon;title;subtitle;progressTotal;progress;onCancel;timeLeft;indicator;progressText;iconUrl;_bytesPerSecond;startTime;interval;constructor(e){const t=e;this.id=`${c++}_${(0,o.A)()}`;const n=this.notifyListeners.bind(this),s=["title","subtitle","progress","progressTotal","onCancel","icon","timeLeft","indicator","progressText","iconUrl"];for(const e of s)Object.defineProperty(this,e,{get:()=>t[e],set(s){t[e]=s,n(e,s)}});this._bytesPerSecond=0,this.startTime=Date.now()}notifyListeners=(e,t)=>{if(this.listeners.has(e))for(const n of this.listeners.get(e))n(t)};addChangePropertyListener=(e,t)=>{const n=this.listeners.get(e)||new Set;return n.add(t),this.listeners.set(e,n),()=>{n.delete(t),this.listeners.set(e,n)}};updateBytesPerSecond=e=>{this._bytesPerSecond+=e};updateTimeLeft=(t,n=this.progress,s=this.progressTotal,o=0)=>{if(void 0===n)return;o||(o=(0,i.A)(n,0,s||100)),this.updateBytesPerSecond(t);const r=Date.now()-this.startTime;let a=`0${e.use("vkcom_time_s")}`;o<100&&(a=new Date(100*r/o-r),a=[[a.getUTCFullYear()-1970,e.use("vkcom_time_y")],[a.getUTCMonth(),e.use("vkcom_time_mo")],[a.getUTCDate()-1,e.use("vkcom_time_d")],[a.getUTCHours(),e.use("vkcom_time_h")],[a.getUTCMinutes(),e.use("vkcom_time_m")],[a.getUTCSeconds(),e.use("vkcom_time_s")]].filter((e=>!!e[0])).slice(0,2).map((e=>e.join(""))).join(" ")||`0${e.use("vkcom_time_s")}`),this.timeLeft=a};startSpeed(){return this.stopSpeed(),this.indicator=(0,r.A)(0),this.interval=setInterval((()=>{this.indicator=(0,r.A)(this._bytesPerSecond)+"/s",this._bytesPerSecond=0}),1e3),()=>{this.stopSpeed()}}clearIndicator(){this.stopSpeed(),this.progress=this.progressTotal=this.timeLeft=this.indicator=void 0}stopSpeed(){this.interval&&(clearInterval(this.interval),delete this.interval)}}const d=l;s()}catch(e){s(e)}}),1)},4336:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(74848),o=n(1145),r=n(3068),i=n(70459);const a=new class{wrapper=document.createElement("li");_unsafeUnmount=null;listeners=[];events=[];getEvents(){return[...this.events]}addEvent(e){return this.events.push(e),this.onEventsChange(),()=>{this.events=this.events.filter((t=>t!==e)),this.onEventsChange()}}removeEvent(e){this.events=this.events.filter((t=>t.id!==e)),this.onEventsChange()}addEventsChangeListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}onEventsChange(){for(const e of this.listeners)e(this.getEvents());this.events.length>=1?(0,o.A)((()=>this.renderManager())):this.removeManager()}async downloadFileFromLink(e,t){const s=(await n.e(7746).then(n.bind(n,37746))).default;await s(e,t)}async renderManager(){if(this.wrapper.parentElement)return;this.wrapper.className="HeaderNav__item";const e=document.querySelector(".HeaderNav,#top_nav");if(!e)return void console.error("HeaderNav not found");const t=e.querySelector(".HeaderNav__audio");t?(t.insertAdjacentElement("afterend",this.wrapper),this.wrapper.style.order=""):(e.appendChild(this.wrapper),this.wrapper.style.order="-1"),this._unsafeUnmount&&this._unsafeUnmount();const{default:o}=await Promise.all([n.e(2551),n.e(7983),n.e(2020),n.e(3543),n.e(9452),n.e(2477),n.e(6052)]).then(n.bind(n,86052)),{unmount:a}=await(0,r.A)({root:this.wrapper,content:(0,s.jsx)(o,{}),disableParentTransformForPositionFixedElements:!0,disablePortal:!0,wrapperProps:{className:i.A.DownloadManagerPopup}});this._unsafeUnmount=a}removeManager(){0===this.events.length&&(this.wrapper.parentElement&&this.wrapper.remove(),this._unsafeUnmount&&(this._unsafeUnmount(),this._unsafeUnmount=null))}}},88298:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.d(t,{N:()=>r.A,j:()=>o.A});var o=n(9794),r=n(4336),i=e([o]);o=(i.then?(await i)():i)[0],s()}catch(e){s(e)}}))},91584:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.r(t);var o=n(37445),r=n(2120),i=n(65929),a=n(93819),c=n(88298),l=n(22399),d=n(70459),u=e([c]);c=(u.then?(await u)():u)[0],(0,i.A)((async e=>{const t=await a.A,n=e.querySelector(".MusicAuthor_block__actions");if(!n||n.vkn_down_inj)return;n.vkn_down_inj=!0;const s=document.createElement("div");s.className=d.A.AudioArtistHeaderActions;const i=e.querySelector(".MusicAuthor_block__cover");if(i){const e=(0,r.A)({leftIcon:o.A,text:t.use("vkcom_download_cover"),onClick:()=>{const e=(0,l.A)(i.style.backgroundImage);if(!e)return;const t=nav.strLoc.split("/")[1]||"artist";c.N.downloadFileFromLink(e,`${t}_cover.jpg`)}});s.appendChild(e)}n.insertAdjacentElement("beforebegin",s)})),s()}catch(e){s(e)}}))},22399:(e,t,n)=>{n.d(t,{A:()=>s});const s=e=>{const t=e.match(/url\("([^"]+)"\)/);if(t)return t[1];throw new Error("url not found")}},53644:(e,t,n)=>{n.d(t,{A:()=>o});let s=0;const o=e=>{const t=!!document.importNode;let n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;t&&(n=document.importNode(n,!0));for(const e of n.querySelectorAll("title,desc"))e.remove();for(const e of n.querySelectorAll("[id]")){if(!e.id)continue;const t="vknext_icon-"+s++;let o=!1;for(const s of n.querySelectorAll(`[fill="url(#${e.id})"]`))s.setAttribute("fill",`url(#${t})`),o=!0;o&&(e.id=t)}return n}},52352:(e,t,n)=>{n.d(t,{A:()=>s});const s=(e,t,n)=>e<t?0:e>n?100:(e-t)/(n-t)*100},70459:(e,t,n)=>{n.d(t,{A:()=>s});const s={AudioPageMainTabBtn:"XYzoAKWs2KhH02Ye",AudioArtistHeaderActions:"v8VBorduCtZgTyyi",VideoPlayerDownloadIcon:"eaSw45y_1KLlo4Gw",SecondaryAttachment__afterItem:"RZ6NWD1WvjAOxG2Y",DownloadManagerPopup:"o9vy1XhnZrkvykUb",VideoPlayerHlsWarning__tooltip:"P9MhdlrtilEQt7Am",VideoPlayerHlsWarning__text:"Xq2PVks6OK6Z74Al",AudioPlaylistSnippet__actions:"FawmW4_Zd1R1BI1E",AudioPlaylistSnippet__actionButton:"ZPr5mXzL52VUPaRe",ActionButton__icon:"_5bFyslOmNjqqP7y",ActionButton__text:"o7YAH98fI9KVToa5",AudioPlayerUserControlsContainer__userButton:"e47qq1XqMPp6oTp7",AudioPlayerPlaybackButton:"wqb5e3cgYZFgHCc1",AudioRowReact__button:"q7d6KTdMjs6HYpKm"}},37445:(e,t,n)=>{n.d(t,{A:()=>s});const s='<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path clip-rule="evenodd" d="m4 17.75c0-.4142.33579-.75.75-.75h10.5c.4142 0 .75.3358.75.75s-.3358.75-.75.75h-10.5c-.41421 0-.75-.3358-.75-.75z" fill-rule="evenodd"/><path d="m10.7493 2.72581c0-.40086-.3355-.72581-.74931-.72581-.41385 0-.74933.32495-.74933.72581l-.00001 9.72199-3.97032-3.97029c-.29289-.29289-.76777-.29289-1.06066 0s-.29289.76777 0 1.06066l5.24532 5.24533c.2929.2929.76781.2929 1.06071 0l5.2558-5.25585c.2929-.2929.2929-.76777 0-1.06067-.2929-.29289-.7678-.29289-1.0606 0l-3.9716 3.97152z"/></g></svg>\n'}}]);