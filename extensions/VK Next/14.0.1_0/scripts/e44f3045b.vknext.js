"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[2087,4144,5544],{21867:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.r(t);var s=n(74848),o=n(57580),r=n(14943),c=n(95684),i=n(39107),l=n(38729),u=n(63305),d=n(89964),m=n(67767),p=n(43171),y=n(3068),_=n(88833),f=n(84144),h=n(53814),w=e([o]);o=(w.then?(await w)():w)[0];const A=(0,l.sr)(),E=new Set;let g=!1;const k=()=>{g||(g=!0,(0,p.A)((()=>{for(const e of E)e();E.clear(),g=!1})))},C=async()=>(await f.default.getPacks()).length>0,O=async(e,t=!1)=>{await(0,c.A)(),await(0,r.A)();const a=await Promise.all([n.e(2295),n.e(6474)]).then(n.bind(n,76474)),{unmount:o}=await(0,y.A)({root:e,content:(0,s.jsx)(a.default,{isReply:t}),disableParentTransformForPositionFixedElements:!0});return E.add(o),k(),o},b=async(e,t=!1)=>{const n=e.querySelector(".reply_field_wrap,.reply_fakebox_container");if(!n)return;if(n.getElementsByClassName(A).length)return;const a=e.dataset.postId,s=document.createElement("div");s.className=(0,i.xWm)(A,h.A.replyFakeButton),n.appendChild(s);const o=O(s,!0);t||s.addEventListener("mouseover",(()=>{Wall.showEditReply(a,null,!1,!1,!1,(async()=>{await(0,r.A)(),await b(e,!0),n.contains(s)||(await o)()}))})),await o};0,(async()=>{await C()&&((0,d.A)((async e=>{const t=e.querySelector(".Composer__inputPanel,.ConvoComposer__inputPanel");if(!t)return;if(t.querySelector(`.${A}`))return;const n=t.querySelector(".StickerEmojiMenuPopper"),a=document.createElement("div");a.className=A,n?n.insertAdjacentElement("beforebegin",a):t.appendChild(a),await O(a)})),(0,_.A)((async()=>{const e=document.getElementsByClassName("im_chat-input--buttons")[0];if(!e)return;if(e.getElementsByClassName(A).length)return;const t=document.createElement("div");t.className=A;const n=e.querySelector(".im-chat-input--smile-wrap,.emoji_smile_wrap");n&&n.insertAdjacentElement("beforebegin",t),await O(t)})),(0,m.A)(b),(0,u.A)((e=>{if(e._tgs_hooked)return;e._tgs_hooked=!0;const t=e.initReplyEditable;e.initReplyEditable=function(...n){const a=Reflect.apply(t,e,n);return requestAnimationFrame((()=>{const[e,t,a]=n,s=e?.closest(".post")??t?.closest(".post")??(a?document.getElementById(`post${a}`):null);s&&b(s)})),a}})))})().catch(console.error),a()}catch(e){a(e)}}))},88833:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(22440),s=n(14943),o=n(84060),r=n(4107),c=n(67992);const i=(0,a.A)(),l=new c.A,u=async e=>{for(const t of l.listeners)try{await(0,s.A)(),t?.(e)}catch(e){console.error(e)}};let d=!1;const m=e=>{const t=l.addListener(e);return(async()=>{if(!i.location.pathname.startsWith("/gim"))return;const e=(await(0,o.A)()).peer;e&&await u(e)})().catch(console.error),d||(d=!0,(async()=>{(await(0,r.A)()).onLocationChange((async e=>{if(!e.startsWith("gim"))return;const t=i.cur.peer;t&&await u(t)}))})().catch(console.error)),t}},84144:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(53778);class s extends a.default{constructor(){super("telegramStickers",{lifetime:1e4,defaultValue:[]})}async getPacks(){return[...await this.getStorage()]}}const o=new s},53814:(e,t,n)=>{n.d(t,{A:()=>a});const a={replyFakeButton:"rcz0YdKMeR0RRy4S"}},40961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(22551)}}]);