"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[8082,4264],{82181:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(1145),s=n(14943),a=n(95684),i=n(67992),r=n(38729),c=n(4107),d=n(45939);const l=new i.A,m=(0,r.NS)(),u=async e=>{await(0,a.A)(),await(0,s.A)();const t=Number(e?.dataset?.peer);if(t)for(const n of l.listeners)n(e,t)},f=()=>{const e=document.querySelector("._im_peer_history");if(e){for(const t of e.getElementsByClassName("im-mess-stack"))u(t);e[m]||(e[m]=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes){const t=e;t.parentElement&&u(t)}})),e[m].observe(e,{childList:!0}),d.A.add(e))}};let p=!1;const h=e=>{const t=l.addListener(e);return(0,o.A)((()=>{for(const e of document.getElementsByClassName("im-mess-stack"))u(e)})),p||(p=!0,(0,c.A)().then((e=>{f(),e.onLocationChange((e=>{e.includes("sel=")&&f()}))}))),t}},18082:(e,t,n)=>{n.a(e,(async(e,o)=>{try{n.r(t),n.d(t,{getAdmins:()=>C});var s=n(57580),a=n(95728),i=n(14943),r=n(4255),c=n(95684),d=n(84060),l=n(82181),m=n(32441),u=n(93819),f=n(34264),p=n(2519),h=n(1003),A=n(44497),w=n(43024),g=e([s]);s=(g.then?(await g)():g)[0];const v="var cs=API.messages.getConversationsById({group_id:Args.gid,peer_ids:Args.peer_ids}).items[0].chat_settings;var a=cs.admin_ids;if(!a){a=[];};if(cs.owner_id){a.push(cs.owner_id);};return a;",y=new Map,_=new Map,C=e=>{if(!e)return Promise.resolve(new Set);const t=(0,h.A)(),n=r.A.isGroupId(t);if(n){if(_.has(e))return _.get(e)}else if(y.has(e))return y.get(e);const o=window.vkApi.api("execute",{gid:n?t:0,peer_ids:e,code:v}).then((e=>new Set(Array.isArray(e)?e:[])));return n?_.set(e,o):y.set(e,o),o};(0,l.A)((async(e,t)=>{if(!w.default.getValue("showAdminsChat"))return;if(await(0,i.A)(),e.__sac)return;e.__sac=!0;const o=await(0,d.A)();if(!(await C(o.peer)).has(t))return;await(0,c.A)();const{default:s}=await n.e(6264).then(n.bind(n,36264)),a=await u.A,r=(0,f.default)({allIcons:[{header:a.use("vkcom_role_admin"),icon:s}],displayedIcons:[{header:"",icon:s}]});r.style.order="1",await(0,i.A)();const l=e.querySelector(".im-mess-stack--lnk");l&&l.appendChild(r)}));const E=async e=>{if(!w.default.getValue("showAdminsChat"))return;if(await(0,i.A)(),e.__sac)return;e.__sac=!0,await(0,c.A)();const{fiber:t}=(0,a.A)(e),o=t?.return?.memoizedProps?.message?.authorId;if(!o)return;const s=t?.return?.memoizedProps?.peer?.id||(0,A.A)();if(!s)return;const{store:r}=await(0,p.A)();if(!r)return;const{adminIds:d}=r.getState().convos.get(s)?.members||{};if(!d)return;if(!d.has(o))return;await(0,c.A)();const{default:l}=await n.e(6264).then(n.bind(n,36264)),m=await u.A,h=(0,f.default)({allIcons:[{header:m.use("vkcom_role_admin"),icon:l}],displayedIcons:[{header:"",icon:l}]});h.style.order="1",await(0,i.A)();const g=e.querySelector(".PeerTitle");g&&g.appendChild(h)};let b=null;0,w.default.onInited((()=>{w.default.getValue("showAdminsChat")&&(b=(0,m.A)(E))})),w.default.addChangeKeyListener("showAdminsChat",((e,t)=>{b&&(b(),b=null),t&&(b=(0,m.A)(E))})),o()}catch(e){o(e)}}))},34264:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var o=n(53644),s=n(82050);const a="h0tDn1aParRO8gXU",i="xqBh8WEIQ4v6Kqw2",r="u5RXokMRkb4C41HL",c="QtkN4h7nlVNfJoJZ",d=(e,{header:t,text:n,onClose:o,customTextElement:d})=>{if(e.tooltip)return;e.tooltip=!0;const l=document.createElement("div");l.className=a;const m=document.createElement("div");if(m.className=c,l.appendChild(m),t){const e=document.createElement("h5");e.className=r,e.innerText=t,m.appendChild(e)}if(n&&!d){const e=document.createElement("h5");e.className=i,e.innerText=n,m.appendChild(e)}d&&(d.classList.add(i),m.appendChild(d));let u=!1;const f=()=>{document.body.appendChild(l);const{top:t,left:n}=(e=>{const t=e.getBoundingClientRect(),n=document.body,o=document.documentElement,s=window.pageYOffset||o.scrollTop||n.scrollTop,a=window.pageXOffset||o.scrollLeft||n.scrollLeft,i=o.clientTop||n.clientTop||0,r=o.clientLeft||n.clientLeft||0,c=t.top+s-i,d=t.left+a-r;return{top:Math.round(c),left:Math.round(d)}})(e),o=e.getBoundingClientRect(),s=o.height,a=l.getBoundingClientRect(),i=a.height,r=o.bottom>=(window.innerHeight||document.documentElement.clientHeight)-i,c=r?t-s-i:t+s,d=n-a.width/4;l.style.left=`${d}px`,l.style.top=`${c}px`,r?(m.style.marginTop="",m.style.marginBottom="7px"):(m.style.marginTop="7px",m.style.marginBottom=""),l.style.opacity="1"},p=()=>{u=!0},h=async()=>{u=!1,await(0,s.A)(500),u||(l.style.opacity="",await(0,s.A)(200),l.remove(),o&&o())},A=async()=>{await(0,s.A)(500),u||(l.style.opacity="",await(0,s.A)(200),l.remove())};e.addEventListener("mouseenter",f),e.addEventListener("mouseleave",A),l.addEventListener("mouseenter",p),l.addEventListener("mouseleave",h);return{remove:()=>(e.removeEventListener("mouseenter",f),e.removeEventListener("mouseleave",A),l.removeEventListener("mouseenter",p),l.removeEventListener("mouseleave",h),l.style.opacity="",(0,s.A)(200).then((()=>l.remove())),void(e.tooltip=!1))}};var l=n(50563);const m=({displayedIcons:e,allIcons:t})=>{const n=document.createElement("span");n.className=l.A.Verified;for(const{icon:t,color:s}of e){const e="string"==typeof t?(0,o.A)(t):t.cloneNode(!0);e.classList.add(l.A.VerifiedIcon),s&&(e.style.color=s),n.appendChild(e)}const s=document.createElement("ul");s.className=l.A.VerifiedList;const a=1===t.length;for(const e of t){const t=document.createElement("li");if(t.className=l.A.VerifiedItem,!a){const n=document.createElement("div");n.className=l.A.VerifiedItem__icon,n.appendChild("string"==typeof e.icon?(0,o.A)(e.icon):e.icon),e.color&&(n.style.color=e.color),t.appendChild(n)}const n=document.createElement("div");n.className=l.A.VerifiedItem__label,n.textContent=e.header,e.header.length>40&&(n.title=e.header),t.appendChild(n),s.appendChild(t)}return d(n,{customTextElement:s}),n}},44497:(e,t,n)=>{n.d(t,{A:()=>o});const o=()=>{const e=window.location.pathname.match(/\/convo\/(-?\d+)/);if(e)return Number(e[1])||0;const t=new URLSearchParams(window.location.search),n=Number(t.get("sel"));return n||0}},53644:(e,t,n)=>{n.d(t,{A:()=>s});let o=0;const s=e=>{const t=!!document.importNode;let n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;t&&(n=document.importNode(n,!0));for(const e of n.querySelectorAll("title,desc"))e.remove();for(const e of n.querySelectorAll("[id]")){if(!e.id)continue;const t="vknext_icon-"+o++;let s=!1;for(const o of n.querySelectorAll(`[fill="url(#${e.id})"]`))o.setAttribute("fill",`url(#${t})`),s=!0;s&&(e.id=t)}return n}},50563:(e,t,n)=>{n.d(t,{A:()=>o});const o={Verified:"tQvzgvyFY9assl4B",VerifiedIcon:"_w5ehg8cRWcTVQRI",VerifiedList:"BbHv8M5Crt4N4cDf",VerifiedItem:"JBy2mpzrrQ9eBxGL",VerifiedItem__icon:"M11IzXepm32bQjgH",VerifiedItem__label:"JRbSCzbBIBdqNzut"}}}]);