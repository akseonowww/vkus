"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[340],{82451:(e,t,n)=>{n.d(t,{A:()=>v});var i=n(74848),r=n(87528);const s="xnJHUfyRoE7A8th_",c="PC7hnSXPn0hZ9PoL",a="rh0ztpNt0Osj6ueC";var o=n(39107),l=n(96540),u=Object.defineProperty,d=(e,t,n)=>((e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),_=new Map,m=new WeakMap,h=0,y=void 0;function p(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(n=e.root,n?(m.has(n)||(h+=1,m.set(n,h.toString())),m.get(n)):"0"):e[t]}`;var n})).toString()}function g(e,t,n={},i=y){if(void 0===window.IntersectionObserver&&void 0!==i){const r=e.getBoundingClientRect();return t(i,{isIntersecting:i,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:r,observer:s,elements:c}=function(e){const t=p(e);let n=_.get(t);if(!n){const i=new Map;let r;const s=new IntersectionObserver((t=>{t.forEach((t=>{var n;const s=t.isIntersecting&&r.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=s),null==(n=i.get(t.target))||n.forEach((e=>{e(s,t)}))}))}),e);r=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:s,elements:i},_.set(t,n)}return n}(n),a=c.get(e)||[];return c.has(e)||c.set(e,a),a.push(t),s.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(c.delete(e),s.unobserve(e)),0===c.size&&(s.disconnect(),_.delete(r))}}l.Component;const f={width:"100%",height:1,marginBottom:-1,visibility:"hidden"};function k(){const[e,t]=function({threshold:e,delay:t,trackVisibility:n,rootMargin:i,root:r,triggerOnce:s,skip:c,initialInView:a,fallbackInView:o,onChange:u}={}){var d;const[_,m]=l.useState(null),h=l.useRef(),[y,p]=l.useState({inView:!!a,entry:void 0});h.current=u,l.useEffect((()=>{if(c||!_)return;let a;return a=g(_,((e,t)=>{p({inView:e,entry:t}),h.current&&h.current(e,t),t.isIntersecting&&s&&a&&(a(),a=void 0)}),{root:r,rootMargin:i,threshold:e,trackVisibility:n,delay:t},o),()=>{a&&a()}}),[Array.isArray(e)?e.toString():e,_,r,i,s,c,n,o,t]);const f=null==(d=y.entry)?void 0:d.target,k=l.useRef();_||!f||s||c||k.current===f||(k.current=f,p({inView:!!a,entry:void 0}));const v=[m,y.inView,y.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}({threshold:0});return{sentinel:(0,i.jsx)("div",{ref:e,style:f}),isSticky:!t}}const v=({dateMs:e,children:t})=>{const{sentinel:n,isSticky:l}=k(),u=(0,o.xWm)(c,l&&a);return(0,i.jsxs)("div",{children:[n,(0,i.jsx)("div",{className:s,children:(0,i.jsx)("span",{className:u,children:(0,r.H)(e)})}),t]})}},422:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(74848),r=n(39107);const s="kEOK11qd0k9Jv15F",c="E5_YQoaWDka1Aaai",a=({isOut:e,children:t})=>{const n=(0,r.xWm)(s,e&&c);return(0,i.jsx)("div",{className:n,children:t})}},88496:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(74848),r=n(39107);const s="mZ8HhZVyKRXwp3ds",c="KYP7yyNNCooJeOGi",a=({isOut:e,children:t})=>{const n=(0,r.xWm)(s,e&&c);return(0,i.jsx)("div",{className:n,children:t})}},89749:(e,t,n)=>{n.a(e,(async(e,i)=>{try{n.d(t,{A:()=>y});var r=n(74848),s=n(48104),c=n(51466),a=n(4255),o=n(69986),l=n(39107),u=n(98235),d=e([o]);o=(d.then?(await d)():d)[0];const _=({peerName:e,peerUrl:t})=>(0,r.jsx)(l.N_E,{className:s.A.Action__Link,href:t,target:"_blank",children:(0,r.jsx)(m,{text:e})}),m=({text:e,onClick:t})=>(0,r.jsx)(l.EYj,{inline:!0,weight:"1",className:(0,l.xWm)(s.A.Action__Text,t&&s.A.Action__Link),onClick:t,useAccentWeight:!0,children:e}),h=(e,t,n=!1)=>{const i=e[t];let r="",s="",c=!1;return a.A.isUserId(t)?(r=n?i?.acc:i?.ins||`@id${t}`,s=`https://vk.com/id${t}`):a.A.isGroupId(t)&&(r=i?.name||"@club"+-t,s="https://vk.com/club"+-t,c=!0),{name:r,link:s,isCommunity:c}},y=({message:e})=>{const t=(0,c.A)((e=>e.peerNames)),n=(0,o.A)((e=>e.lang)),i=(0,u.A)({cmId:e.action?.conversation_message_id||0}),a=(e,t)=>{const i=n.use(e,t);return(0,r.jsx)("div",{className:s.A.Action,children:(0,r.jsx)(l.EYj,{inline:!0,className:s.A.Action__Text,children:i})})};if(!e.action)return null;switch(e.action.type){case"chat_photo_remove":case"chat_photo_update":case"chat_group_call_started":case"chat_invite_user_by_link":case"chat_screenshot":case"conversation_style_update":case"conversation_style_update_action":{const{name:n,link:i,isCommunity:s}=h(t,e.from_id);let c=`chathistory_action_${e.action.type}`;return s&&(c+="_community"),a(c,{user:(0,r.jsx)(_,{peerName:n,peerUrl:i})})}case"chat_unpin_message":case"chat_pin_message":{const{name:n,link:s,isCommunity:c}=h(t,e.from_id);let o=`chathistory_action_${e.action.type}`;e.action.message||(o+="_custom_text"),c&&(o+="_community");const l=e.action.message?(0,r.jsx)(m,{text:e.action.message,onClick:i}):(0,r.jsx)(m,{text:"сообщение",onClick:i});return a(o,{user:(0,r.jsx)(_,{peerName:n,peerUrl:s}),message:l})}case"chat_create":case"chat_title_update":{const{name:n,link:i,isCommunity:s}=h(t,e.from_id);let c=`chathistory_action_${e.action.type}`;return s&&(c+="_community"),a(c,{user:(0,r.jsx)(_,{peerName:n,peerUrl:i}),title:(0,r.jsx)(m,{text:e.action.text}),old_title:(0,r.jsx)(m,{text:e.action.old_text})})}case"chat_invite_user":case"chat_kick_user":{const{name:n,link:i,isCommunity:s}=h(t,e.from_id),{name:c,link:o}=h(t,e.action.member_id,!0);let l=`chathistory_action_${e.action.type}`;return e.action.member_id===e.from_id&&(l+="_self"),s&&(l+="_community"),a(l,{user:(0,r.jsx)(_,{peerName:n,peerUrl:i}),target:(0,r.jsx)(_,{peerName:c,peerUrl:o})})}case"chat_invite_user_by_message_request":case"chat_invite_user_by_call":case"chat_invite_user_by_call_join_link":case"chat_kick_user_call_block":case"accepted_message_request":{const{name:n,link:i,isCommunity:s}=h(t,e.from_id),{name:c,link:o}=h(t,e.action.member_id,!0);let l=`chathistory_action_${e.action.type}`;return s&&(l+="_community"),a(l,{user:(0,r.jsx)(_,{peerName:n,peerUrl:i}),target:(0,r.jsx)(_,{peerName:c,peerUrl:o})})}case"sent_message_requests_count":return a(`chathistory_action_${e.action.type}`,{num:e.action.count.toString()});case"chat_kick_don":case"call_transcription_failed":case"rejected_message_request":return a(`chathistory_action_${e.action.type}`,{});case"sent_message_request":{const{name:n,link:i}=h(t,e.from_id),{name:s,link:c}=h(t,e.action.member_id);return a(`chathistory_action_${e.action.type}`,{user:(0,r.jsx)(_,{peerName:n,peerUrl:i}),viewer:(0,r.jsx)(_,{peerName:s,peerUrl:c})})}case"custom":return(0,r.jsx)("span",{children:e.action.chunks.join(" ")});default:return a("me_unsupported_message",{})}};i()}catch(e){i(e)}}))},69986:(e,t,n)=>{n.a(e,(async(e,i)=>{try{n.d(t,{A:()=>a});var r=n(51603),s=n(30521),c=n(81621);const e=new s.default(await(0,r.A)("chatHistory",0)),a=(0,c.vt)()((()=>({lang:e,code:-1})));i()}catch(e){i(e)}}),1)},30521:(e,t,n)=>{n.d(t,{default:()=>a});const i=(e,t,n=!0,i=!0)=>`${n?e:""} ${i?t[4<e%100&&e%100<20?2:[2,0,1,1,1,2][Math.min(e%10,5)]]:""}`.trim();var r=n(96540);const s=class{isDebug=!1;decodedKeys;constructor(e){this.decodedKeys=e}use(e,t={},n="decode"){if(!e)return"...";if(this.isDebug)return e;if(!(e in this.decodedKeys))return"";let r=this.decodedKeys[e];if("raw"===n)return r;if(Array.isArray(r)&&"number"==typeof t)return i(t,r);if("string"==typeof r&&t&&"object"==typeof t)for(const[e,n]of r.matchAll(/\{(.*?)\}/g)){const i=t[n]||"";r=String(r).replace(e,i)}return r}toggleDebug(){this.isDebug=!this.isDebug}},c=/(\{[\d|\w]+\})/;const a=class extends s{constructor(e){super(e)}use(e,t={},n="decode"){if(!e)return"...";if(this.isDebug)return e;if(!(e in this.decodedKeys))return"";let s=this.decodedKeys[e];if("raw"===n)return s;if(Array.isArray(s)&&"number"==typeof t)return i(t,s);if("string"==typeof s&&t&&"object"==typeof t){let e=!1;const n=(s||"").split(c).filter((e=>!!e)).map(((n,i)=>{if(n.match(c)){const s=n.slice(1,-1);let c=t[s];return(0,r.isValidElement)(c)?(e=!0,r.Children.toArray(c).map((e=>({...e,key:i.toString()})))):c}return n}));return e?n:n.join("")}return s}}},48104:(e,t,n)=>{n.d(t,{A:()=>i});const i={Action:"D_4wYHYXuZcDW4os",Action__Text:"mA_NmgrZkTg7SH8h",Action__Link:"yQGtydVCLxRLnMW2"}},59154:(e,t,n)=>{n.d(t,{A:()=>i});const i={Avatar:"PEp_NqZqPfV0LaC0",MessagesViewer:"MKTeBw1zWt74LWe3",Pagination:"flLL09U_9hB92qFm",HistoryWrapper:"yTDwqDxH37eOLfx8"}}}]);