"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[3161],{72056:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(52370);const l=async function*(e=0){const t=await n.vkapiWrapper.photos.getAlbumsCount({group_id:e});if(yield{count:t,offset:0,items:[]},0===t)return;let s=0;for(;s<t;){const l={offset:s,count:100,need_system:0};e&&(l.owner_id=-e);const{items:o}=await n.vkapiWrapper.photos.getAlbums(l);if(0===o.length)break;yield{count:t,offset:s,items:o||[]},s+=100}}},21036:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>h});var l=s(74848),o=s(7139),i=s(58006),a=s(8015),c=s(48081),r=s(39107),u=s(96540),d=e([o,a]);[o,a]=d.then?(await d)():d;const h=({albums:e,onSelectedAlbums:t})=>{const s=(0,i.A)({isGroup:!0}),n=(0,a.A)(),d=(0,c.Gz)(),[h,_]=(0,u.useState)([]);if(0===e.length)return(0,l.jsx)(r.YJl,{children:(0,l.jsx)(r.OrA,{children:n.use("global_not_found")})});return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.YJl,{style:{padding:0},children:[(0,l.jsx)(r.iau,{children:(0,l.jsx)(r.lZ$,{extraSubtitle:n.use("settings_cleaner_photo_albums_select")})}),(0,l.jsx)(r.guY,{style:{maxHeight:s-68-60-16},children:(0,l.jsx)(r.iau,{children:e.map((e=>(0,l.jsx)(r.Sc0,{description:0===e.size?n.use("settings_photo_album_empty_description"):n.use("settings_photo_album_count",e.size),checked:h.includes(e.id),onChange:()=>{_((t=>t.includes(e.id)?t.filter((t=>t!==e.id)):[...t,e.id]))},children:e.title},e.id)))})}),(0,l.jsx)(r.iau,{children:(0,l.jsxs)(r.$nd,{stretched:!0,size:"m",onClick:()=>{d.showPopout((0,l.jsx)(r.FcD,{actions:[{title:n.use("global_cancel"),mode:"cancel"},{title:n.use("global_remove"),mode:"destructive",action:()=>t(h)}],onClose:()=>d.hidePopout(),title:n.use("settings_confirm_action"),description:n.use("settings_cleaner_photo_albums_confirm_clear",{count:h.length}),actionsLayout:"horizontal"}))},disabled:0===h.length,after:(0,l.jsx)(o.A.Prime,{}),children:[n.use("global_remove")," (",h.length,")"]})})]})})};n()}catch(e){n(e)}}))},80258:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.r(t),s.d(t,{default:()=>y});var l=s(74848),o=s(52370),i=s(85252),a=s(8015),c=s(68741),r=s(48081),u=s(39107),d=s(96540),h=s(74225),_=s.n(h),m=s(58207),p=s(49747),g=s(23050),b=s(72056),f=s(57610),x=s(21036),j=e([a,m,p,x]);[a,m,p,x]=j.then?(await j)():j;const A=()=>{const e=(0,a.A)(),[t,s]=(0,d.useState)(null),[n,h]=(0,d.useState)(0),[m,j]=(0,d.useState)(0),[A,y]=(0,d.useState)(null),v=(0,f.F9)(),[k]=(0,i.A)(),w=(0,r.Gz)();_()((async e=>{s(null),h(0),j(0),y(null);const t=[];for await(const{offset:s,count:n,items:l}of(0,b.A)(v)){if(!e())return;if(0===s&&(h(n),j(0)),0===n){h(s);break}for(const e of l)e.can_delete&&t.push(e);j(t.length)}e()&&s(t)}),[v]);return null!==A?m===A?(0,l.jsx)(p.A,{}):(0,l.jsx)(u.YJl,{children:(0,l.jsx)(g.A,{label:e.use("settings_cleaner_photo_albums_removing"),value:m,max:A})}):null===t?(0,l.jsx)(u.YJl,{children:(0,l.jsx)(g.A,{label:e.use("settings_cleaner_photo_albums_getting"),value:m,max:n})}):(0,l.jsx)(x.A,{albums:t,onSelectedAlbums:async e=>{if(k){j(0),y(e.length);for(const t of e){try{await o.vkapiWrapper.photos.deleteAlbum({group_id:v,album_id:t})}catch(e){console.error(e)}j((e=>e+1))}}else w.push(c.JZ.root.main.prime)}})},y=()=>{const e=(0,a.A)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.A,{children:e.use("settings_menu_cleaner_photo_albums_title")}),(0,l.jsx)(A,{})]})};n()}catch(e){n(e)}}))}}]);