"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[9765],{90603:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(95728);const o=()=>{const e=document.getElementById("profile_redesigned");if(!e)return{state:void 0,profileRedesigned:void 0,store:void 0};const t=document.getElementById("react_rootprofile"),{container:n}=(0,r.A)(t);let{env:o,store:s}=n?.memoizedState?.element?.props||{};if(!s){const{fiber:t}=(0,r.A)(e);s=t?.return?.return?.memoizedProps?.value?.store}const i=s?.getState?.();return i||console.warn("profile state not found"),{state:i||void 0,profileRedesigned:e,store:s,env:o}}},2120:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(53644);const o="wGnjLCZ_kHG1SsM_",s="u4jlO0w2ygIFdPcp",i="h3nvK3QpPJNPuRux",a=({leftIcon:e,onClick:t,text:n})=>{const a=document.createElement("button");if(a.className=o,e){const t=document.createElement("div");t.className=s,t.appendChild((0,r.A)(e)),a.appendChild(t)}if(n){const e=document.createElement("div");e.className=i,e.innerText=n,a.appendChild(e)}return t&&a.addEventListener("click",t),a}},38444:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(22440),o=n(1145),s=n(14943),i=n(95684),a=n(38729),l=n(4107),d=n(2006);const c=(0,r.A)(),u=(0,a.NS)(),h=(0,a.NS)(),p=[],m=async(e,t)=>{for(const n of p){const r=n[t];r&&(await(0,i.A)(),r(e))}},v=(e,t)=>{t[u]||(t[u]=new MutationObserver((async n=>{for(const r of n)if("attributes"===r.type&&"style"===r.attributeName&&(await(0,i.A)(),"none"===t.style.display)){const t=e.querySelector(".Profile");t&&m(t,"onProfileLoadComplited")}})),t[u].observe(t,{attributes:!0}),d.A.add(t))},f=e=>{const t=e.querySelector(".Profile");return!!t&&(m(t,"onProfileLoadComplited"),!0)},g=()=>{for(const e of document.querySelectorAll(".ProfileWrapper,.ProfileWrapper__root")){m(e,"onProfileLoad");const t=e.querySelector("#profile_skeleton"),n=e.querySelector(".ProfileWrapper__root,#react_rootprofile");n?.firstChild?f(n)||n&&!n[h]&&(n[h]=new MutationObserver(((e,t)=>{f(n)&&t.disconnect()})),n[h].observe(n,{childList:!0}),d.A.add(n)):t?v(e,t):m(e,"onErrorFindSkeleton")}};let _=!1;const w=async e=>{if(p.push(e),(0,o.A)(g),_)return;_=!0;(await(0,l.A)()).subscribeOnModuleEvaluated((async()=>{await(0,s.A)(),c.cur?.module&&"profile"!==c.cur?.module||requestIdleCallback(g)}))}},9794:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>c});var o=n(387),s=n(26555),i=n(52352),a=n(93819);const e=await a.A;let l=0;class d{id;listeners=new Map;icon;title;subtitle;progressTotal;progress;onCancel;timeLeft;indicator;progressText;iconUrl;_bytesPerSecond;startTime;interval;constructor(e){const t=e;this.id=`${l++}_${(0,o.A)()}`;const n=this.notifyListeners.bind(this),r=["title","subtitle","progress","progressTotal","onCancel","icon","timeLeft","indicator","progressText","iconUrl"];for(const e of r)Object.defineProperty(this,e,{get:()=>t[e],set(r){t[e]=r,n(e,r)}});this._bytesPerSecond=0,this.startTime=Date.now()}notifyListeners=(e,t)=>{if(this.listeners.has(e))for(const n of this.listeners.get(e))n(t)};addChangePropertyListener=(e,t)=>{const n=this.listeners.get(e)||new Set;return n.add(t),this.listeners.set(e,n),()=>{n.delete(t),this.listeners.set(e,n)}};updateBytesPerSecond=e=>{this._bytesPerSecond+=e};updateTimeLeft=(t,n=this.progress,r=this.progressTotal,o=0)=>{if(void 0===n)return;o||(o=(0,i.A)(n,0,r||100)),this.updateBytesPerSecond(t);const s=Date.now()-this.startTime;let a=`0${e.use("vkcom_time_s")}`;o<100&&(a=new Date(100*s/o-s),a=[[a.getUTCFullYear()-1970,e.use("vkcom_time_y")],[a.getUTCMonth(),e.use("vkcom_time_mo")],[a.getUTCDate()-1,e.use("vkcom_time_d")],[a.getUTCHours(),e.use("vkcom_time_h")],[a.getUTCMinutes(),e.use("vkcom_time_m")],[a.getUTCSeconds(),e.use("vkcom_time_s")]].filter((e=>!!e[0])).slice(0,2).map((e=>e.join(""))).join(" ")||`0${e.use("vkcom_time_s")}`),this.timeLeft=a};startSpeed(){return this.stopSpeed(),this.indicator=(0,s.A)(0),this.interval=setInterval((()=>{this.indicator=(0,s.A)(this._bytesPerSecond)+"/s",this._bytesPerSecond=0}),1e3),()=>{this.stopSpeed()}}clearIndicator(){this.stopSpeed(),this.progress=this.progressTotal=this.timeLeft=this.indicator=void 0}stopSpeed(){this.interval&&(clearInterval(this.interval),delete this.interval)}}const c=d;r()}catch(e){r(e)}}),1)},4336:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(74848),o=n(1145),s=n(3068),i=n(70459);const a=new class{wrapper=document.createElement("li");_unsafeUnmount=null;listeners=[];events=[];getEvents(){return[...this.events]}addEvent(e){return this.events.push(e),this.onEventsChange(),()=>{this.events=this.events.filter((t=>t!==e)),this.onEventsChange()}}removeEvent(e){this.events=this.events.filter((t=>t.id!==e)),this.onEventsChange()}addEventsChangeListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}onEventsChange(){for(const e of this.listeners)e(this.getEvents());this.events.length>=1?(0,o.A)((()=>this.renderManager())):this.removeManager()}async downloadFileFromLink(e,t){const r=(await n.e(7746).then(n.bind(n,37746))).default;await r(e,t)}async renderManager(){if(this.wrapper.parentElement)return;this.wrapper.className="HeaderNav__item";const e=document.querySelector(".HeaderNav,#top_nav");if(!e)return void console.error("HeaderNav not found");const t=e.querySelector(".HeaderNav__audio");t?(t.insertAdjacentElement("afterend",this.wrapper),this.wrapper.style.order=""):(e.appendChild(this.wrapper),this.wrapper.style.order="-1"),this._unsafeUnmount&&this._unsafeUnmount();const{default:o}=await Promise.all([n.e(2551),n.e(7983),n.e(2020),n.e(3543),n.e(9452),n.e(2477),n.e(6052)]).then(n.bind(n,86052)),{unmount:a}=await(0,s.A)({root:this.wrapper,content:(0,r.jsx)(o,{}),disableParentTransformForPositionFixedElements:!0,disablePortal:!0,wrapperProps:{className:i.A.DownloadManagerPopup}});this._unsafeUnmount=a}removeManager(){0===this.events.length&&(this.wrapper.parentElement&&this.wrapper.remove(),this._unsafeUnmount&&(this._unsafeUnmount(),this._unsafeUnmount=null))}}},88298:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{N:()=>s.A,j:()=>o.A});var o=n(9794),s=n(4336),i=e([o]);o=(i.then?(await i)():i)[0],r()}catch(e){r(e)}}))},69765:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.r(t);var o=n(94229),s=n(35584),i=n(90603),a=n(2120),l=n(38444),d=n(93819),c=n(88298),u=e([c]);c=(u.then?(await u)():u)[0];const h=()=>{const{state:e}=(0,i.A)();if(!e)return;if(!e.owner.cover?.images)throw new Error("Обложка не установлена");const t=(0,s.A)(e.owner.cover?.images,9999999)||e.owner.cover?.images[0];c.N.downloadFileFromLink(t.url,`cover${e.owner?.id||""}.jpg`)},p=async e=>{const t=e.querySelector(".OwnerPageCover__in");if(!t||!t.style.backgroundImage||t.vkn_down_inj)return;t.vkn_down_inj=!0;const n=await d.A;t.appendChild((0,a.A)({leftIcon:o.A,text:n.use("global_download"),onClick:h}))};(0,l.A)({onProfileLoadComplited:p}),r()}catch(e){r(e)}}))},35584:(e,t,n)=>{n.d(t,{A:()=>r});const r=(e,t,n=null)=>{if(!Array.isArray(e)||0===e.length)return null;const r=[...e].sort(((e,t)=>e.width<t.width?-1:e.width>t.width?1:e.height<t.height?-1:e.height>t.height?1:0)),o=r.filter((e=>e.width>=t));if(0===o.length)return r[r.length-1];if(!n)return o[0];for(let e=0;e<o.length;e++){const t=o[e];if(t.height>=n)return t}const s=o.sort(((e,t)=>t.height-e.height));return s[s.length-1]}},53644:(e,t,n)=>{n.d(t,{A:()=>o});let r=0;const o=e=>{const t=!!document.importNode;let n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;t&&(n=document.importNode(n,!0));for(const e of n.querySelectorAll("title,desc"))e.remove();for(const e of n.querySelectorAll("[id]")){if(!e.id)continue;const t="vknext_icon-"+r++;let o=!1;for(const r of n.querySelectorAll(`[fill="url(#${e.id})"]`))r.setAttribute("fill",`url(#${t})`),o=!0;o&&(e.id=t)}return n}},52352:(e,t,n)=>{n.d(t,{A:()=>r});const r=(e,t,n)=>e<t?0:e>n?100:(e-t)/(n-t)*100},70459:(e,t,n)=>{n.d(t,{A:()=>r});const r={AudioPageMainTabBtn:"XYzoAKWs2KhH02Ye",AudioArtistHeaderActions:"v8VBorduCtZgTyyi",VideoPlayerDownloadIcon:"eaSw45y_1KLlo4Gw",SecondaryAttachment__afterItem:"RZ6NWD1WvjAOxG2Y",DownloadManagerPopup:"o9vy1XhnZrkvykUb",VideoPlayerHlsWarning__tooltip:"P9MhdlrtilEQt7Am",VideoPlayerHlsWarning__text:"Xq2PVks6OK6Z74Al",AudioPlaylistSnippet__actions:"FawmW4_Zd1R1BI1E",AudioPlaylistSnippet__actionButton:"ZPr5mXzL52VUPaRe",ActionButton__icon:"_5bFyslOmNjqqP7y",ActionButton__text:"o7YAH98fI9KVToa5",AudioPlayerUserControlsContainer__userButton:"e47qq1XqMPp6oTp7",AudioPlayerPlaybackButton:"wqb5e3cgYZFgHCc1",AudioRowReact__button:"q7d6KTdMjs6HYpKm"}},94229:(e,t,n)=>{n.d(t,{A:()=>r});const r='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.002 2a.9.9 0 0 1 .9.9v11.002l4.562-4.631a.9.9 0 1 1 1.283 1.263l-6.104 6.195a.9.9 0 0 1-1.284-.001l-6.09-6.206a.9.9 0 1 1 1.286-1.26l4.547 4.633V2.9a.9.9 0 0 1 .9-.9Zm-8 18.1a.9.9 0 0 1 .9-.9h14.2a.9.9 0 1 1 0 1.8h-14.2a.9.9 0 0 1-.9-.9Z" clip-rule="evenodd"/></svg>\n'}}]);