"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[2135],{2120:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(53644);const o="wGnjLCZ_kHG1SsM_",r="u4jlO0w2ygIFdPcp",i="h3nvK3QpPJNPuRux",a=({leftIcon:e,onClick:t,text:n})=>{const a=document.createElement("button");if(a.className=o,e){const t=document.createElement("div");t.className=r,t.appendChild((0,s.A)(e)),a.appendChild(t)}if(n){const e=document.createElement("div");e.className=i,e.innerText=n,a.appendChild(e)}return t&&a.addEventListener("click",t),a}},9794:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.d(t,{A:()=>d});var o=n(387),r=n(26555),i=n(52352),a=n(93819);const e=await a.A;let l=0;class c{id;listeners=new Map;icon;title;subtitle;progressTotal;progress;onCancel;timeLeft;indicator;progressText;iconUrl;_bytesPerSecond;startTime;interval;constructor(e){const t=e;this.id=`${l++}_${(0,o.A)()}`;const n=this.notifyListeners.bind(this),s=["title","subtitle","progress","progressTotal","onCancel","icon","timeLeft","indicator","progressText","iconUrl"];for(const e of s)Object.defineProperty(this,e,{get:()=>t[e],set(s){t[e]=s,n(e,s)}});this._bytesPerSecond=0,this.startTime=Date.now()}notifyListeners=(e,t)=>{if(this.listeners.has(e))for(const n of this.listeners.get(e))n(t)};addChangePropertyListener=(e,t)=>{const n=this.listeners.get(e)||new Set;return n.add(t),this.listeners.set(e,n),()=>{n.delete(t),this.listeners.set(e,n)}};updateBytesPerSecond=e=>{this._bytesPerSecond+=e};updateTimeLeft=(t,n=this.progress,s=this.progressTotal,o=0)=>{if(void 0===n)return;o||(o=(0,i.A)(n,0,s||100)),this.updateBytesPerSecond(t);const r=Date.now()-this.startTime;let a=`0${e.use("vkcom_time_s")}`;o<100&&(a=new Date(100*r/o-r),a=[[a.getUTCFullYear()-1970,e.use("vkcom_time_y")],[a.getUTCMonth(),e.use("vkcom_time_mo")],[a.getUTCDate()-1,e.use("vkcom_time_d")],[a.getUTCHours(),e.use("vkcom_time_h")],[a.getUTCMinutes(),e.use("vkcom_time_m")],[a.getUTCSeconds(),e.use("vkcom_time_s")]].filter((e=>!!e[0])).slice(0,2).map((e=>e.join(""))).join(" ")||`0${e.use("vkcom_time_s")}`),this.timeLeft=a};startSpeed(){return this.stopSpeed(),this.indicator=(0,r.A)(0),this.interval=setInterval((()=>{this.indicator=(0,r.A)(this._bytesPerSecond)+"/s",this._bytesPerSecond=0}),1e3),()=>{this.stopSpeed()}}clearIndicator(){this.stopSpeed(),this.progress=this.progressTotal=this.timeLeft=this.indicator=void 0}stopSpeed(){this.interval&&(clearInterval(this.interval),delete this.interval)}}const d=c;s()}catch(e){s(e)}}),1)},4336:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(74848),o=n(1145),r=n(3068),i=n(70459);const a=new class{wrapper=document.createElement("li");_unsafeUnmount=null;listeners=[];events=[];getEvents(){return[...this.events]}addEvent(e){return this.events.push(e),this.onEventsChange(),()=>{this.events=this.events.filter((t=>t!==e)),this.onEventsChange()}}removeEvent(e){this.events=this.events.filter((t=>t.id!==e)),this.onEventsChange()}addEventsChangeListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}onEventsChange(){for(const e of this.listeners)e(this.getEvents());this.events.length>=1?(0,o.A)((()=>this.renderManager())):this.removeManager()}async downloadFileFromLink(e,t){const s=(await n.e(7746).then(n.bind(n,37746))).default;await s(e,t)}async renderManager(){if(this.wrapper.parentElement)return;this.wrapper.className="HeaderNav__item";const e=document.querySelector(".HeaderNav,#top_nav");if(!e)return void console.error("HeaderNav not found");const t=e.querySelector(".HeaderNav__audio");t?(t.insertAdjacentElement("afterend",this.wrapper),this.wrapper.style.order=""):(e.appendChild(this.wrapper),this.wrapper.style.order="-1"),this._unsafeUnmount&&this._unsafeUnmount();const{default:o}=await Promise.all([n.e(2551),n.e(7983),n.e(2020),n.e(3543),n.e(9452),n.e(2477),n.e(6052)]).then(n.bind(n,86052)),{unmount:a}=await(0,r.A)({root:this.wrapper,content:(0,s.jsx)(o,{}),disableParentTransformForPositionFixedElements:!0,disablePortal:!0,wrapperProps:{className:i.A.DownloadManagerPopup}});this._unsafeUnmount=a}removeManager(){0===this.events.length&&(this.wrapper.parentElement&&this.wrapper.remove(),this._unsafeUnmount&&(this._unsafeUnmount(),this._unsafeUnmount=null))}}},88298:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.d(t,{N:()=>r.A,j:()=>o.A});var o=n(9794),r=n(4336),i=e([o]);o=(i.then?(await i)():i)[0],s()}catch(e){s(e)}}))},52135:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.r(t);var o=n(22440),r=n(94229),i=n(2120),a=n(84060),l=n(4107),c=n(93819),d=n(88298),u=n(22399),h=e([d]);d=(h.then?(await h)():h)[0];const p=(0,o.A)(),m=e=>{const t=`cover${p.cur.oid||""}.jpg`,n=(0,u.A)(e.style.backgroundImage);n&&d.N.downloadFileFromLink(n,t)},v=async()=>{const e=document.querySelector(".redesigned-group-cover__img,._page_cover");if(!e||!e.style.backgroundImage||e.vkn_down_inj)return;e.vkn_down_inj=!0;const t=await c.A;e.appendChild((0,i.A)({leftIcon:r.A,text:t.use("global_download"),onClick:()=>m(e)}))};(async()=>{const e=await(0,l.A)(),t=await(0,a.A)();e.subscribeOnModuleEvaluated((async()=>{["group","public","profile","groups"].includes(t?.module)&&await v()})),["group","public","profile","groups"].includes(t?.module)&&await v()})().catch(console.error),s()}catch(e){s(e)}}))},22399:(e,t,n)=>{n.d(t,{A:()=>s});const s=e=>{const t=e.match(/url\("([^"]+)"\)/);if(t)return t[1];throw new Error("url not found")}},53644:(e,t,n)=>{n.d(t,{A:()=>o});let s=0;const o=e=>{const t=!!document.importNode;let n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;t&&(n=document.importNode(n,!0));for(const e of n.querySelectorAll("title,desc"))e.remove();for(const e of n.querySelectorAll("[id]")){if(!e.id)continue;const t="vknext_icon-"+s++;let o=!1;for(const s of n.querySelectorAll(`[fill="url(#${e.id})"]`))s.setAttribute("fill",`url(#${t})`),o=!0;o&&(e.id=t)}return n}},52352:(e,t,n)=>{n.d(t,{A:()=>s});const s=(e,t,n)=>e<t?0:e>n?100:(e-t)/(n-t)*100},70459:(e,t,n)=>{n.d(t,{A:()=>s});const s={AudioPageMainTabBtn:"XYzoAKWs2KhH02Ye",AudioArtistHeaderActions:"v8VBorduCtZgTyyi",VideoPlayerDownloadIcon:"eaSw45y_1KLlo4Gw",SecondaryAttachment__afterItem:"RZ6NWD1WvjAOxG2Y",DownloadManagerPopup:"o9vy1XhnZrkvykUb",VideoPlayerHlsWarning__tooltip:"P9MhdlrtilEQt7Am",VideoPlayerHlsWarning__text:"Xq2PVks6OK6Z74Al",AudioPlaylistSnippet__actions:"FawmW4_Zd1R1BI1E",AudioPlaylistSnippet__actionButton:"ZPr5mXzL52VUPaRe",ActionButton__icon:"_5bFyslOmNjqqP7y",ActionButton__text:"o7YAH98fI9KVToa5",AudioPlayerUserControlsContainer__userButton:"e47qq1XqMPp6oTp7",AudioPlayerPlaybackButton:"wqb5e3cgYZFgHCc1",AudioRowReact__button:"q7d6KTdMjs6HYpKm"}},94229:(e,t,n)=>{n.d(t,{A:()=>s});const s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.002 2a.9.9 0 0 1 .9.9v11.002l4.562-4.631a.9.9 0 1 1 1.283 1.263l-6.104 6.195a.9.9 0 0 1-1.284-.001l-6.09-6.206a.9.9 0 1 1 1.286-1.26l4.547 4.633V2.9a.9.9 0 0 1 .9-.9Zm-8 18.1a.9.9 0 0 1 .9-.9h14.2a.9.9 0 1 1 0 1.8h-14.2a.9.9 0 0 1-.9-.9Z" clip-rule="evenodd"/></svg>\n'}}]);