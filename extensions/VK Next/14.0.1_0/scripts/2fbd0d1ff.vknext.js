"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[3716],{9794:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>d});var r=s(387),i=s(26555),o=s(52352),a=s(93819);const e=await a.A;let l=0;class c{id;listeners=new Map;icon;title;subtitle;progressTotal;progress;onCancel;timeLeft;indicator;progressText;iconUrl;_bytesPerSecond;startTime;interval;constructor(e){const t=e;this.id=`${l++}_${(0,r.A)()}`;const s=this.notifyListeners.bind(this),n=["title","subtitle","progress","progressTotal","onCancel","icon","timeLeft","indicator","progressText","iconUrl"];for(const e of n)Object.defineProperty(this,e,{get:()=>t[e],set(n){t[e]=n,s(e,n)}});this._bytesPerSecond=0,this.startTime=Date.now()}notifyListeners=(e,t)=>{if(this.listeners.has(e))for(const s of this.listeners.get(e))s(t)};addChangePropertyListener=(e,t)=>{const s=this.listeners.get(e)||new Set;return s.add(t),this.listeners.set(e,s),()=>{s.delete(t),this.listeners.set(e,s)}};updateBytesPerSecond=e=>{this._bytesPerSecond+=e};updateTimeLeft=(t,s=this.progress,n=this.progressTotal,r=0)=>{if(void 0===s)return;r||(r=(0,o.A)(s,0,n||100)),this.updateBytesPerSecond(t);const i=Date.now()-this.startTime;let a=`0${e.use("vkcom_time_s")}`;r<100&&(a=new Date(100*i/r-i),a=[[a.getUTCFullYear()-1970,e.use("vkcom_time_y")],[a.getUTCMonth(),e.use("vkcom_time_mo")],[a.getUTCDate()-1,e.use("vkcom_time_d")],[a.getUTCHours(),e.use("vkcom_time_h")],[a.getUTCMinutes(),e.use("vkcom_time_m")],[a.getUTCSeconds(),e.use("vkcom_time_s")]].filter((e=>!!e[0])).slice(0,2).map((e=>e.join(""))).join(" ")||`0${e.use("vkcom_time_s")}`),this.timeLeft=a};startSpeed(){return this.stopSpeed(),this.indicator=(0,i.A)(0),this.interval=setInterval((()=>{this.indicator=(0,i.A)(this._bytesPerSecond)+"/s",this._bytesPerSecond=0}),1e3),()=>{this.stopSpeed()}}clearIndicator(){this.stopSpeed(),this.progress=this.progressTotal=this.timeLeft=this.indicator=void 0}stopSpeed(){this.interval&&(clearInterval(this.interval),delete this.interval)}}const d=c;n()}catch(e){n(e)}}),1)},4336:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(74848),r=s(1145),i=s(3068),o=s(70459);const a=new class{wrapper=document.createElement("li");_unsafeUnmount=null;listeners=[];events=[];getEvents(){return[...this.events]}addEvent(e){return this.events.push(e),this.onEventsChange(),()=>{this.events=this.events.filter((t=>t!==e)),this.onEventsChange()}}removeEvent(e){this.events=this.events.filter((t=>t.id!==e)),this.onEventsChange()}addEventsChangeListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}onEventsChange(){for(const e of this.listeners)e(this.getEvents());this.events.length>=1?(0,r.A)((()=>this.renderManager())):this.removeManager()}async downloadFileFromLink(e,t){const n=(await s.e(7746).then(s.bind(s,37746))).default;await n(e,t)}async renderManager(){if(this.wrapper.parentElement)return;this.wrapper.className="HeaderNav__item";const e=document.querySelector(".HeaderNav,#top_nav");if(!e)return void console.error("HeaderNav not found");const t=e.querySelector(".HeaderNav__audio");t?(t.insertAdjacentElement("afterend",this.wrapper),this.wrapper.style.order=""):(e.appendChild(this.wrapper),this.wrapper.style.order="-1"),this._unsafeUnmount&&this._unsafeUnmount();const{default:r}=await Promise.all([s.e(2551),s.e(7983),s.e(2020),s.e(3543),s.e(9452),s.e(2477),s.e(6052)]).then(s.bind(s,86052)),{unmount:a}=await(0,i.A)({root:this.wrapper,content:(0,n.jsx)(r,{}),disableParentTransformForPositionFixedElements:!0,disablePortal:!0,wrapperProps:{className:o.A.DownloadManagerPopup}});this._unsafeUnmount=a}removeManager(){0===this.events.length&&(this.wrapper.parentElement&&this.wrapper.remove(),this._unsafeUnmount&&(this._unsafeUnmount(),this._unsafeUnmount=null))}}},88298:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{N:()=>i.A,j:()=>r.A});var r=s(9794),i=s(4336),o=e([r]);r=(o.then?(await o)():o)[0],n()}catch(e){n(e)}}))},57448:(e,t,s)=>{s.d(t,{A:()=>n});const n=e=>{const t=new URL(e).pathname;return t.substring(t.lastIndexOf("/")+1)}},62493:(e,t,s)=>{s.d(t,{A:()=>r,B:()=>n});const n=["a","b","i","p","q","s","w","z","y","x","r","o","m","g","max","l","f","k","c","e","d","j","temp","h","n"],r=(e=window.cur.pvCurPhoto)=>{if(!e)throw new Error("Фоторедактор не открыт");let t=null,s=0;for(const[r,i]of Object.entries(e)){const e=r.slice(0,-1);if(n.includes(e)){const[e,n,r]=i,o=n*r;o>s&&(s=o,t=[e,n,r])}}if(!t)throw new Error("Фото не найдено");return t}},53644:(e,t,s)=>{s.d(t,{A:()=>r});let n=0;const r=e=>{const t=!!document.importNode;let s=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;t&&(s=document.importNode(s,!0));for(const e of s.querySelectorAll("title,desc"))e.remove();for(const e of s.querySelectorAll("[id]")){if(!e.id)continue;const t="vknext_icon-"+n++;let r=!1;for(const n of s.querySelectorAll(`[fill="url(#${e.id})"]`))n.setAttribute("fill",`url(#${t})`),r=!0;r&&(e.id=t)}return s}},52352:(e,t,s)=>{s.d(t,{A:()=>n});const n=(e,t,s)=>e<t?0:e>s?100:(e-t)/(s-t)*100},70459:(e,t,s)=>{s.d(t,{A:()=>n});const n={AudioPageMainTabBtn:"XYzoAKWs2KhH02Ye",AudioArtistHeaderActions:"v8VBorduCtZgTyyi",VideoPlayerDownloadIcon:"eaSw45y_1KLlo4Gw",SecondaryAttachment__afterItem:"RZ6NWD1WvjAOxG2Y",DownloadManagerPopup:"o9vy1XhnZrkvykUb",VideoPlayerHlsWarning__tooltip:"P9MhdlrtilEQt7Am",VideoPlayerHlsWarning__text:"Xq2PVks6OK6Z74Al",AudioPlaylistSnippet__actions:"FawmW4_Zd1R1BI1E",AudioPlaylistSnippet__actionButton:"ZPr5mXzL52VUPaRe",ActionButton__icon:"_5bFyslOmNjqqP7y",ActionButton__text:"o7YAH98fI9KVToa5",AudioPlayerUserControlsContainer__userButton:"e47qq1XqMPp6oTp7",AudioPlayerPlaybackButton:"wqb5e3cgYZFgHCc1",AudioRowReact__button:"q7d6KTdMjs6HYpKm"}},37445:(e,t,s)=>{s.d(t,{A:()=>n});const n='<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path clip-rule="evenodd" d="m4 17.75c0-.4142.33579-.75.75-.75h10.5c.4142 0 .75.3358.75.75s-.3358.75-.75.75h-10.5c-.41421 0-.75-.3358-.75-.75z" fill-rule="evenodd"/><path d="m10.7493 2.72581c0-.40086-.3355-.72581-.74931-.72581-.41385 0-.74933.32495-.74933.72581l-.00001 9.72199-3.97032-3.97029c-.29289-.29289-.76777-.29289-1.06066 0s-.29289.76777 0 1.06066l5.24532 5.24533c.2929.2929.76781.2929 1.06071 0l5.2558-5.25585c.2929-.2929.2929-.76777 0-1.06067-.2929-.29289-.7678-.29289-1.0606 0l-3.9716 3.97152z"/></g></svg>\n'}}]);